<!DOCTYPE html><html><head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" type="text/css" href="https://flo.uri.sh/template/91599/v6/static/style.css">
		<link href="https://public.flourish.studio/resources/fonts/canva-sans.css" rel="stylesheet" type="text/css">
		<base target="_top">
	<title>Rates Over Time</title></head>
	<body>
	

<script>window.Flourish = {"static_prefix":"https://flo.uri.sh/template/91599/v6/static","environment":"live","is_read_only":true};</script><script>var template=function(t){"use strict";var e,n,r,i;Array.from||(Array.from=(e=Object.prototype.toString,n=function(t){return"function"==typeof t||"[object Function]"===e.call(t)},r=Math.pow(2,53)-1,i=function(t){var e=function(t){var e=Number(t);return isNaN(e)?0:0!==e&&isFinite(e)?(e>0?1:-1)*Math.floor(Math.abs(e)):e}(t);return Math.min(Math.max(e,0),r)},function(t){var e=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var r,a=arguments.length>1?arguments[1]:void 0;if(void 0!==a){if(!n(a))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(r=arguments[2])}for(var o,l=i(e.length),u=n(this)?Object(new this(l)):new Array(l),s=0;s<l;)o=e[s],u[s]=a?void 0===r?a(o,s):a.call(r,o,s):o,s+=1;return u.length=l,u}));var a={},o={height_mode:"auto",padding_right:6,padding_left:0,padding_top:0,padding_bottom:0,play_mode:"all",zoom_steps_to_show:3,color_mode:"line",color:{},color_single:"#333333",color_single_overrides:"CDU: red",start_circle_r:.3,end_circle_r:1.5,end_circle_stroke:.3,end_circle_stroke_bg:!0,circle_space_between:2,horse_images:!0,labels:{},show_labels:"always",animate_scores:!0,rank_outside_picture:!0,rank_inside_color:"#ffffff",label_divider:" ",line_opacity:1,line_width:.3,curve:"curveLinear",shade:!0,shade_opacity:.1,shade_width:1,missing:!1,missing_opacity:1,missing_stroke_dash:.5,missing_width:.1,stage_duration:1500,update_duration:500,value_type:"scores",higher_scores_win:!0,ties_mode:"competition",target_position:null,selected_horse:null,mouseover_horse:null,x:{title_mode:"custom",nice:!1,axis_position:"top"},y:{title_mode:"custom",nice:!1},zoom_y_axis:!1,chart_bg:{},show_buttons:!0,toggle_control:{control_type:"buttons",button_group_width_mode:"auto"},show_replay:!0,filter_control:{},filter_include_all:!0,filter_all_label:"All",filter_value:null,label_ranks:"Ranks",label_scores:"Scores",label_replay:"Replay",controls_style:{},button_style:{},dropdown_style:{},caption_mode:"text_legend",caption_font_size:1,caption_text_color:null,caption_text_weight:"normal",caption_background_color:null,caption_opacity:1,caption_border_color:"#ffffff",caption_text_align_h:"center",caption_text_align_v:"center",caption_border_radius:.2,caption_padding:1,caption_position:"center-center",caption_space_between:1,caption_text_width:15,caption_image_width:15,caption_image_position:"column",formatting:{},layout:{}};var l="http://www.w3.org/1999/xhtml",u={svg:"http://www.w3.org/2000/svg",xhtml:l,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function s(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),u.hasOwnProperty(e)?{space:u[e],local:t}:t}function c(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===l&&e.documentElement.namespaceURI===l?e.createElement(t):e.createElementNS(n,t)}}function f(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function h(t){var e=s(t);return(e.local?f:c)(e)}function d(){}function g(t){return null==t?d:function(){return this.querySelector(t)}}function p(){return[]}function _(t){return null==t?p:function(){return this.querySelectorAll(t)}}function b(t){return function(){return this.matches(t)}}function m(t){return new Array(t.length)}function y(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}y.prototype={constructor:y,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function v(t,e,n,r,i,a){for(var o,l=0,u=e.length,s=a.length;l<s;++l)(o=e[l])?(o.__data__=a[l],r[l]=o):n[l]=new y(t,a[l]);for(;l<u;++l)(o=e[l])&&(i[l]=o)}function x(t,e,n,r,i,a,o){var l,u,s,c={},f=e.length,h=a.length,d=new Array(f);for(l=0;l<f;++l)(u=e[l])&&(d[l]=s="$"+o.call(u,u.__data__,l,e),s in c?i[l]=u:c[s]=u);for(l=0;l<h;++l)(u=c[s="$"+o.call(t,a[l],l,a)])?(r[l]=u,u.__data__=a[l],c[s]=null):n[l]=new y(t,a[l]);for(l=0;l<f;++l)(u=e[l])&&c[d[l]]===u&&(i[l]=u)}function w(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function k(t){return function(){this.removeAttribute(t)}}function M(t){return function(){this.removeAttributeNS(t.space,t.local)}}function T(t,e){return function(){this.setAttribute(t,e)}}function A(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function N(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function C(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function S(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function E(t){return function(){this.style.removeProperty(t)}}function z(t,e,n){return function(){this.style.setProperty(t,e,n)}}function D(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function F(t,e){return t.style.getPropertyValue(e)||S(t).getComputedStyle(t,null).getPropertyValue(e)}function O(t){return function(){delete this[t]}}function j(t,e){return function(){this[t]=e}}function U(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function H(t){return t.trim().split(/^|\s+/)}function L(t){return t.classList||new q(t)}function q(t){this._node=t,this._names=H(t.getAttribute("class")||"")}function P(t,e){for(var n=L(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Y(t,e){for(var n=L(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function $(t){return function(){P(this,t)}}function R(t){return function(){Y(this,t)}}function B(t,e){return function(){(e.apply(this,arguments)?P:Y)(this,t)}}function I(){this.textContent=""}function W(t){return function(){this.textContent=t}}function V(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function X(){this.innerHTML=""}function Z(t){return function(){this.innerHTML=t}}function G(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Q(){this.nextSibling&&this.parentNode.appendChild(this)}function J(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function K(){return null}function tt(){var t=this.parentNode;t&&t.removeChild(this)}function et(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function nt(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}q.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var rt={},it=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(rt={mouseenter:"mouseover",mouseleave:"mouseout"}));function at(t,e,n){return t=ot(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function ot(t,e,n){return function(r){var i=it;it=r;try{t.call(this,this.__data__,e,n)}finally{it=i}}}function lt(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,a=e.length;r<a;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function ut(t,e,n){var r=rt.hasOwnProperty(t.type)?at:ot;return function(i,a,o){var l,u=this.__on,s=r(e,a,o);if(u)for(var c=0,f=u.length;c<f;++c)if((l=u[c]).type===t.type&&l.name===t.name)return this.removeEventListener(l.type,l.listener,l.capture),this.addEventListener(l.type,l.listener=s,l.capture=n),void(l.value=e);this.addEventListener(t.type,s,n),l={type:t.type,name:t.name,value:e,listener:s,capture:n},u?u.push(l):this.__on=[l]}}function st(t,e,n){var r=S(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function ct(t,e){return function(){return st(this,t,e)}}function ft(t,e){return function(){return st(this,t,e.apply(this,arguments))}}var ht=[null];function dt(t,e){this._groups=t,this._parents=e}function gt(){return new dt([[document.documentElement]],ht)}function pt(t){return"string"==typeof t?new dt([[document.querySelector(t)]],[document.documentElement]):new dt([[t]],ht)}function _t(){for(var t,e=it;t=e.sourceEvent;)e=t;return e}function bt(t){return"string"==typeof t?new dt([document.querySelectorAll(t)],[document.documentElement]):new dt([null==t?[]:t],ht)}dt.prototype=gt.prototype={constructor:dt,select:function(t){"function"!=typeof t&&(t=g(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o,l=e[i],u=l.length,s=r[i]=new Array(u),c=0;c<u;++c)(a=l[c])&&(o=t.call(a,a.__data__,c,l))&&("__data__"in a&&(o.__data__=a.__data__),s[c]=o);return new dt(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=_(t));for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o,l=e[a],u=l.length,s=0;s<u;++s)(o=l[s])&&(r.push(t.call(o,o.__data__,s,l)),i.push(o));return new dt(r,i)},filter:function(t){"function"!=typeof t&&(t=b(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o=e[i],l=o.length,u=r[i]=[],s=0;s<l;++s)(a=o[s])&&t.call(a,a.__data__,s,o)&&u.push(a);return new dt(r,this._parents)},data:function(t,e){if(!t)return d=new Array(this.size()),s=-1,this.each((function(t){d[++s]=t})),d;var n=e?x:v,r=this._parents,i=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var a=i.length,o=new Array(a),l=new Array(a),u=new Array(a),s=0;s<a;++s){var c=r[s],f=i[s],h=f.length,d=t.call(c,c&&c.__data__,s,r),g=d.length,p=l[s]=new Array(g),_=o[s]=new Array(g);n(c,f,p,_,u[s]=new Array(h),d,e);for(var b,m,y=0,w=0;y<g;++y)if(b=p[y]){for(y>=w&&(w=y+1);!(m=_[w])&&++w<g;);b._next=m||null}}return(o=new dt(o,r))._enter=l,o._exit=u,o},enter:function(){return new dt(this._enter||this._groups.map(m),this._parents)},exit:function(){return new dt(this._exit||this._groups.map(m),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,a=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=e&&(i=e(i)),null==n?a.remove():n(a),r&&i?r.merge(i).order():i},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),l=0;l<a;++l)for(var u,s=e[l],c=n[l],f=s.length,h=o[l]=new Array(f),d=0;d<f;++d)(u=s[d]||c[d])&&(h[d]=u);for(;l<r;++l)o[l]=e[l];return new dt(o,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=w);for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o,l=n[a],u=l.length,s=i[a]=new Array(u),c=0;c<u;++c)(o=l[c])&&(s[c]=o);s.sort(e)}return new dt(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each((function(){t[++e]=this})),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,a=e[n],o=0,l=a.length;o<l;++o)(i=a[o])&&t.call(i,i.__data__,o,a);return this},attr:function(t,e){var n=s(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?M:k:"function"==typeof e?n.local?C:N:n.local?A:T)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?E:"function"==typeof e?D:z)(t,e,null==n?"":n)):F(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?O:"function"==typeof e?U:j)(t,e)):this.node()[t]},classed:function(t,e){var n=H(t+"");if(arguments.length<2){for(var r=L(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?B:e?$:R)(n,e))},text:function(t){return arguments.length?this.each(null==t?I:("function"==typeof t?V:W)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?X:("function"==typeof t?G:Z)(t)):this.node().innerHTML},raise:function(){return this.each(Q)},lower:function(){return this.each(J)},append:function(t){var e="function"==typeof t?t:h(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:h(t),r=null==e?K:"function"==typeof e?e:g(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(tt)},clone:function(t){return this.select(t?nt:et)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,a=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}(t+""),o=a.length;if(!(arguments.length<2)){for(l=e?ut:lt,null==n&&(n=!1),r=0;r<o;++r)this.each(l(a[r],e,n));return this}var l=this.node().__on;if(l)for(var u,s=0,c=l.length;s<c;++s)for(r=0,u=l[s];r<o;++r)if((i=a[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(t,e){return this.each(("function"==typeof e?ft:ct)(t,e))}};var mt={value:function(){}};function yt(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new vt(r)}function vt(t){this._=t}function xt(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function wt(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=mt,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}vt.prototype=yt.prototype={constructor:vt,on:function(t,e){var n,r,i=this._,a=(r=i,(t+"").trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))),o=-1,l=a.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<l;)if(n=(t=a[o]).type)i[n]=wt(i[n],t.name,e);else if(null==e)for(n in i)i[n]=wt(i[n],t.name,null);return this}for(;++o<l;)if((n=(t=a[o]).type)&&(n=xt(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new vt(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,n=(r=this._[t]).length;a<n;++a)r[a].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};var kt,Mt,Tt=0,At=0,Nt=0,Ct=0,St=0,Et=0,zt="object"==typeof performance&&performance.now?performance:Date,Dt="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Ft(){return St||(Dt(Ot),St=zt.now()+Et)}function Ot(){St=0}function jt(){this._call=this._time=this._next=null}function Ut(t,e,n){var r=new jt;return r.restart(t,e,n),r}function Ht(){Ft(),++Tt;for(var t,e=kt;e;)(t=St-e._time)>=0&&e._call.call(null,t),e=e._next;--Tt}function Lt(){St=(Ct=zt.now())+Et,Tt=At=0;try{Ht()}finally{Tt=0,function(){var t,e,n=kt,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:kt=e);Mt=t,Pt(r)}(),St=0}}function qt(){var t=zt.now(),e=t-Ct;e>1e3&&(Et-=e,Ct=t)}function Pt(t){Tt||(At&&(At=clearTimeout(At)),t-St>24?(t<1/0&&(At=setTimeout(Lt,t-zt.now()-Et)),Nt&&(Nt=clearInterval(Nt))):(Nt||(Ct=zt.now(),Nt=setInterval(qt,1e3)),Tt=1,Dt(Lt)))}function Yt(t,e,n){var r=new jt;return e=null==e?0:+e,r.restart((function(n){r.stop(),t(n+e)}),e,n),r}jt.prototype=Ut.prototype={constructor:jt,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Ft():+n)+(null==e?0:+e),this._next||Mt===this||(Mt?Mt._next=this:kt=this,Mt=this),this._call=t,this._time=n,Pt()},stop:function(){this._call&&(this._call=null,this._time=1/0,Pt())}};var $t=yt("start","end","cancel","interrupt"),Rt=[];function Bt(t,e,n,r,i,a){var o=t.__transition;if(o){if(n in o)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function a(t){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay)}function o(a){var s,c,f,h;if(1!==n.state)return u();for(s in i)if((h=i[s]).name===n.name){if(3===h.state)return Yt(o);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete i[s]):+s<e&&(h.state=6,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete i[s])}if(Yt((function(){3===n.state&&(n.state=4,n.timer.restart(l,n.delay,n.time),l(a))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(f=n.tween.length),s=0,c=-1;s<f;++s)(h=n.tween[s].value.call(t,t.__data__,n.index,n.group))&&(r[++c]=h);r.length=c+1}}function l(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(u),n.state=5,1),a=-1,o=r.length;++a<o;)r[a].call(t,i);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){for(var r in n.state=6,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=Ut(a,0,n.time)}(t,n,{name:e,index:r,group:i,on:$t,tween:Rt,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})}function It(t,e){var n=Vt(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function Wt(t,e){var n=Vt(t,e);if(n.state>3)throw new Error("too late; already running");return n}function Vt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Xt(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Zt(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Gt(){}var Qt=.7,Jt=1/Qt,Kt="\\s*([+-]?\\d+)\\s*",te="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ee="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ne=/^#([0-9a-f]{3,8})$/,re=new RegExp("^rgb\\("+[Kt,Kt,Kt]+"\\)$"),ie=new RegExp("^rgb\\("+[ee,ee,ee]+"\\)$"),ae=new RegExp("^rgba\\("+[Kt,Kt,Kt,te]+"\\)$"),oe=new RegExp("^rgba\\("+[ee,ee,ee,te]+"\\)$"),le=new RegExp("^hsl\\("+[te,ee,ee]+"\\)$"),ue=new RegExp("^hsla\\("+[te,ee,ee,te]+"\\)$"),se={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ce(){return this.rgb().formatHex()}function fe(){return this.rgb().formatRgb()}function he(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ne.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?de(e):3===n?new be(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?ge(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?ge(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=re.exec(t))?new be(e[1],e[2],e[3],1):(e=ie.exec(t))?new be(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=ae.exec(t))?ge(e[1],e[2],e[3],e[4]):(e=oe.exec(t))?ge(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=le.exec(t))?xe(e[1],e[2]/100,e[3]/100,1):(e=ue.exec(t))?xe(e[1],e[2]/100,e[3]/100,e[4]):se.hasOwnProperty(t)?de(se[t]):"transparent"===t?new be(NaN,NaN,NaN,0):null}function de(t){return new be(t>>16&255,t>>8&255,255&t,1)}function ge(t,e,n,r){return r<=0&&(t=e=n=NaN),new be(t,e,n,r)}function pe(t){return t instanceof Gt||(t=he(t)),t?new be((t=t.rgb()).r,t.g,t.b,t.opacity):new be}function _e(t,e,n,r){return 1===arguments.length?pe(t):new be(t,e,n,null==r?1:r)}function be(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function me(){return"#"+ve(this.r)+ve(this.g)+ve(this.b)}function ye(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function ve(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function xe(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Me(t,e,n,r)}function we(t){if(t instanceof Me)return new Me(t.h,t.s,t.l,t.opacity);if(t instanceof Gt||(t=he(t)),!t)return new Me;if(t instanceof Me)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,l=a-i,u=(a+i)/2;return l?(o=e===a?(n-r)/l+6*(n<r):n===a?(r-e)/l+2:(e-n)/l+4,l/=u<.5?a+i:2-a-i,o*=60):l=u>0&&u<1?0:o,new Me(o,l,u,t.opacity)}function ke(t,e,n,r){return 1===arguments.length?we(t):new Me(t,e,n,null==r?1:r)}function Me(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Te(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}Xt(Gt,he,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:ce,formatHex:ce,formatHsl:function(){return we(this).formatHsl()},formatRgb:fe,toString:fe}),Xt(be,_e,Zt(Gt,{brighter:function(t){return t=null==t?Jt:Math.pow(Jt,t),new be(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?Qt:Math.pow(Qt,t),new be(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:me,formatHex:me,formatRgb:ye,toString:ye})),Xt(Me,ke,Zt(Gt,{brighter:function(t){return t=null==t?Jt:Math.pow(Jt,t),new Me(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?Qt:Math.pow(Qt,t),new Me(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new be(Te(t>=240?t-240:t+120,i,r),Te(t,i,r),Te(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var Ae=Math.PI/180,Ne=180/Math.PI,Ce=.96422,Se=.82521,Ee=4/29,ze=6/29,De=3*ze*ze,Fe=ze*ze*ze;function Oe(t){if(t instanceof Ue)return new Ue(t.l,t.a,t.b,t.opacity);if(t instanceof $e)return Re(t);t instanceof be||(t=pe(t));var e,n,r=Pe(t.r),i=Pe(t.g),a=Pe(t.b),o=He((.2225045*r+.7168786*i+.0606169*a)/1);return r===i&&i===a?e=n=o:(e=He((.4360747*r+.3850649*i+.1430804*a)/Ce),n=He((.0139322*r+.0971045*i+.7141733*a)/Se)),new Ue(116*o-16,500*(e-o),200*(o-n),t.opacity)}function je(t,e,n,r){return 1===arguments.length?Oe(t):new Ue(t,e,n,null==r?1:r)}function Ue(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function He(t){return t>Fe?Math.pow(t,1/3):t/De+Ee}function Le(t){return t>ze?t*t*t:De*(t-Ee)}function qe(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Pe(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Ye(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof $e)return new $e(t.h,t.c,t.l,t.opacity);if(t instanceof Ue||(t=Oe(t)),0===t.a&&0===t.b)return new $e(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*Ne;return new $e(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}(t):new $e(t,e,n,null==r?1:r)}function $e(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function Re(t){if(isNaN(t.h))return new Ue(t.l,0,0,t.opacity);var e=t.h*Ae;return new Ue(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}Xt(Ue,je,Zt(Gt,{brighter:function(t){return new Ue(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Ue(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new be(qe(3.1338561*(e=Ce*Le(e))-1.6168667*(t=1*Le(t))-.4906146*(n=Se*Le(n))),qe(-.9787684*e+1.9161415*t+.033454*n),qe(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),Xt($e,Ye,Zt(Gt,{brighter:function(t){return new $e(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new $e(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Re(this).rgb()}}));var Be=-.14861,Ie=1.78277,We=-.29227,Ve=-.90649,Xe=1.97294,Ze=Xe*Ve,Ge=Xe*Ie,Qe=Ie*We-Ve*Be;function Je(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof Ke)return new Ke(t.h,t.s,t.l,t.opacity);t instanceof be||(t=pe(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(Qe*r+Ze*e-Ge*n)/(Qe+Ze-Ge),a=r-i,o=(Xe*(n-i)-We*a)/Ve,l=Math.sqrt(o*o+a*a)/(Xe*i*(1-i)),u=l?Math.atan2(o,a)*Ne-120:NaN;return new Ke(u<0?u+360:u,l,i,t.opacity)}(t):new Ke(t,e,n,null==r?1:r)}function Ke(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function tn(t){return function(){return t}}function en(t,e){return function(n){return t+n*e}}function nn(t,e){var n=e-t;return n?en(t,n>180||n<-180?n-360*Math.round(n/360):n):tn(isNaN(t)?e:t)}function rn(t){return 1==(t=+t)?an:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):tn(isNaN(e)?n:e)}}function an(t,e){var n=e-t;return n?en(t,n):tn(isNaN(t)?e:t)}Xt(Ke,Je,Zt(Gt,{brighter:function(t){return t=null==t?Jt:Math.pow(Jt,t),new Ke(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?Qt:Math.pow(Qt,t),new Ke(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Ae,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new be(255*(e+n*(Be*r+Ie*i)),255*(e+n*(We*r+Ve*i)),255*(e+n*(Xe*r)),this.opacity)}}));var on=function t(e){var n=rn(e);function r(t,e){var r=n((t=_e(t)).r,(e=_e(e)).r),i=n(t.g,e.g),a=n(t.b,e.b),o=an(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=a(e),t.opacity=o(e),t+""}}return r.gamma=t,r}(1);var ln,un=(ln=function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],a=t[r+1],o=r>0?t[r-1]:2*i-a,l=r<e-1?t[r+2]:2*a-i;return function(t,e,n,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*r+o*i)/6}((n-r/e)*e,o,i,a,l)}},function(t){var e,n,r=t.length,i=new Array(r),a=new Array(r),o=new Array(r);for(e=0;e<r;++e)n=_e(t[e]),i[e]=n.r||0,a[e]=n.g||0,o[e]=n.b||0;return i=ln(i),a=ln(a),o=ln(o),n.opacity=1,function(t){return n.r=i(t),n.g=a(t),n.b=o(t),n+""}});function sn(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(a){for(n=0;n<r;++n)i[n]=t[n]*(1-a)+e[n]*a;return i}}function cn(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=bn(t[n],e[n]);for(;n<r;++n)o[n]=e[n];return function(t){for(n=0;n<i;++n)o[n]=a[n](t);return o}}function fn(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function hn(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function dn(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=bn(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}var gn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pn=new RegExp(gn.source,"g");function _n(t,e){var n,r,i,a=gn.lastIndex=pn.lastIndex=0,o=-1,l=[],u=[];for(t+="",e+="";(n=gn.exec(t))&&(r=pn.exec(e));)(i=r.index)>a&&(i=e.slice(a,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(r=r[0])?l[o]?l[o]+=r:l[++o]=r:(l[++o]=null,u.push({i:o,x:hn(n,r)})),a=pn.lastIndex;return a<e.length&&(i=e.slice(a),l[o]?l[o]+=i:l[++o]=i),l.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)l[(n=u[r]).i]=n.x(t);return l.join("")})}function bn(t,e){var n,r=typeof e;return null==e||"boolean"===r?tn(e):("number"===r?hn:"string"===r?(n=he(e))?(e=n,on):_n:e instanceof he?on:e instanceof Date?fn:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(e)?sn:Array.isArray(e)?cn:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?dn:hn)(t,e)}function mn(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var yn,vn,xn,wn,kn=180/Math.PI,Mn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Tn(t,e,n,r,i,a){var o,l,u;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,u/=l),t*r<e*n&&(t=-t,e=-e,u=-u,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*kn,skewX:Math.atan(u)*kn,scaleX:o,scaleY:l}}function An(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(a,o){var l=[],u=[];return a=t(a),o=t(o),function(t,r,i,a,o,l){if(t!==i||r!==a){var u=o.push("translate(",null,e,null,n);l.push({i:u-4,x:hn(t,i)},{i:u-2,x:hn(r,a)})}else(i||a)&&o.push("translate("+i+e+a+n)}(a.translateX,a.translateY,o.translateX,o.translateY,l,u),function(t,e,n,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),a.push({i:n.push(i(n)+"rotate(",null,r)-2,x:hn(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(a.rotate,o.rotate,l,u),function(t,e,n,a){t!==e?a.push({i:n.push(i(n)+"skewX(",null,r)-2,x:hn(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(a.skewX,o.skewX,l,u),function(t,e,n,r,a,o){if(t!==n||e!==r){var l=a.push(i(a)+"scale(",null,",",null,")");o.push({i:l-4,x:hn(t,n)},{i:l-2,x:hn(e,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,l,u),a=o=null,function(t){for(var e,n=-1,r=u.length;++n<r;)l[(e=u[n]).i]=e.x(t);return l.join("")}}}var Nn=An((function(t){return"none"===t?Mn:(yn||(yn=document.createElement("DIV"),vn=document.documentElement,xn=document.defaultView),yn.style.transform=t,t=xn.getComputedStyle(vn.appendChild(yn),null).getPropertyValue("transform"),vn.removeChild(yn),Tn(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),Cn=An((function(t){return null==t?Mn:(wn||(wn=document.createElementNS("http://www.w3.org/2000/svg","g")),wn.setAttribute("transform",t),(t=wn.transform.baseVal.consolidate())?Tn((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Mn)}),", ",")",")");var Sn=function(t){return function(e,n){var r=t((e=ke(e)).h,(n=ke(n)).h),i=an(e.s,n.s),a=an(e.l,n.l),o=an(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=a(t),e.opacity=o(t),e+""}}}(nn);function En(t,e){var n=an((t=je(t)).l,(e=je(e)).l),r=an(t.a,e.a),i=an(t.b,e.b),a=an(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=i(e),t.opacity=a(e),t+""}}var zn=function(t){return function(e,n){var r=t((e=Ye(e)).h,(n=Ye(n)).h),i=an(e.c,n.c),a=an(e.l,n.l),o=an(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=a(t),e.opacity=o(t),e+""}}}(nn);function Dn(t){return function e(n){function r(e,r){var i=t((e=Je(e)).h,(r=Je(r)).h),a=an(e.s,r.s),o=an(e.l,r.l),l=an(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=a(t),e.l=o(Math.pow(t,n)),e.opacity=l(t),e+""}}return n=+n,r.gamma=e,r}(1)}Dn(nn);var Fn=Dn(an);function On(t,e){var n,r;return function(){var i=Wt(this,t),a=i.tween;if(a!==n)for(var o=0,l=(r=n=a).length;o<l;++o)if(r[o].name===e){(r=r.slice()).splice(o,1);break}i.tween=r}}function jn(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var a=Wt(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var l={name:e,value:n},u=0,s=i.length;u<s;++u)if(i[u].name===e){i[u]=l;break}u===s&&i.push(l)}a.tween=i}}function Un(t,e,n){var r=t._id;return t.each((function(){var t=Wt(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return Vt(t,r).value[e]}}function Hn(t,e){var n;return("number"==typeof e?hn:e instanceof he?on:(n=he(e))?(e=n,on):_n)(t,e)}function Ln(t){return function(){this.removeAttribute(t)}}function qn(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Pn(t,e,n){var r,i,a=n+"";return function(){var o=this.getAttribute(t);return o===a?null:o===r?i:i=e(r=o,n)}}function Yn(t,e,n){var r,i,a=n+"";return function(){var o=this.getAttributeNS(t.space,t.local);return o===a?null:o===r?i:i=e(r=o,n)}}function $n(t,e,n){var r,i,a;return function(){var o,l,u=n(this);if(null!=u)return(o=this.getAttribute(t))===(l=u+"")?null:o===r&&l===i?a:(i=l,a=e(r=o,u));this.removeAttribute(t)}}function Rn(t,e,n){var r,i,a;return function(){var o,l,u=n(this);if(null!=u)return(o=this.getAttributeNS(t.space,t.local))===(l=u+"")?null:o===r&&l===i?a:(i=l,a=e(r=o,u));this.removeAttributeNS(t.space,t.local)}}function Bn(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}(t,i)),n}return i._value=e,i}function In(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}(t,i)),n}return i._value=e,i}function Wn(t,e){return function(){It(this,t).delay=+e.apply(this,arguments)}}function Vn(t,e){return e=+e,function(){It(this,t).delay=e}}function Xn(t,e){return function(){Wt(this,t).duration=+e.apply(this,arguments)}}function Zn(t,e){return e=+e,function(){Wt(this,t).duration=e}}var Gn=gt.prototype.constructor;function Qn(t){return function(){this.style.removeProperty(t)}}var Jn=0;function Kn(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function tr(){return++Jn}var er=gt.prototype;Kn.prototype={constructor:Kn,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=g(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var l,u,s=r[o],c=s.length,f=a[o]=new Array(c),h=0;h<c;++h)(l=s[h])&&(u=t.call(l,l.__data__,h,s))&&("__data__"in l&&(u.__data__=l.__data__),f[h]=u,Bt(f[h],e,n,h,f,Vt(l,n)));return new Kn(a,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=_(t));for(var r=this._groups,i=r.length,a=[],o=[],l=0;l<i;++l)for(var u,s=r[l],c=s.length,f=0;f<c;++f)if(u=s[f]){for(var h,d=t.call(u,u.__data__,f,s),g=Vt(u,n),p=0,b=d.length;p<b;++p)(h=d[p])&&Bt(h,e,n,p,d,g);a.push(d),o.push(u)}return new Kn(a,o,e,n)},filter:function(t){"function"!=typeof t&&(t=b(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o=e[i],l=o.length,u=r[i]=[],s=0;s<l;++s)(a=o[s])&&t.call(a,a.__data__,s,o)&&u.push(a);return new Kn(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),l=0;l<a;++l)for(var u,s=e[l],c=n[l],f=s.length,h=o[l]=new Array(f),d=0;d<f;++d)(u=s[d]||c[d])&&(h[d]=u);for(;l<r;++l)o[l]=e[l];return new Kn(o,this._parents,this._name,this._id)},selection:function(){return new Gn(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=tr(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o,l=r[a],u=l.length,s=0;s<u;++s)if(o=l[s]){var c=Vt(o,e);Bt(o,t,n,s,l,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Kn(r,this._parents,t,n)},call:er.call,nodes:er.nodes,node:er.node,size:er.size,empty:er.empty,each:er.each,on:function(t,e){var n=this._id;return arguments.length<2?Vt(this.node(),n).on.on(t):this.each(function(t,e,n){var r,i,a=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?It:Wt;return function(){var o=a(this,t),l=o.on;l!==r&&(i=(r=l).copy()).on(e,n),o.on=i}}(n,t,e))},attr:function(t,e){var n=s(t),r="transform"===n?Cn:Hn;return this.attrTween(t,"function"==typeof e?(n.local?Rn:$n)(n,r,Un(this,"attr."+t,e)):null==e?(n.local?qn:Ln)(n):(n.local?Yn:Pn)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=s(t);return this.tween(n,(r.local?Bn:In)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?Nn:Hn;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var a=F(this,t),o=(this.style.removeProperty(t),F(this,t));return a===o?null:a===n&&o===r?i:i=e(n=a,r=o)}}(t,r)).on("end.style."+t,Qn(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,a;return function(){var o=F(this,t),l=n(this),u=l+"";return null==l&&(this.style.removeProperty(t),u=l=F(this,t)),o===u?null:o===r&&u===i?a:(i=u,a=e(r=o,l))}}(t,r,Un(this,"style."+t,e))).each(function(t,e){var n,r,i,a,o="style."+e,l="end."+o;return function(){var u=Wt(this,t),s=u.on,c=null==u.value[o]?a||(a=Qn(e)):void 0;s===n&&i===c||(r=(n=s).copy()).on(l,i=c),u.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,a=n+"";return function(){var o=F(this,t);return o===a?null:o===r?i:i=e(r=o,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,function(t,e,n){var r,i;function a(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&function(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}(t,a,n)),r}return a._value=e,a}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(Un(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&function(t){return function(e){this.textContent=t.call(this,e)}}(r)),e}return r._value=t,r}(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=Vt(this.node(),n).tween,a=0,o=i.length;a<o;++a)if((r=i[a]).name===t)return r.value;return null}return this.each((null==e?On:jn)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Wn:Vn)(e,t)):Vt(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Xn:Zn)(e,t)):Vt(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){Wt(this,t).ease=e}}(e,t)):Vt(this.node(),e).ease},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(a,o){var l={value:o},u={value:function(){0==--i&&a()}};n.each((function(){var n=Wt(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(l),e._.interrupt.push(l),e._.end.push(u)),n.on=e}))}))}};var nr={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function rr(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return nr.time=Ft(),nr;return n}gt.prototype.interrupt=function(t){return this.each((function(){!function(t,e){var n,r,i,a=t.__transition,o=!0;if(a){for(i in e=null==e?null:e+"",a)(n=a[i]).name===e?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete a[i]):o=!1;o&&delete t.__transition}}(this,t)}))},gt.prototype.transition=function(t){var e,n;t instanceof Kn?(e=t._id,t=t._name):(e=tr(),(n=nr).time=Ft(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o,l=r[a],u=l.length,s=0;s<u;++s)(o=l[s])&&Bt(o,t,e,s,l,n||rr(o,e));return new Kn(r,this._parents,t,e)};var ir=Math.PI,ar=2*ir,or=1e-6,lr=ar-or;function ur(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function sr(){return new ur}function cr(t){return function(){return t}}ur.prototype=sr.prototype={constructor:ur,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var a=this._x1,o=this._y1,l=n-t,u=r-e,s=a-t,c=o-e,f=s*s+c*c;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>or)if(Math.abs(c*l-u*s)>or&&i){var h=n-a,d=r-o,g=l*l+u*u,p=h*h+d*d,_=Math.sqrt(g),b=Math.sqrt(f),m=i*Math.tan((ir-Math.acos((g+f-p)/(2*_*b)))/2),y=m/b,v=m/_;Math.abs(y-1)>or&&(this._+="L"+(t+y*s)+","+(e+y*c)),this._+="A"+i+","+i+",0,0,"+ +(c*h>s*d)+","+(this._x1=t+v*l)+","+(this._y1=e+v*u)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,i,a){t=+t,e=+e,a=!!a;var o=(n=+n)*Math.cos(r),l=n*Math.sin(r),u=t+o,s=e+l,c=1^a,f=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+s:(Math.abs(this._x1-u)>or||Math.abs(this._y1-s)>or)&&(this._+="L"+u+","+s),n&&(f<0&&(f=f%ar+ar),f>lr?this._+="A"+n+","+n+",0,1,"+c+","+(t-o)+","+(e-l)+"A"+n+","+n+",0,1,"+c+","+(this._x1=u)+","+(this._y1=s):f>or&&(this._+="A"+n+","+n+",0,"+ +(f>=ir)+","+c+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var fr=Math.abs,hr=Math.atan2,dr=Math.cos,gr=Math.max,pr=Math.min,_r=Math.sin,br=Math.sqrt,mr=1e-12,yr=Math.PI,vr=yr/2,xr=2*yr;function wr(t){return t>=1?vr:t<=-1?-vr:Math.asin(t)}function kr(t){return t.innerRadius}function Mr(t){return t.outerRadius}function Tr(t){return t.startAngle}function Ar(t){return t.endAngle}function Nr(t){return t&&t.padAngle}function Cr(t,e,n,r,i,a,o){var l=t-n,u=e-r,s=(o?a:-a)/br(l*l+u*u),c=s*u,f=-s*l,h=t+c,d=e+f,g=n+c,p=r+f,_=(h+g)/2,b=(d+p)/2,m=g-h,y=p-d,v=m*m+y*y,x=i-a,w=h*p-g*d,k=(y<0?-1:1)*br(gr(0,x*x*v-w*w)),M=(w*y-m*k)/v,T=(-w*m-y*k)/v,A=(w*y+m*k)/v,N=(-w*m+y*k)/v,C=M-_,S=T-b,E=A-_,z=N-b;return C*C+S*S>E*E+z*z&&(M=A,T=N),{cx:M,cy:T,x01:-c,y01:-f,x11:M*(i/x-1),y11:T*(i/x-1)}}function Sr(t){this._context=t}function Er(t){return new Sr(t)}function zr(t){return t[0]}function Dr(t){return t[1]}function Fr(){var t=zr,e=Dr,n=cr(!0),r=null,i=Er,a=null;function o(o){var l,u,s,c=o.length,f=!1;for(null==r&&(a=i(s=sr())),l=0;l<=c;++l)!(l<c&&n(u=o[l],l,o))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+t(u,l,o),+e(u,l,o));if(s)return a=null,s+""||null}return o.x=function(e){return arguments.length?(t="function"==typeof e?e:cr(+e),o):t},o.y=function(t){return arguments.length?(e="function"==typeof t?t:cr(+t),o):e},o.defined=function(t){return arguments.length?(n="function"==typeof t?t:cr(!!t),o):n},o.curve=function(t){return arguments.length?(i=t,null!=r&&(a=i(r)),o):i},o.context=function(t){return arguments.length?(null==t?r=a=null:a=i(r=t),o):r},o}function Or(){var t=zr,e=null,n=cr(0),r=Dr,i=cr(!0),a=null,o=Er,l=null;function u(u){var s,c,f,h,d,g=u.length,p=!1,_=new Array(g),b=new Array(g);for(null==a&&(l=o(d=sr())),s=0;s<=g;++s){if(!(s<g&&i(h=u[s],s,u))===p)if(p=!p)c=s,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),f=s-1;f>=c;--f)l.point(_[f],b[f]);l.lineEnd(),l.areaEnd()}p&&(_[s]=+t(h,s,u),b[s]=+n(h,s,u),l.point(e?+e(h,s,u):_[s],r?+r(h,s,u):b[s]))}if(d)return l=null,d+""||null}function s(){return Fr().defined(i).curve(o).context(a)}return u.x=function(n){return arguments.length?(t="function"==typeof n?n:cr(+n),e=null,u):t},u.x0=function(e){return arguments.length?(t="function"==typeof e?e:cr(+e),u):t},u.x1=function(t){return arguments.length?(e=null==t?null:"function"==typeof t?t:cr(+t),u):e},u.y=function(t){return arguments.length?(n="function"==typeof t?t:cr(+t),r=null,u):n},u.y0=function(t){return arguments.length?(n="function"==typeof t?t:cr(+t),u):n},u.y1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:cr(+t),u):r},u.lineX0=u.lineY0=function(){return s().x(t).y(n)},u.lineY1=function(){return s().x(t).y(r)},u.lineX1=function(){return s().x(e).y(n)},u.defined=function(t){return arguments.length?(i="function"==typeof t?t:cr(!!t),u):i},u.curve=function(t){return arguments.length?(o=t,null!=a&&(l=o(a)),u):o},u.context=function(t){return arguments.length?(null==t?a=l=null:l=o(a=t),u):a},u}function jr(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function Ur(t){return t}Sr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var Hr=qr(Er);function Lr(t){this._curve=t}function qr(t){function e(e){return new Lr(t(e))}return e._curve=t,e}function Pr(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(qr(t)):e()._curve},t}function Yr(){return Pr(Fr().curve(Hr))}function $r(){var t=Or().curve(Hr),e=t.curve,n=t.lineX0,r=t.lineX1,i=t.lineY0,a=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return Pr(n())},delete t.lineX0,t.lineEndAngle=function(){return Pr(r())},delete t.lineX1,t.lineInnerRadius=function(){return Pr(i())},delete t.lineY0,t.lineOuterRadius=function(){return Pr(a())},delete t.lineY1,t.curve=function(t){return arguments.length?e(qr(t)):e()._curve},t}function Rr(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]}Lr.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};var Br=Array.prototype.slice;function Ir(t){return t.source}function Wr(t){return t.target}function Vr(t){var e=Ir,n=Wr,r=zr,i=Dr,a=null;function o(){var o,l=Br.call(arguments),u=e.apply(this,l),s=n.apply(this,l);if(a||(a=o=sr()),t(a,+r.apply(this,(l[0]=u,l)),+i.apply(this,l),+r.apply(this,(l[0]=s,l)),+i.apply(this,l)),o)return a=null,o+""||null}return o.source=function(t){return arguments.length?(e=t,o):e},o.target=function(t){return arguments.length?(n=t,o):n},o.x=function(t){return arguments.length?(r="function"==typeof t?t:cr(+t),o):r},o.y=function(t){return arguments.length?(i="function"==typeof t?t:cr(+t),o):i},o.context=function(t){return arguments.length?(a=null==t?null:t,o):a},o}function Xr(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e=(e+r)/2,n,e,i,r,i)}function Zr(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e,n=(n+i)/2,r,n,r,i)}function Gr(t,e,n,r,i){var a=Rr(e,n),o=Rr(e,n=(n+i)/2),l=Rr(r,n),u=Rr(r,i);t.moveTo(a[0],a[1]),t.bezierCurveTo(o[0],o[1],l[0],l[1],u[0],u[1])}var Qr={draw:function(t,e){var n=Math.sqrt(e/yr);t.moveTo(n,0),t.arc(0,0,n,0,xr)}},Jr={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},Kr=Math.sqrt(1/3),ti=2*Kr,ei={draw:function(t,e){var n=Math.sqrt(e/ti),r=n*Kr;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},ni=Math.sin(yr/10)/Math.sin(7*yr/10),ri=Math.sin(xr/10)*ni,ii=-Math.cos(xr/10)*ni,ai={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),r=ri*n,i=ii*n;t.moveTo(0,-n),t.lineTo(r,i);for(var a=1;a<5;++a){var o=xr*a/5,l=Math.cos(o),u=Math.sin(o);t.lineTo(u*n,-l*n),t.lineTo(l*r-u*i,u*r+l*i)}t.closePath()}},oi={draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},li=Math.sqrt(3),ui={draw:function(t,e){var n=-Math.sqrt(e/(3*li));t.moveTo(0,2*n),t.lineTo(-li*n,-n),t.lineTo(li*n,-n),t.closePath()}},si=-.5,ci=Math.sqrt(3)/2,fi=1/Math.sqrt(12),hi=3*(fi/2+1),di={draw:function(t,e){var n=Math.sqrt(e/hi),r=n/2,i=n*fi,a=r,o=n*fi+n,l=-a,u=o;t.moveTo(r,i),t.lineTo(a,o),t.lineTo(l,u),t.lineTo(si*r-ci*i,ci*r+si*i),t.lineTo(si*a-ci*o,ci*a+si*o),t.lineTo(si*l-ci*u,ci*l+si*u),t.lineTo(si*r+ci*i,si*i-ci*r),t.lineTo(si*a+ci*o,si*o-ci*a),t.lineTo(si*l+ci*u,si*u-ci*l),t.closePath()}},gi=[Qr,Jr,ei,oi,ai,ui,di];function pi(){}function _i(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function bi(t){this._context=t}function mi(t){this._context=t}function yi(t){this._context=t}function vi(t,e){this._basis=new bi(t),this._beta=e}bi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:_i(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:_i(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},mi.prototype={areaStart:pi,areaEnd:pi,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:_i(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},yi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:_i(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},vi.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],a=e[0],o=t[n]-i,l=e[n]-a,u=-1;++u<=n;)r=u/n,this._basis.point(this._beta*t[u]+(1-this._beta)*(i+r*o),this._beta*e[u]+(1-this._beta)*(a+r*l));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var xi=function t(e){function n(t){return 1===e?new bi(t):new vi(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function wi(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function ki(t,e){this._context=t,this._k=(1-e)/6}ki.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:wi(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:wi(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Mi=function t(e){function n(t){return new ki(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Ti(t,e){this._context=t,this._k=(1-e)/6}Ti.prototype={areaStart:pi,areaEnd:pi,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:wi(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Ai=function t(e){function n(t){return new Ti(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Ni(t,e){this._context=t,this._k=(1-e)/6}Ni.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:wi(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Ci=function t(e){function n(t){return new Ni(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Si(t,e,n){var r=t._x1,i=t._y1,a=t._x2,o=t._y2;if(t._l01_a>mr){var l=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*l-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*l-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>mr){var s=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*s+t._x1*t._l23_2a-e*t._l12_2a)/c,o=(o*s+t._y1*t._l23_2a-n*t._l12_2a)/c}t._context.bezierCurveTo(r,i,a,o,t._x2,t._y2)}function Ei(t,e){this._context=t,this._alpha=e}Ei.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Si(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var zi=function t(e){function n(t){return e?new Ei(t,e):new ki(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Di(t,e){this._context=t,this._alpha=e}Di.prototype={areaStart:pi,areaEnd:pi,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Si(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Fi=function t(e){function n(t){return e?new Di(t,e):new Ti(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Oi(t,e){this._context=t,this._alpha=e}Oi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Si(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var ji=function t(e){function n(t){return e?new Oi(t,e):new Ni(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Ui(t){this._context=t}function Hi(t){return t<0?-1:1}function Li(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),l=(a*i+o*r)/(r+i);return(Hi(a)+Hi(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(l))||0}function qi(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Pi(t,e,n){var r=t._x0,i=t._y0,a=t._x1,o=t._y1,l=(a-r)/3;t._context.bezierCurveTo(r+l,i+l*e,a-l,o-l*n,a,o)}function Yi(t){this._context=t}function $i(t){this._context=new Ri(t)}function Ri(t){this._context=t}function Bi(t){this._context=t}function Ii(t){var e,n,r=t.length-1,i=new Array(r),a=new Array(r),o=new Array(r);for(i[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/a[e-1],a[e]-=n,o[e]-=n*o[e-1];for(i[r-1]=o[r-1]/a[r-1],e=r-2;e>=0;--e)i[e]=(o[e]-i[e+1])/a[e];for(a[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function Wi(t,e){this._context=t,this._t=e}function Vi(t,e){if((i=t.length)>1)for(var n,r,i,a=1,o=t[e[0]],l=o.length;a<i;++a)for(r=o,o=t[e[a]],n=0;n<l;++n)o[n][1]+=o[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}function Xi(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Zi(t,e){return t[e]}function Gi(t){var e=t.map(Qi);return Xi(t).sort((function(t,n){return e[t]-e[n]}))}function Qi(t){for(var e,n=-1,r=0,i=t.length,a=-1/0;++n<i;)(e=+t[n][1])>a&&(a=e,r=n);return r}function Ji(t){var e=t.map(Ki);return Xi(t).sort((function(t,n){return e[t]-e[n]}))}function Ki(t){for(var e,n=0,r=-1,i=t.length;++r<i;)(e=+t[r][1])&&(n+=e);return n}Ui.prototype={areaStart:pi,areaEnd:pi,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},Yi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Pi(this,this._t0,qi(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Pi(this,qi(this,n=Li(this,t,e)),n);break;default:Pi(this,this._t0,n=Li(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},($i.prototype=Object.create(Yi.prototype)).point=function(t,e){Yi.prototype.point.call(this,e,t)},Ri.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}},Bi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=Ii(t),i=Ii(e),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[o],e[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},Wi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var ta=Object.freeze({__proto__:null,arc:function(){var t=kr,e=Mr,n=cr(0),r=null,i=Tr,a=Ar,o=Nr,l=null;function u(){var u,s,c=+t.apply(this,arguments),f=+e.apply(this,arguments),h=i.apply(this,arguments)-vr,d=a.apply(this,arguments)-vr,g=fr(d-h),p=d>h;if(l||(l=u=sr()),f<c&&(s=f,f=c,c=s),f>mr)if(g>xr-mr)l.moveTo(f*dr(h),f*_r(h)),l.arc(0,0,f,h,d,!p),c>mr&&(l.moveTo(c*dr(d),c*_r(d)),l.arc(0,0,c,d,h,p));else{var _,b,m=h,y=d,v=h,x=d,w=g,k=g,M=o.apply(this,arguments)/2,T=M>mr&&(r?+r.apply(this,arguments):br(c*c+f*f)),A=pr(fr(f-c)/2,+n.apply(this,arguments)),N=A,C=A;if(T>mr){var S=wr(T/c*_r(M)),E=wr(T/f*_r(M));(w-=2*S)>mr?(v+=S*=p?1:-1,x-=S):(w=0,v=x=(h+d)/2),(k-=2*E)>mr?(m+=E*=p?1:-1,y-=E):(k=0,m=y=(h+d)/2)}var z=f*dr(m),D=f*_r(m),F=c*dr(x),O=c*_r(x);if(A>mr){var j,U=f*dr(y),H=f*_r(y),L=c*dr(v),q=c*_r(v);if(g<yr&&(j=function(t,e,n,r,i,a,o,l){var u=n-t,s=r-e,c=o-i,f=l-a,h=f*u-c*s;if(!(h*h<mr))return[t+(h=(c*(e-a)-f*(t-i))/h)*u,e+h*s]}(z,D,L,q,U,H,F,O))){var P=z-j[0],Y=D-j[1],$=U-j[0],R=H-j[1],B=1/_r(function(t){return t>1?0:t<-1?yr:Math.acos(t)}((P*$+Y*R)/(br(P*P+Y*Y)*br($*$+R*R)))/2),I=br(j[0]*j[0]+j[1]*j[1]);N=pr(A,(c-I)/(B-1)),C=pr(A,(f-I)/(B+1))}}k>mr?C>mr?(_=Cr(L,q,z,D,f,C,p),b=Cr(U,H,F,O,f,C,p),l.moveTo(_.cx+_.x01,_.cy+_.y01),C<A?l.arc(_.cx,_.cy,C,hr(_.y01,_.x01),hr(b.y01,b.x01),!p):(l.arc(_.cx,_.cy,C,hr(_.y01,_.x01),hr(_.y11,_.x11),!p),l.arc(0,0,f,hr(_.cy+_.y11,_.cx+_.x11),hr(b.cy+b.y11,b.cx+b.x11),!p),l.arc(b.cx,b.cy,C,hr(b.y11,b.x11),hr(b.y01,b.x01),!p))):(l.moveTo(z,D),l.arc(0,0,f,m,y,!p)):l.moveTo(z,D),c>mr&&w>mr?N>mr?(_=Cr(F,O,U,H,c,-N,p),b=Cr(z,D,L,q,c,-N,p),l.lineTo(_.cx+_.x01,_.cy+_.y01),N<A?l.arc(_.cx,_.cy,N,hr(_.y01,_.x01),hr(b.y01,b.x01),!p):(l.arc(_.cx,_.cy,N,hr(_.y01,_.x01),hr(_.y11,_.x11),!p),l.arc(0,0,c,hr(_.cy+_.y11,_.cx+_.x11),hr(b.cy+b.y11,b.cx+b.x11),p),l.arc(b.cx,b.cy,N,hr(b.y11,b.x11),hr(b.y01,b.x01),!p))):l.arc(0,0,c,x,v,p):l.lineTo(F,O)}else l.moveTo(0,0);if(l.closePath(),u)return l=null,u+""||null}return u.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-yr/2;return[dr(r)*n,_r(r)*n]},u.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:cr(+e),u):t},u.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:cr(+t),u):e},u.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:cr(+t),u):n},u.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:cr(+t),u):r},u.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:cr(+t),u):i},u.endAngle=function(t){return arguments.length?(a="function"==typeof t?t:cr(+t),u):a},u.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:cr(+t),u):o},u.context=function(t){return arguments.length?(l=null==t?null:t,u):l},u},area:Or,areaRadial:$r,curveBasis:function(t){return new bi(t)},curveBasisClosed:function(t){return new mi(t)},curveBasisOpen:function(t){return new yi(t)},curveBundle:xi,curveCardinal:Mi,curveCardinalClosed:Ai,curveCardinalOpen:Ci,curveCatmullRom:zi,curveCatmullRomClosed:Fi,curveCatmullRomOpen:ji,curveLinear:Er,curveLinearClosed:function(t){return new Ui(t)},curveMonotoneX:function(t){return new Yi(t)},curveMonotoneY:function(t){return new $i(t)},curveNatural:function(t){return new Bi(t)},curveStep:function(t){return new Wi(t,.5)},curveStepAfter:function(t){return new Wi(t,1)},curveStepBefore:function(t){return new Wi(t,0)},line:Fr,lineRadial:Yr,linkHorizontal:function(){return Vr(Xr)},linkRadial:function(){var t=Vr(Gr);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t},linkVertical:function(){return Vr(Zr)},pie:function(){var t=Ur,e=jr,n=null,r=cr(0),i=cr(xr),a=cr(0);function o(o){var l,u,s,c,f,h=o.length,d=0,g=new Array(h),p=new Array(h),_=+r.apply(this,arguments),b=Math.min(xr,Math.max(-xr,i.apply(this,arguments)-_)),m=Math.min(Math.abs(b)/h,a.apply(this,arguments)),y=m*(b<0?-1:1);for(l=0;l<h;++l)(f=p[g[l]=l]=+t(o[l],l,o))>0&&(d+=f);for(null!=e?g.sort((function(t,n){return e(p[t],p[n])})):null!=n&&g.sort((function(t,e){return n(o[t],o[e])})),l=0,s=d?(b-h*y)/d:0;l<h;++l,_=c)u=g[l],c=_+((f=p[u])>0?f*s:0)+y,p[u]={data:o[u],index:l,value:f,startAngle:_,endAngle:c,padAngle:m};return p}return o.value=function(e){return arguments.length?(t="function"==typeof e?e:cr(+e),o):t},o.sortValues=function(t){return arguments.length?(e=t,n=null,o):e},o.sort=function(t){return arguments.length?(n=t,e=null,o):n},o.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:cr(+t),o):r},o.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:cr(+t),o):i},o.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:cr(+t),o):a},o},pointRadial:Rr,radialArea:$r,radialLine:Yr,stack:function(){var t=cr([]),e=Xi,n=Vi,r=Zi;function i(i){var a,o,l=t.apply(this,arguments),u=i.length,s=l.length,c=new Array(s);for(a=0;a<s;++a){for(var f,h=l[a],d=c[a]=new Array(u),g=0;g<u;++g)d[g]=f=[0,+r(i[g],h,g,i)],f.data=i[g];d.key=h}for(a=0,o=e(c);a<s;++a)c[o[a]].index=a;return n(c,o),c}return i.keys=function(e){return arguments.length?(t="function"==typeof e?e:cr(Br.call(e)),i):t},i.value=function(t){return arguments.length?(r="function"==typeof t?t:cr(+t),i):r},i.order=function(t){return arguments.length?(e=null==t?Xi:"function"==typeof t?t:cr(Br.call(t)),i):e},i.offset=function(t){return arguments.length?(n=null==t?Vi:t,i):n},i},stackOffsetDiverging:function(t,e){if((l=t.length)>0)for(var n,r,i,a,o,l,u=0,s=t[e[0]].length;u<s;++u)for(a=o=0,n=0;n<l;++n)(i=(r=t[e[n]][u])[1]-r[0])>0?(r[0]=a,r[1]=a+=i):i<0?(r[1]=o,r[0]=o+=i):(r[0]=0,r[1]=i)},stackOffsetExpand:function(t,e){if((r=t.length)>0){for(var n,r,i,a=0,o=t[0].length;a<o;++a){for(i=n=0;n<r;++n)i+=t[n][a][1]||0;if(i)for(n=0;n<r;++n)t[n][a][1]/=i}Vi(t,e)}},stackOffsetNone:Vi,stackOffsetSilhouette:function(t,e){if((n=t.length)>0){for(var n,r=0,i=t[e[0]],a=i.length;r<a;++r){for(var o=0,l=0;o<n;++o)l+=t[o][r][1]||0;i[r][1]+=i[r][0]=-l/2}Vi(t,e)}},stackOffsetWiggle:function(t,e){if((i=t.length)>0&&(r=(n=t[e[0]]).length)>0){for(var n,r,i,a=0,o=1;o<r;++o){for(var l=0,u=0,s=0;l<i;++l){for(var c=t[e[l]],f=c[o][1]||0,h=(f-(c[o-1][1]||0))/2,d=0;d<l;++d){var g=t[e[d]];h+=(g[o][1]||0)-(g[o-1][1]||0)}u+=f,s+=h*f}n[o-1][1]+=n[o-1][0]=a,u&&(a-=s/u)}n[o-1][1]+=n[o-1][0]=a,Vi(t,e)}},stackOrderAppearance:Gi,stackOrderAscending:Ji,stackOrderDescending:function(t){return Ji(t).reverse()},stackOrderInsideOut:function(t){var e,n,r=t.length,i=t.map(Ki),a=Gi(t),o=0,l=0,u=[],s=[];for(e=0;e<r;++e)n=a[e],o<l?(o+=i[n],u.push(n)):(l+=i[n],s.push(n));return s.reverse().concat(u)},stackOrderNone:Xi,stackOrderReverse:function(t){return Xi(t).reverse()},symbol:function(){var t=cr(Qr),e=cr(64),n=null;function r(){var r;if(n||(n=r=sr()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),r)return n=null,r+""||null}return r.type=function(e){return arguments.length?(t="function"==typeof e?e:cr(e),r):t},r.size=function(t){return arguments.length?(e="function"==typeof t?t:cr(+t),r):e},r.context=function(t){return arguments.length?(n=null==t?null:t,r):n},r},symbolCircle:Qr,symbolCross:Jr,symbolDiamond:ei,symbolSquare:oi,symbolStar:ai,symbolTriangle:ui,symbolWye:di,symbols:gi});function ea(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var na,ra,ia=(1===(na=ea).length&&(ra=na,na=function(t,e){return ea(ra(t),e)}),{left:function(t,e,n,r){for(null==n&&(n=0),null==r&&(r=t.length);n<r;){var i=n+r>>>1;na(t[i],e)<0?n=i+1:r=i}return n},right:function(t,e,n,r){for(null==n&&(n=0),null==r&&(r=t.length);n<r;){var i=n+r>>>1;na(t[i],e)>0?r=i:n=i+1}return n}}),aa=ia.right;function oa(t){return null===t?NaN:+t}function la(t,e){for(var n,r,i,a=t.length,o=-1;++o<a;)if(null!=(n=t[o])&&n>=n)for(r=i=n;++o<a;)null!=(n=t[o])&&(r>n&&(r=n),i<n&&(i=n));return[r,i]}function ua(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(i);++r<i;)a[r]=t+r*n;return a}var sa=Math.sqrt(50),ca=Math.sqrt(10),fa=Math.sqrt(2);function ha(t,e,n){var r,i,a,o,l=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(o=da(t,e,n))||!isFinite(o))return[];if(o>0)for(t=Math.ceil(t/o),e=Math.floor(e/o),a=new Array(i=Math.ceil(e-t+1));++l<i;)a[l]=(t+l)*o;else for(t=Math.floor(t*o),e=Math.ceil(e*o),a=new Array(i=Math.ceil(t-e+1));++l<i;)a[l]=(t-l)/o;return r&&a.reverse(),a}function da(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=sa?10:a>=ca?5:a>=fa?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=sa?10:a>=ca?5:a>=fa?2:1)}function ga(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=sa?i*=10:a>=ca?i*=5:a>=fa&&(i*=2),e<t?-i:i}function pa(t,e,n){if(null==n&&(n=oa),r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),o=+n(t[a],a,t);return o+(+n(t[a+1],a+1,t)-o)*(i-a)}}function _a(t,e){var n,r,i=t.length,a=-1;if(null==e){for(;++a<i;)if(null!=(n=t[a])&&n>=n)for(r=n;++a<i;)null!=(n=t[a])&&n>r&&(r=n)}else for(;++a<i;)if(null!=(n=e(t[a],a,t))&&n>=n)for(r=n;++a<i;)null!=(n=e(t[a],a,t))&&n>r&&(r=n);return r}function ba(t,e){var n,r,i=t.length,a=-1;if(null==e){for(;++a<i;)if(null!=(n=t[a])&&n>=n)for(r=n;++a<i;)null!=(n=t[a])&&r>n&&(r=n)}else for(;++a<i;)if(null!=(n=e(t[a],a,t))&&n>=n)for(r=n;++a<i;)null!=(n=e(t[a],a,t))&&r>n&&(r=n);return r}var ma="$";function ya(){}function va(t,e){var n=new ya;if(t instanceof ya)t.each((function(t,e){n.set(e,t)}));else if(Array.isArray(t)){var r,i=-1,a=t.length;if(null==e)for(;++i<a;)n.set(i,t[i]);else for(;++i<a;)n.set(e(r=t[i],i,t),r)}else if(t)for(var o in t)n.set(o,t[o]);return n}function xa(){}ya.prototype=va.prototype={constructor:ya,has:function(t){return ma+t in this},get:function(t){return this[ma+t]},set:function(t,e){return this[ma+t]=e,this},remove:function(t){var e=ma+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===ma&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===ma&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===ma&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===ma&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===ma&&++t;return t},empty:function(){for(var t in this)if(t[0]===ma)return!1;return!0},each:function(t){for(var e in this)e[0]===ma&&t(this[e],e.slice(1),this)}};var wa=va.prototype;function ka(t,e){var n=new xa;if(t instanceof xa)t.each((function(t){n.add(t)}));else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}xa.prototype=ka.prototype={constructor:xa,has:wa.has,add:function(t){return this[ma+(t+="")]=t,this},remove:wa.remove,clear:wa.clear,values:wa.keys,size:wa.size,empty:wa.empty,each:wa.each};var Ma=new Date,Ta=new Date;function Aa(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=function(e){return t(e=new Date(+e)),e},i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,a){var o,l=[];if(n=i.ceil(n),a=null==a?1:Math.floor(a),!(n<r&&a>0))return l;do{l.push(o=new Date(+n)),e(n,a),t(n)}while(o<n&&n<r);return l},i.filter=function(n){return Aa((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););}))},n&&(i.count=function(e,r){return Ma.setTime(+e),Ta.setTime(+r),t(Ma),t(Ta),Math.floor(n(Ma,Ta))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}var Na=Aa((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));Na.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Aa((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):Na:null},Na.range;var Ca=6e4,Sa=36e5,Ea=864e5,za=6048e5,Da=Aa((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+1e3*e)}),(function(t,e){return(e-t)/1e3}),(function(t){return t.getUTCSeconds()}));Da.range;var Fa=Aa((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ca)/Ea}),(function(t){return t.getDate()-1}));function Oa(t){return Aa((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ca)/za}))}Fa.range;var ja=Oa(0),Ua=Oa(1),Ha=Oa(2),La=Oa(3),qa=Oa(4),Pa=Oa(5),Ya=Oa(6);ja.range,Ua.range,Ha.range,La.range,qa.range,Pa.range,Ya.range;var $a=Aa((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));$a.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Aa((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null},$a.range;var Ra=Aa((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+e*Ca)}),(function(t,e){return(e-t)/Ca}),(function(t){return t.getUTCMinutes()}));Ra.range;var Ba=Aa((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+e*Sa)}),(function(t,e){return(e-t)/Sa}),(function(t){return t.getUTCHours()}));Ba.range;var Ia=Aa((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/Ea}),(function(t){return t.getUTCDate()-1}));function Wa(t){return Aa((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/za}))}Ia.range;var Va=Wa(0),Xa=Wa(1),Za=Wa(2),Ga=Wa(3),Qa=Wa(4),Ja=Wa(5),Ka=Wa(6);Va.range,Xa.range,Za.range,Ga.range,Qa.range,Ja.range,Ka.range;var to=Aa((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()}));to.range;var eo=Aa((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));function no(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function ro(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function io(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}eo.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Aa((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null},eo.range;var ao,oo,lo,uo,so,co={"-":"",_:" ",0:"0"},fo=/^\s*\d+/,ho=/^%/,go=/[\\^$*+?|[\]().{}]/g;function po(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function _o(t){return t.replace(go,"\\$&")}function bo(t){return new RegExp("^(?:"+t.map(_o).join("|")+")","i")}function mo(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function yo(t,e,n){var r=fo.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function vo(t,e,n){var r=fo.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function xo(t,e,n){var r=fo.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function wo(t,e,n){var r=fo.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function ko(t,e,n){var r=fo.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Mo(t,e,n){var r=fo.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function To(t,e,n){var r=fo.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Ao(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function No(t,e,n){var r=fo.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function Co(t,e,n){var r=fo.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function So(t,e,n){var r=fo.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Eo(t,e,n){var r=fo.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function zo(t,e,n){var r=fo.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Do(t,e,n){var r=fo.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Fo(t,e,n){var r=fo.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Oo(t,e,n){var r=fo.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function jo(t,e,n){var r=fo.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Uo(t,e,n){var r=ho.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Ho(t,e,n){var r=fo.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Lo(t,e,n){var r=fo.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function qo(t,e){return po(t.getDate(),e,2)}function Po(t,e){return po(t.getHours(),e,2)}function Yo(t,e){return po(t.getHours()%12||12,e,2)}function $o(t,e){return po(1+Fa.count($a(t),t),e,3)}function Ro(t,e){return po(t.getMilliseconds(),e,3)}function Bo(t,e){return Ro(t,e)+"000"}function Io(t,e){return po(t.getMonth()+1,e,2)}function Wo(t,e){return po(t.getMinutes(),e,2)}function Vo(t,e){return po(t.getSeconds(),e,2)}function Xo(t){var e=t.getDay();return 0===e?7:e}function Zo(t,e){return po(ja.count($a(t)-1,t),e,2)}function Go(t){var e=t.getDay();return e>=4||0===e?qa(t):qa.ceil(t)}function Qo(t,e){return t=Go(t),po(qa.count($a(t),t)+(4===$a(t).getDay()),e,2)}function Jo(t){return t.getDay()}function Ko(t,e){return po(Ua.count($a(t)-1,t),e,2)}function tl(t,e){return po(t.getFullYear()%100,e,2)}function el(t,e){return po((t=Go(t)).getFullYear()%100,e,2)}function nl(t,e){return po(t.getFullYear()%1e4,e,4)}function rl(t,e){var n=t.getDay();return po((t=n>=4||0===n?qa(t):qa.ceil(t)).getFullYear()%1e4,e,4)}function il(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+po(e/60|0,"0",2)+po(e%60,"0",2)}function al(t,e){return po(t.getUTCDate(),e,2)}function ol(t,e){return po(t.getUTCHours(),e,2)}function ll(t,e){return po(t.getUTCHours()%12||12,e,2)}function ul(t,e){return po(1+Ia.count(eo(t),t),e,3)}function sl(t,e){return po(t.getUTCMilliseconds(),e,3)}function cl(t,e){return sl(t,e)+"000"}function fl(t,e){return po(t.getUTCMonth()+1,e,2)}function hl(t,e){return po(t.getUTCMinutes(),e,2)}function dl(t,e){return po(t.getUTCSeconds(),e,2)}function gl(t){var e=t.getUTCDay();return 0===e?7:e}function pl(t,e){return po(Va.count(eo(t)-1,t),e,2)}function _l(t){var e=t.getUTCDay();return e>=4||0===e?Qa(t):Qa.ceil(t)}function bl(t,e){return t=_l(t),po(Qa.count(eo(t),t)+(4===eo(t).getUTCDay()),e,2)}function ml(t){return t.getUTCDay()}function yl(t,e){return po(Xa.count(eo(t)-1,t),e,2)}function vl(t,e){return po(t.getUTCFullYear()%100,e,2)}function xl(t,e){return po((t=_l(t)).getUTCFullYear()%100,e,2)}function wl(t,e){return po(t.getUTCFullYear()%1e4,e,4)}function kl(t,e){var n=t.getUTCDay();return po((t=n>=4||0===n?Qa(t):Qa.ceil(t)).getUTCFullYear()%1e4,e,4)}function Ml(){return"+0000"}function Tl(){return"%"}function Al(t){return+t}function Nl(t){return Math.floor(+t/1e3)}function Cl(t){throw new TypeError("Expected a value of type string but got a value of type "+typeof t)}function Sl(t){return function(e){return"string"!=typeof e&&Cl(e),(e=e.trim())?t(e):null}}ao=function(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,l=t.months,u=t.shortMonths,s=bo(i),c=mo(i),f=bo(a),h=mo(a),d=bo(o),g=mo(o),p=bo(l),_=mo(l),b=bo(u),m=mo(u),y={a:function(t){return o[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return l[t.getMonth()]},c:null,d:qo,e:qo,f:Bo,g:el,G:rl,H:Po,I:Yo,j:$o,L:Ro,m:Io,M:Wo,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Al,s:Nl,S:Vo,u:Xo,U:Zo,V:Qo,w:Jo,W:Ko,x:null,X:null,y:tl,Y:nl,Z:il,"%":Tl},v={a:function(t){return o[t.getUTCDay()]},A:function(t){return a[t.getUTCDay()]},b:function(t){return u[t.getUTCMonth()]},B:function(t){return l[t.getUTCMonth()]},c:null,d:al,e:al,f:cl,g:xl,G:kl,H:ol,I:ll,j:ul,L:sl,m:fl,M:hl,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Al,s:Nl,S:dl,u:gl,U:pl,V:bl,w:ml,W:yl,x:null,X:null,y:vl,Y:wl,Z:Ml,"%":Tl},x={a:function(t,e,n){var r=d.exec(e.slice(n));return r?(t.w=g[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=f.exec(e.slice(n));return r?(t.w=h[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=b.exec(e.slice(n));return r?(t.m=m[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=p.exec(e.slice(n));return r?(t.m=_[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,n,r){return M(t,e,n,r)},d:So,e:So,f:jo,g:To,G:Mo,H:zo,I:zo,j:Eo,L:Oo,m:Co,M:Do,p:function(t,e,n){var r=s.exec(e.slice(n));return r?(t.p=c[r[0].toLowerCase()],n+r[0].length):-1},q:No,Q:Ho,s:Lo,S:Fo,u:vo,U:xo,V:wo,w:yo,W:ko,x:function(t,e,r){return M(t,n,e,r)},X:function(t,e,n){return M(t,r,e,n)},y:To,Y:Mo,Z:Ao,"%":Uo};function w(t,e){return function(n){var r,i,a,o=[],l=-1,u=0,s=t.length;for(n instanceof Date||(n=new Date(+n));++l<s;)37===t.charCodeAt(l)&&(o.push(t.slice(u,l)),null!=(i=co[r=t.charAt(++l)])?r=t.charAt(++l):i="e"===r?" ":"0",(a=e[r])&&(r=a(n,i)),o.push(r),u=l+1);return o.push(t.slice(u,l)),o.join("")}}function k(t,e){return function(n){var r,i,a=io(1900,void 0,1);if(M(a,t,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(e&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(r=ro(io(a.y,0,1))).getUTCDay(),r=i>4||0===i?Xa.ceil(r):Xa(r),r=Ia.offset(r,7*(a.V-1)),a.y=r.getUTCFullYear(),a.m=r.getUTCMonth(),a.d=r.getUTCDate()+(a.w+6)%7):(i=(r=no(io(a.y,0,1))).getDay(),r=i>4||0===i?Ua.ceil(r):Ua(r),r=Fa.offset(r,7*(a.V-1)),a.y=r.getFullYear(),a.m=r.getMonth(),a.d=r.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),i="Z"in a?ro(io(a.y,0,1)).getUTCDay():no(io(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,ro(a)):no(a)}}function M(t,e,n,r){for(var i,a,o=0,l=e.length,u=n.length;o<l;){if(r>=u)return-1;if(37===(i=e.charCodeAt(o++))){if(i=e.charAt(o++),!(a=x[i in co?e.charAt(o++):i])||(r=a(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return y.x=w(n,y),y.X=w(r,y),y.c=w(e,y),v.x=w(n,v),v.X=w(r,v),v.c=w(e,v),{format:function(t){var e=w(t+="",y);return e.toString=function(){return t},e},parse:function(t){var e=k(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=w(t+="",v);return e.toString=function(){return t},e},utcParse:function(t){var e=k(t+="",!0);return e.toString=function(){return t},e}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),oo=ao.format,lo=ao.parse,uo=ao.utcFormat,so=ao.utcParse;var El=new Date(1972,3,27,19,45,5),zl={"%b %d":[{regex:/^june\s(30|[12][0-9]|0?[1-9])$/i,toDate:function(t){return new Date(null,5,t.split(/\s/)[1])}},{regex:/^july\s(3[01]|[12][0-9]|0?[1-9])$/i,toDate:function(t){return new Date(null,6,t.split(/\s/)[1])}},{regex:/^sept\s(30|[12][0-9]|0?[1-9])$/i,toDate:function(t){return new Date(null,8,t.split(/\s/)[1])}}],"%d %b":[{regex:/^(0?[1-9]|[1-9][0-9])\sjune$/i,toDate:function(t){return new Date(null,5,t.split(/\s/)[0])}},{regex:/^(0?[1-9]|[1-9][0-9])\sjuly$/i,toDate:function(t){return new Date(null,6,t.split(/\s/)[0])}},{regex:/^(0?[1-9]|[1-9][0-9])\ssept$/i,toDate:function(t){return new Date(null,8,t.split(/\s/)[0])}}]};function Dl(t){return function(e){var n=null;return t.forEach((function(t){e.match(t.regex)&&(n=t.toDate(e))})),n}}function Fl(t,e){var n,r=lo(t),i=oo(t);return n=Sl("function"==typeof e?function(t){return e(t,null!==r(t))}:function(t){return null!==r(t)}),Object.freeze({test:n,parse:Sl((function(e){return r(e)||(zl[t]?Dl(zl[t])(e):null)})),format:function(t){return i(t)},type:"datetime",description:t,id:"datetime$"+t,example:i(El)})}var Ol=Object.freeze([Fl("%Y-%m-%dT%H:%M:%S.%LZ"),Fl("%d/%m/%Y",(function(t,e){if(!e)return!1;var n=t.split("/").map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12&&n[2]>=1e3})),Fl("%d/%m/%y",(function(t,e){if(!e)return!1;var n=t.split("/").map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12&&!isNaN(n[2])})),Fl("%m/%d/%Y",(function(t,e){if(!e)return!1;var n=t.split("/").map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>0&&n[1]<=31&&n[2]>=1e3})),Fl("%m/%d/%y",(function(t,e){if(!e)return!1;var n=t.split("/").map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>0&&n[1]<=31&&!isNaN(n[2])})),Fl("%Y/%m/%d",(function(t,e){if(!e)return!1;var n=t.split("/").map(parseFloat);return n[0]>=1e3&&n[1]>0&&n[1]<=12&&n[2]>0&&n[2]<=31})),Fl("%d-%m-%Y",(function(t,e){if(!e)return!1;var n=t.split("-").map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12&&n[2]>=1e3})),Fl("%d-%m-%y",(function(t,e){if(!e)return!1;var n=t.split("-").map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12&&!isNaN(n[2])})),Fl("%m-%d-%Y",(function(t,e){if(!e)return!1;var n=t.split("-").map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>0&&n[1]<=31&&n[2]>=1e3})),Fl("%m-%d-%y",(function(t,e){if(!e)return!1;var n=t.split("-").map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>0&&n[1]<=31&&!isNaN(n[2])})),Fl("%Y-%m-%d",(function(t,e){if(!e)return!1;var n=t.split("-").map(parseFloat);return n[0]>=1e3&&n[1]>0&&n[1]<=12&&n[2]>0&&n[2]<=31})),Fl("%d %b %Y",(function(t,e){if(!e)return!1;var n=t.split(" ").map(parseFloat);return n[0]>0&&n[0]<=31&&n[2]>=1e3})),Fl("%d %B %Y",(function(t,e){if(!e)return!1;var n=t.split(" ").map(parseFloat);return n[0]>0&&n[0]<=31&&n[2]>=1e3})),Fl("%d %b %y"),Fl("%d %B %y"),Fl("%d-%b-%Y",(function(t,e){if(!e)return!1;var n=t.split("-").map(parseFloat);return n[0]>0&&n[0]<=31&&n[2]>=1e3})),Fl("%d-%B-%Y",(function(t,e){if(!e)return!1;var n=t.split("-").map(parseFloat);return n[0]>0&&n[0]<=31&&n[2]>=1e3})),Fl("%d-%b-%y"),Fl("%d-%B-%y"),Fl("%m/%Y",(function(t,e){if(!e)return!1;var n=t.split("/").map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>=1e3})),Fl("%m/%y"),Fl("%b %Y",(function(t,e){return!!e&&t.split(" ").map(parseFloat)[1]>=1e3})),Fl("%B %Y",(function(t,e){return!!e&&t.split(" ").map(parseFloat)[1]>=1e3})),Fl("%b %y"),Fl("%B %y"),Fl("%d %b",(function(t,e){return!!e||!!Dl(zl["%d %b"])(t)})),Fl("%d %B"),Fl("%b %d",(function(t,e){return!!e||!!Dl(zl["%b %d"])(t)})),Fl("%B %d"),Fl("%d-%m",(function(t,e){if(!e)return!1;var n=t.split("-").map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12})),Fl("%m-%d"),Fl("%d/%m"),Fl("%m/%d"),Fl("%Y",(function(t,e){if(!e)return!1;var n=parseFloat(t);return n>1499&&n<2200})),Fl("%B"),Fl("%b"),Fl("%X"),Fl("%I:%M %p"),Fl("%H:%M"),Fl("%H:%M:%S"),Fl("%-I%p"),Fl("Q%q %Y",(function(t,e){return!!e&&6===t.replace(/\s/g,"").length})),Fl("%Y Q%q",(function(t,e){return!!e&&6===t.replace(/\s/g,"").length}))]);function jl(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Ul(t){return(t=jl(Math.abs(t)))?t[1]:NaN}var Hl,Ll=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ql(t){if(!(e=Ll.exec(t)))throw new Error("invalid format: "+t);var e;return new Pl({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Pl(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Yl(t,e){var n=jl(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}ql.prototype=Pl.prototype,Pl.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var $l={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Yl(100*t,e)},r:Yl,s:function(t,e){var n=jl(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(Hl=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+jl(t,Math.max(0,e+a-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function Rl(t){return t}var Bl,Il,Wl,Vl=Array.prototype.map,Xl=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Zl(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?Rl:(e=Vl.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,a=[],o=0,l=e[0],u=0;i>0&&l>0&&(u+l+1>r&&(l=Math.max(1,r-u)),a.push(t.substring(i-=l,i+l)),!((u+=l+1)>r));)l=e[o=(o+1)%e.length];return a.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",a=void 0===t.currency?"":t.currency[1]+"",o=void 0===t.decimal?".":t.decimal+"",l=void 0===t.numerals?Rl:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Vl.call(t.numerals,String)),u=void 0===t.percent?"%":t.percent+"",s=void 0===t.minus?"-":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function f(t){var e=(t=ql(t)).fill,n=t.align,f=t.sign,h=t.symbol,d=t.zero,g=t.width,p=t.comma,_=t.precision,b=t.trim,m=t.type;"n"===m?(p=!0,m="g"):$l[m]||(void 0===_&&(_=12),b=!0,m="g"),(d||"0"===e&&"="===n)&&(d=!0,e="0",n="=");var y="$"===h?i:"#"===h&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",v="$"===h?a:/[%p]/.test(m)?u:"",x=$l[m],w=/[defgprs%]/.test(m);function k(t){var i,a,u,h=y,k=v;if("c"===m)k=x(t)+k,t="";else{var M=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:x(Math.abs(t),_),b&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),M&&0==+t&&"+"!==f&&(M=!1),h=(M?"("===f?f:s:"-"===f||"("===f?"":f)+h,k=("s"===m?Xl[8+Hl/3]:"")+k+(M&&"("===f?")":""),w)for(i=-1,a=t.length;++i<a;)if(48>(u=t.charCodeAt(i))||u>57){k=(46===u?o+t.slice(i+1):t.slice(i))+k,t=t.slice(0,i);break}}p&&!d&&(t=r(t,1/0));var T=h.length+t.length+k.length,A=T<g?new Array(g-T+1).join(e):"";switch(p&&d&&(t=r(A+t,A.length?g-k.length:1/0),A=""),n){case"<":t=h+t+k+A;break;case"=":t=h+A+t+k;break;case"^":t=A.slice(0,T=A.length>>1)+h+t+k+A.slice(T);break;default:t=A+h+t+k}return l(t)}return _=void 0===_?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_)),k.toString=function(){return t+""},k}return{format:f,formatPrefix:function(t,e){var n=f(((t=ql(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Ul(e)/3))),i=Math.pow(10,-r),a=Xl[8+r/3];return function(t){return n(i*t)+a}}}}function Gl(t){return Math.max(0,-Ul(Math.abs(t)))}function Ql(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Ul(e)/3)))-Ul(Math.abs(t)))}function Jl(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ul(e)-Ul(t))+1}!function(t){Bl=Zl(t),Il=Bl.format,Wl=Bl.formatPrefix}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});var Kl={test:Sl((function(t){return/^(\+|-)?\d{1,3}(,\d{3})*(\.\d+)?((e|E)(\+|-)?\d+)?$/.test(t.trim())})),parse:Sl((function(t){return parseFloat(t.replace(/,/g,""))})),description:"Comma thousand separator, point decimal mark",thousand_separator:",",decimal_mark:".",id:"number$comma_point",example:"12,235.56"},tu={test:Sl((function(t){return/^(\+|-)?\d{1,3}(\s\d{3})*(\.\d+)?((e|E)(\+|-)?\d+)?$/.test(t.trim())})),parse:Sl((function(t){return parseFloat(t.replace(/\s/g,""))})),description:"Space thousand separator, point decimal mark",thousand_separator:" ",decimal_mark:".",id:"number$space_point",example:"12 235.56"},eu={test:Sl((function(t){return/^(\+|-)?\d+(\.\d+)?((e|E)(\+|-)?\d+)?$/.test(t.trim())})),parse:Sl((function(t){return parseFloat(t)})),description:"No thousand separator, point decimal mark",thousand_separator:"",decimal_mark:".",id:"number$none_point",example:"12235.56"},nu={test:Sl((function(t){return/^(\+|-)?\d{1,3}(\.\d{3})*(,\d+)?((e|E)(\+|-)?\d+)?$/.test(t.trim())})),parse:Sl((function(t){return parseFloat(t.replace(/\./g,"").replace(/,/,"."))})),description:"Point thousand separator, comma decimal mark",thousand_separator:".",decimal_mark:",",id:"number$point_comma",example:"12.235,56"},ru={test:Sl((function(t){return/^(\+|-)?\d{1,3}(\s\d{3})*(,\d+)?((e|E)(\+|-)?\d+)?$/.test(t.trim())})),parse:Sl((function(t){return parseFloat(t.replace(/\s/g,"").replace(/,/,"."))})),description:"Space thousand separator, comma decimal mark",thousand_separator:" ",decimal_mark:",",id:"number$space_comma",example:"12 235,56"},iu={test:Sl((function(t){return/^(\+|-)?\d+(,\d+)?((e|E)(\+|-)?\d+)?$/.test(t.trim())})),parse:Sl((function(t){return parseFloat(t.replace(/,/,"."))})),description:"No thousand separator, comma decimal mark",thousand_separator:"",decimal_mark:",",id:"number$none_comma",example:"12235,56"},au=Object.freeze([Kl,tu,nu,ru,eu,iu]);au.forEach((function(t){t.type="number",t.format=function(t){var e,n,r=Zl({decimal:t.decimal_mark,thousands:t.thousand_separator,grouping:[3],currency:["",""]});return function(t,i){return i||(i=",.2f"),i!==n&&(n=i,e=r.format(n)),e(t)}}(t),Object.freeze(t)}));var ou,lu=Object.freeze({test:function(t){return"string"==typeof t||Cl(t)},parse:function(t){return"string"==typeof t?t:Cl(t)},format:function(t){if("string"==typeof t)return t},type:"string",description:"Arbitrary string",id:"string$arbitrary_string"}),uu=Object.freeze({datetime:Ol,number:au}),su=Object.freeze(["datetime","number","string"]),cu=Object.freeze({n_max:250,n_failing_values:0,failure_fraction:.05,sort:!0}),fu=Object.freeze(Object.keys(cu));function hu(t,e){return t.index-e.index}function du(t,e){return e.n_success-t.n_success||hu(t,e)}function gu(t){return(""+t).trim()}function pu(t){return void 0===t?function(t){return gu(t)}:"function"==typeof t?function(e,n){return gu(t(e,n))}:function(e){return gu(e[""+t])}}function _u(t){t?Array.isArray(t)||(t=[t]):t=su;var e=t.reduce((function(t,e){var n=uu[e];return n&&Array.prototype.push.apply(t,n),t}),[]),n=-1!==t.indexOf("string"),r=fu.reduce((function(t,e){return t[e]=cu[e],t}),{}),i=function(t,i){i=pu(i);var a=t.map(i).filter((function(t){return t}));if(!a.length)return n?[lu]:[];var o=Math.min(r.n_max,a.length),l=Math.floor(o*r.failure_fraction),u=r.n_failing_values,s=r.sort?du:hu,c=e.slice().reduce((function(t,e,n){for(var r=c=0,i=[],s=!1,c=0;c<o;c++){var f=a[c];if(!e.test(f)&&(++r>l?s=!0:-1===i.indexOf(f)&&(i.push(f),i.length>u&&(s=!0)),s))break}return s||t.push({interp:e,n_success:o-r,index:n}),t}),[]).sort(s).map((function(t){return t.interp}));return n&&c.push(lu),c};return fu.forEach((function(t){var e;i[(e=t,e.replace(/_(\w)/g,(function(t,e){return e.toUpperCase()})))]=function(e){return void 0===e?r[t]:(r[t]=e,i)}})),i}function bu(){return this.declarations=[],this}function mu(t){return this.selector=t,this.styles=[],this}_u.DATETIME_IDS=Object.freeze(Ol.map((function(t){return t.id}))),_u.NUMBER_IDS=Object.freeze(au.map((function(t){return t.id}))),_u.STRING_IDS=Object.freeze([lu.id]),_u.getInterpretation=(ou=Ol.concat(au,lu).reduce((function(t,e){return t[e.id]=e,t}),{}),function(t){return ou[t]}),_u._createAccessorFunction=pu,bu.prototype.select=function(t){if(!t)return this;var e=new mu(t);return e.parent=this,this.addDeclaration(e),e},bu.prototype.addDeclaration=function(t){return this.declarations.push(t),this},bu.prototype.print=function(){var t="";return this.declarations.forEach((function(e){t+=e.selector+" {\n",e.styles.forEach((function(e){t+="\t"+e[0]+": "+e[1]+";\n"})),t+="}\n\n"})),t},bu.prototype.clear=function(){return this.declarations=[],this},mu.prototype.style=function(t,e){var n="function"==typeof value_?e():e;return""!==n&&null!=n&&this.styles.push([t,n]),this},mu.prototype.select=function(t){return this.parent.select(this.selector+" "+t)};var yu=!1;function vu(){if(!yu&&"undefined"!=typeof document){var t=function(){var t=new bu;return t.select(".fl-controls-container").style("display","inline-block").style("line-height","1em"),t.select(".fl-controls-title").style("display","inline-block").style("margin","0px 0.5em 0px 0px"),t.select(".fl-controls-container, .fl-controls-container *").style("box-sizing","border-box"),t.select(".slider-holder").style("margin-bottom","20px"),t.select(".fl-controls-slider, .slider-play").style("pointer-events","all").style("display","inline-block").style("vertical-align","middle"),t.select(".slider-play svg").style("height","100%").style("width","100%").style("display","block").style("cursor"," pointer",""),t.select(".fl-controls-slider svg").style("display","block"),t.select(".slider-play:hover").style("opacity","0.6"),t.select(".fl-control-slider").style("width","100%").style("bottom","0").style("align-items","center"),t.select(".fl-control").style("position","relative"),t.select(".fl-control.hidden").style("display","none"),t.select(".fl-control .button").style("display","inline-flex").style("align-items","center").style("background","#eee").style("padding","0 0.5em").style("margin-right","0.25em").style("margin-bottom","0.25em").style("line-height","1em").style("box-sizing","border-box"),t.select(".fl-control.grouped:not(.hidden)").style("display","inline-table").style("table-layout","fixed").select(".button").style("display","table-cell").style("vertical-align","middle").style("margin","0").style("text-align","center"),t.select(".fl-control .button.selected").style("background","#ddd"),t.select(".fl-control-dropdown").style("line-height","1em").style("position","relative"),t.select(".fl-control-dropdown::after").style("display","block").style("content","''").style("width","10px").style("height","10px").style("background","transparent").style("position","absolute").style("right","5px").style("left","auto").style("top","50%").style("pointer-events","none").style("transform","translateY(calc(-50% + 3px))").style("border-left","5px solid transparent").style("border-right","5px solid transparent").style("border-top","5px solid").style("box-sizing","border-box"),t.select(".is-rtl .fl-control-dropdown::after").style("left","5px").style("right","auto"),t.select(".fl-control-dropdown select").style("-webkit-appearance","none").style("-webkit-border-radius","0px").style("width","100%"),t.print()}(),e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",n.className="flourish-controls",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t)),yu=!0}}var xu,wu,ku=(xu=document.createElement("canvas").getContext("2d"),function(t,e){return xu.font=e||"10px sans-serif",xu.measureText(t).width});var Mu=Array.prototype.slice;function Tu(t){return t}var Au=1e-6;function Nu(t){return"translate("+(t+.5)+",0)"}function Cu(t){return function(e){return+t(e)}}function Su(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return+t(n)+e}}function Eu(){return!this.__axis}function zu(t,e){var n=[],r=null,i=null,a=6,o=6,l=3,u="y",s=Nu;function c(t){var c=null==r?e.ticks?e.ticks.apply(e,n):e.domain():r,f=null==i?e.tickFormat?e.tickFormat.apply(e,n):Tu:i,h=Math.max(a,0)+l,d=e.range(),g=+d[0]+.5,p=+d[d.length-1]+.5,_=(e.bandwidth?Su:Cu)(e.copy()),b=t.selection?t.selection():t,m=b.selectAll(".domain").data([null]),y=b.selectAll(".tick").data(c,e).order(),v=y.exit(),x=y.enter().append("g").attr("class","tick"),w=y.select("line"),k=y.select("text");m=m.merge(m.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),y=y.merge(x),w=w.merge(x.append("line").attr("stroke","currentColor").attr("y2",1*a)),k=k.merge(x.append("text").attr("fill","currentColor").attr(u,1*h).attr("dy","0.71em")),t!==b&&(m=m.transition(t),y=y.transition(t),w=w.transition(t),k=k.transition(t),v=v.transition(t).attr("opacity",Au).attr("transform",(function(t){return isFinite(t=_(t))?s(t):this.getAttribute("transform")})),x.attr("opacity",Au).attr("transform",(function(t){var e=this.parentNode.__axis;return s(e&&isFinite(e=e(t))?e:_(t))}))),v.remove(),m.attr("d",o?"M"+g+","+1*o+"V0.5H"+p+"V"+1*o:"M"+g+",0.5H"+p),y.attr("opacity",1).attr("transform",(function(t){return s(_(t))})),w.attr("y2",1*a),k.attr(u,1*h).text(f),b.filter(Eu).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","middle"),b.each((function(){this.__axis=_}))}return c.scale=function(t){return arguments.length?(e=t,c):e},c.ticks=function(){return n=Mu.call(arguments),c},c.tickArguments=function(t){return arguments.length?(n=null==t?[]:Mu.call(t),c):n.slice()},c.tickValues=function(t){return arguments.length?(r=null==t?null:Mu.call(t),c):r&&r.slice()},c.tickFormat=function(t){return arguments.length?(i=t,c):i},c.tickSize=function(t){return arguments.length?(a=o=+t,c):a},c.tickSizeInner=function(t){return arguments.length?(a=+t,c):a},c.tickSizeOuter=function(t){return arguments.length?(o=+t,c):o},c.tickPadding=function(t){return arguments.length?(l=+t,c):l},c}function Du(t){return zu(0,t)}var Fu=Array.prototype,Ou=Fu.map,ju=Fu.slice;function Uu(t){return+t}var Hu=[0,1];function Lu(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:function(t){return function(){return t}}(e)}function qu(t,e,n,r){var i=t[0],a=t[1],o=e[0],l=e[1];return a<i?(i=n(a,i),o=r(l,o)):(i=n(i,a),o=r(o,l)),function(t){return o(i(t))}}function Pu(t,e,n,r){var i=Math.min(t.length,e.length)-1,a=new Array(i),o=new Array(i),l=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++l<i;)a[l]=n(t[l],t[l+1]),o[l]=r(e[l],e[l+1]);return function(e){var n=aa(t,e,1,i)-1;return o[n](a[n](e))}}function Yu(t){var e=t.domain;return t.ticks=function(t){var n=e();return ha(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){return function(t,e,n){var r,i=t[0],a=t[t.length-1],o=ga(i,a,null==e?10:e);switch((n=ql(null==n?",f":n)).type){case"s":var l=Math.max(Math.abs(i),Math.abs(a));return null!=n.precision||isNaN(r=Ql(o,l))||(n.precision=r),Wl(n,l);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(r=Jl(o,Math.max(Math.abs(i),Math.abs(a))))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(r=Gl(o))||(n.precision=r-2*("%"===n.type))}return Il(n)}(e(),t,n)},t.nice=function(n){null==n&&(n=10);var r,i=e(),a=0,o=i.length-1,l=i[a],u=i[o];return u<l&&(r=l,l=u,u=r,r=a,a=o,o=r),(r=da(l,u,n))>0?r=da(l=Math.floor(l/r)*r,u=Math.ceil(u/r)*r,n):r<0&&(r=da(l=Math.ceil(l*r)/r,u=Math.floor(u*r)/r,n)),r>0?(i[a]=Math.floor(l/r)*r,i[o]=Math.ceil(u/r)*r,e(i)):r<0&&(i[a]=Math.ceil(l*r)/r,i[o]=Math.floor(u*r)/r,e(i)),t},t}function $u(){var t=function(t,e){var n,r,i,a=Hu,o=Hu,l=bn,u=!1;function s(){return n=Math.min(a.length,o.length)>2?Pu:qu,r=i=null,c}function c(e){return(r||(r=n(a,o,u?function(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=e?0:t>=n?1:r(t)}}}(t):t,l)))(+e)}return c.invert=function(t){return(i||(i=n(o,a,Lu,u?function(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=0?e:t>=1?n:r(t)}}}(e):e)))(+t)},c.domain=function(t){return arguments.length?(a=Ou.call(t,Uu),s()):a.slice()},c.range=function(t){return arguments.length?(o=ju.call(t),s()):o.slice()},c.rangeRound=function(t){return o=ju.call(t),l=mn,s()},c.clamp=function(t){return arguments.length?(u=!!t,s()):u},c.interpolate=function(t){return arguments.length?(l=t,s()):l},s()}(Lu,hn);return t.copy=function(){return e=t,$u().domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp());var e},Yu(t)}function Ru(t){this.container=pt(t),this._width=null,this._height=null,this._handleRadius=15,this._channelHeight=5,this._channelRadius=null,this._handleFill="black",this._channelFill="#eee",this._margin={top:null,left:null,right:null},this._domain=[0,1],this._value=null,this._snap=!1,this._scale=null,this._axis=!1,this._ticks=null,this._tickFormat=null,this._tickSize=null,this._label=null,this._labelSize=18,this._startLabel=null,this._startLabelBelow=!1,this._endLabel=null,this._endLabelBelow=!1,this._startEndLabelSize=16,this.handlers={change:[]}}function Bu(t){t.length>0&&"_"==t.charAt(0)&&(Ru.prototype[t.substr(1)]=function(e){return void 0===e?this[t]:(this[t]=e,this)})}var Iu=new Ru;for(var Wu in Iu)Bu(Wu);function Vu(t,e,n,r){if(void 0===n&&(n=0),void 0===r&&(r=t.length),r-n==0)return e;if(r-n==1)return t[n];if(r-n==2)return Math.abs(t[n]-e)<=Math.abs(t[n+1]-e)?t[n]:t[n+1];var i=n+Math.floor((r-n)/2),a=t[i],o=t[i-1];return o<=e&&e<=a?Math.abs(o-e)<=Math.abs(a-e)?o:a:a<=e?Vu(t,e,i,r):Vu(t,e,n,i)}function Xu(t,e){return"boolean"==typeof t?t?Math.round(e):e:Vu(t,e)}function Zu(t){return new Ru(t)}function Gu(t,e,n){var r,i,a,o,l,u,s={},c=pt(n).append("div").attr("class","fl-control fl-control-slider animatable"),f=c.append("div").attr("class","slider-play"),h=c.append("div").attr("class","fl-controls-slider"),d=null,g=function(){clearTimeout(d),d=null},p=function(e){var n=o[e];n.options_index!==t.index()&&(t.index(n.options_index),t.trigger("change"))},_=Zu(h.node()).snap(!0).on("change",(function(t){var e=null!==d;e&&g(),p(t),e&&m()})),b=function(){g(),c.classed("playing",!1),f.html(r),t._isPlaying_(!1),u=!1},m=function(){var n=t.getSortedIndex(),r=l[n],i=t.n_options-1,a=n<i?n+1:0;d=setTimeout((function(){p(a),e.slider_loop||a<i?m():b()}),r)},y=function(){c.classed("playing",!0),f.html(i),m(),t._isPlaying_(!0),u=!0};f.on("click",(function(){null===d?y():b()}));var v=function(){return c.style("display","inline-flex"),function(){var t=Math.round(wu(e.slider_handle_height)/2);c.style("width",Math.round(wu(e.slider_width))+"px"),f.style("height",2*t+"px").style("width",2*t+"px").style("display",e.slider_play_button?null:"none");var n=c.node().getBoundingClientRect().width,r=f.node().getBoundingClientRect().width;h.style("width",Math.max(n-r,1)+"px").style("height",2*t+"px"),_.handleRadius(t).margin({left:t+5,right:t+wu(e.slider_margin),top:t})}(),e.slider_play_button?c.classed("animatable",!0):(b(),c.classed("animatable",!1)),a!==e.slider_handle_color&&(_.update(),a=e.slider_handle_color||"currentColor",c.select(".slider-handle").style("fill",a),r='<svg width="25px" height="30px" viewBox="0 0 25 30"> <polygon fill="'+a+'" stroke="none" points="25 15 0 30 0 0"></polygon> </svg>',i='<svg width="26px" height="30px" viewBox="0 0 26 30"> <g stroke="none" stroke-width="1" fill="'+a+'"><rect x="2" y="2" width="9" height="26"></rect> <rect x="15" y="2" width="9" height="26"></rect> </g> </svg>',f.html(d?i:r)),s},x=function(){return b(),c.style("display","none"),s};return s.show=v,s.hide=x,s.update=function(n,r){if(o=n,!t.n_options||"slider"!==e.control_type)return x(),s;r?v():x();var i=t.n_options,a=e.slider_loop;l=o.map((function(t,n){return 1e3*(e.slider_step_time+(a&&n===i-1?e.slider_restart_pause:0))}));var c=t.getSortedIndex(),f=o[c];return _.domain([0,i-1]).value(c).endLabel(f.display).channelHeight(Math.round(wu(e.slider_track_height))).channelFill(e.slider_background_color).update(),_.container.select("svg").attr("fill","currentColor"),h.select("text.slider-end-labels").style("fill",e.slider_font_color).attr("y","0").attr("dy","0.25em"),t._isPlaying_()&&!u?y():!t._isPlaying_()&&u&&b(),s},s}Ru.prototype.margin=function(t){if(!t)return this._margin;for(Wu in t){if(!(Wu in this._margin))throw"Slider.margin: unrecognised option "+Wu;this._margin[Wu]=t[Wu]}return this},Ru.prototype.on=function(t,e){if(!(t in this.handlers))throw"Slider.on: No such event: "+t;return this.handlers[t].push(e),this},Ru.prototype.fire=function(t,e){if(!(t in this.handlers))throw"Slider.fire: No such event: "+t;for(var n=this.handlers[t],r=0;r<n.length;r++)n[r].call(this,e);return this},Ru.prototype.draw=function(){var t=this,e=this._width,n=this._height,r=this.container.node();if(!e){var i=r.getBoundingClientRect();if(!i||0==i.width)return this;e=i.width,n=i.height}var a,o=null==this._channelRadius?this._channelHeight/2:this._channelRadius,l=null==this._margin.left?Math.max(this._handleRadius,o):this._margin.left,u=null==this._margin.right?Math.max(this._handleRadius,o):this._margin.right,s=null==this._margin.top?Math.max(this._handleRadius,this._channelHeight/2):this._margin.top,c=e-l-u,f=c+2*o,h=1.5*this._labelSize;null!=this._label&&null==this._margin.top&&(s+=h),"http://www.w3.org/2000/svg"==r.namespaceURI?a=this.container:((a=this.container.selectAll("svg").data([{width:e,height:n}])).exit().remove(),(a=a.enter().append("svg").merge(a)).attr("width",(function(t){return t.width})).attr("height",(function(t){return t.height})));var d=a.selectAll("g.slider-container").data([{left:l,top:s,id:this._id}]);d.exit().remove(),(d=d.enter().append("g").attr("class","slider-container").merge(d)).attr("transform",(function(t){return"translate("+t.left+","+t.top+")"})).attr("id",(function(t){return t.id})),this.scale=(this._scale?this._scale():$u()).domain(this._domain).range([0,c]),null==this._value||this._value<this._domain[0]?this._value=this._domain[0]:this._value>this._domain[1]&&(this._value=this._domain[1]),this._snap&&(this._value=Xu(this._snap,this._value));var g,p=[];this._axis&&(g="boolean"!=typeof this._axis?this._axis(this.scale):Du().scale(this.scale).tickPadding(6),this._ticks&&g.ticks(this._ticks),this._tickFormat&&g.tickFormat(this._tickFormat),this._tickSize?g.tickSize(this._tickSize):g.tickSize(Math.max(5,this._handleRadius-this._channelHeight-2)),p.push(g));var _,b,m,y,v=d.selectAll(".slider-axis").data(p).enter();function x(){document.removeEventListener("mouseup",x,!1),document.removeEventListener("mousemove",w,!1)}function w(t){T(t.clientX-m)}function k(){document.removeEventListener("touchend",k,!1),document.removeEventListener("touchmove",M,!1)}function M(t){1==t.touches.length&&T(t.touches[0].clientX-m)}function T(e){var n=y+e,r=Math.max(0,Math.min(c,n)),i=t.scale.invert(r);t._snap&&(i=Xu(t._snap,i)),b.attr("cx",t.scale(i)),i!=t._value&&(t._value=i,t.fire("change",t._value))}v.append("g").attr("class","slider-axis").attr("transform","translate(0,"+this._channelHeight/2+")").each((function(t){t(pt(this))})),v.select(".domain").attr("fill","none"),v.selectAll(".tick line").attr("stroke","black"),v.exit().remove(),(_=d.selectAll(".slider-channel").data([{width:f,height:this._channelHeight,channel_r:o}])).exit().remove(),_=_.enter().append("rect").attr("class","slider-channel").attr("cursor","pointer").on("click",(function(){var e=Math.max(0,Math.min(c,function(t){var e=_t();return e.changedTouches&&(e=e.changedTouches[0]),function(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}(t,e)}(this)[0]));t._value=t.scale.invert(e),t._snap&&(t._value=Xu(t._snap,t._value)),b.attr("cx",t.scale(t._value)),t.fire("change",t._value)})).merge(_),_.attr("width",(function(t){return t.width})).attr("fill",this._channelFill).attr("height",(function(t){return t.height})).attr("y",(function(t){return-t.height/2})).attr("x",(function(t){return-t.channel_r})).attr("rx",(function(t){return t.channel_r})),(b=(b=d.selectAll(".slider-handle").data([{v:this._value,x:this.scale(this._value)}])).enter().append("circle").attr("class","slider-handle").attr("cursor","col-resize").merge(b)).attr("cx",(function(t){return t.x})).attr("r",this._handleRadius).attr("fill",this._handleFill).on("mousedown",(function(){it.preventDefault(),function(e){document.addEventListener("mouseup",x,!1),document.addEventListener("mousemove",w,!1),m=e.clientX,y=t.scale(t._value)}(it)})).on("touchstart",(function(){it.preventDefault(),function(e){1==e.touches.length&&(document.addEventListener("touchend",k,!1),document.addEventListener("touchmove",M,!1),m=e.touches[0].clientX,y=t.scale(t._value))}(it)}));var A=[];this._label&&A.push({label:this._label,x:c/2,y:-h,font_size:this._labelSize});var N=d.selectAll(".slider-label").data(A);N.exit().remove(),(N=N.enter().append("text").attr("class","slider-label").attr("text-anchor","middle").attr("cursor","default").merge(N)).text((function(t){return t.label})).attr("x",(function(t){return t.x})).attr("y",(function(t){return t.y})).attr("font-size",this._labelSize);var C=[];this._startLabel&&C.push({label:this._startLabel,x:this._startLabelBelow?0:-(o+5+Math.max(0,this._handleRadius-o)),y:this._startLabelBelow?o+15:this._startEndLabelSize/1.75-o/2,anchor:this._startLabelBelow?"middle":"end",font_size:this._startEndLabelSize}),this._endLabel&&C.push({label:this._endLabel,x:this._endLabelBelow?c:c+(o+Math.max(0,this._handleRadius-o)+5),y:this._startLabelBelow?o+15:this._startEndLabelSize/1.75-o/2,anchor:this._endLabelBelow?"middle":"start",font_size:this._startEndLabelSize});var S=d.selectAll(".slider-end-labels").data(C);return S.exit().remove(),(S=S.enter().append("text").attr("class","slider-end-labels").attr("pointer-events","none").merge(S)).text((function(t){return t.label})).attr("font-size",(function(t){return t.font_size})).attr("x",(function(t){return t.x})).attr("y",(function(t){return t.y})).attr("text-anchor",(function(t){return t.anchor})),this},Ru.prototype.update=Ru.prototype.draw,Zu.version="1.4.2";var Qu=Object.freeze({control_type:"dropdown",control_title:"",dropdown_width_mode:"auto",dropdown_width_fixed:20,button_group:!0,button_group_width_mode:"fixed",button_group_width_fixed:20,slider_width:15,slider_handle_color:null,slider_font_color:null,slider_background_color:"#dddddd",slider_handle_height:1,slider_track_height:.2,slider_margin:4.5,slider_play_button:!0,slider_step_time:2,slider_loop:!0,slider_restart_pause:0,sort:!1,_index_:null,_is_playing_:!1});function Ju(t){return t}function Ku(t){return null==t?"":t.toString()}function ts(t){var e={},n=Ju,r=Ku,i=[],a=!0,o=[],l=[],u=[],s=document.createElement("div");s.setAttribute("class","fl-controls-container");var c=pt(s).append("div").attr("class","fl-controls-title"),f=function(t,e,n){var r={},i=pt(n).append("div").attr("class","fl-control fl-control-dropdown").style("display","none");const a=i.append("select").on("change",(function(){const e=a.select("option:checked").datum().options_index;t.index(e),t.trigger("change")}));var o=function(t){var r="100%";"auto"==e.dropdown_width_mode?r=Math.min(t+40,wu(20))+wu(1)+"px":"fixed"==e.dropdown_width_mode&&(r=wu(e.dropdown_width_fixed)+"px"),n.style.width="full"==e.dropdown_width_mode?r:"",i.style("width",r).style("display","full"!==e.dropdown_width_mode?"inline-table":null)},l=function(){i.style("display","none")};return r.show=o,r.hide=l,r.update=function(n,i){var u=window.getComputedStyle(a.node()).fontSize;if(!t.n_options||"dropdown"!==e.control_type)return l(),r;const s=a.selectAll("option").data(n,(t=>t.value));s.exit().remove();var c=s.enter().append("option").text((t=>t.display)).attr("value",(t=>t.value));let f=0;const h=u+" sans-serif";return"auto"===e.dropdown_width_mode&&s.merge(c).each((function(t){const e=ku(t.display,h);f=Math.max(f,e)})),a.node().value=t.value(),i?o(f):l(),r},r}(e,t,s),h=function(t,e,n){var r={},i=pt(n).append("div").attr("class","fl-control fl-control-buttons"),a=function(){i.classed("hidden",!1)},o=function(){i.classed("hidden",!0)};return r.show=a,r.hide=o,r.update=function(n,l){if(!t.n_options||"buttons"!==e.control_type)return o(),r;var u=t.index();i.classed("grouped",e.button_group),i.classed("fixed-width","fixed"==e.button_group_width_mode||"full"==e.button_group_width_mode),i.style("width",e.button_group&&"fixed"==e.button_group_width_mode?wu(e.button_group_width_fixed)+"px":"full"==e.button_group_width_mode?"100%":null);var s=function(e){var n=e.options_index;n!==t.index()&&(t.index(n),t.trigger("change"))},c=i.selectAll(".button").data(n,(function(t){return t.display})),f=c.enter().append("div").attr("class","button").style("cursor","pointer").attr("role","button").attr("tabindex",0).on("click",(function(t){s(t)})).on("keyup",(function(t){"Space"!==it.code&&"Enter"!==it.code||(it.preventDefault(),s(t))}));f.append("span").text((function(t){return t.display})),c.merge(f).classed("selected",(function(t){return t.options_index===u})).attr("aria-pressed",(function(t){return t.options_index===u})),c.exit().remove(),l?a():o()},r}(e,t,s),d=Gu(e,t,s);for(var g in Qu)void 0===t[g]&&(t[g]=Qu[g]);var p=t._index_;e.appendTo=function(t){return vu(),pt(t).node().appendChild(s),e};e.remove=function(){return s.parentElement&&s.parentElement.removeChild(s),e},e.options=function(t){if(void 0===t)return o.slice();if(!Array.isArray(t))return e;var n=(o=t.slice()).length,r=_();return n?(null===r||r>=n)&&_(0):_(null),e},Object.defineProperty(e,"n_options",{get:function(){return o.length}});var _=function(n){return void 0===n?(t._is_playing_||(p=t._index_),p):(null===n||function(t){return o.length&&t>=0&&t<o.length}(n)?(p=n,t._is_playing_||(t._index_=p)):console.warn("Invalid index, ignoring update call"),e)};e.index=_,e.getSortedIndex=function(){var e,n=_();return"unsorted"==t.sort?n:(l.some((function(t,r){if(t.options_index===n)return e=r,!0})),e)},e.value=function(t){if(void 0===t)return o[_()];var n=o.indexOf(t);return-1!==n&&_(n),e},e.on=function(t,n){return"change"===t&&u.push(n.bind(e)),e},e.parse=function(t){return void 0===t?n:(n=null===t?Ju:t,e)},e.format=function(t,n){if(void 0===t)return r;if(null===t&&(r=Ku),"string"==typeof t)try{r=function(t){const e=_u.getInterpretation(t);if(!e)throw new Error(`format_id ${t} not recognised`);return function(){return e.format(...arguments)}}(t)}catch(t){r=Ku,console.warn(t.message)}else r=t;return n&&Array.isArray(n)&&(i=n),e},e.visible=function(t){return void 0===t?a:(a=null===t||t,e)},e.update=function(){var u;return u=parseFloat(getComputedStyle(document.documentElement).fontSize)||16,wu=function(t){return t*u},l=function(t,e,n,r,i){var a=t.map((function(t,e){return{value:t,options_index:e,parsed:n(t),display:i.includes(t)?t:r(t)}}));return e?a.sort((function(t,e){return function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}(t.parsed,e.parsed)})):a}(o,t.sort,n,r,i),function(e){s.style.display=e.length>1?null:"none",s.style.width="",c.node().innerHTML=t.control_title,c.node().style.display=""===t.control_title?"none":"inline-block",d.update(e,a),f.update(e,a),h.update(e,a)}(l),e},e.trigger=function(t){var n,r;return"change"===t&&(n=_(),r=o[n],u.forEach((function(t){t(r,n)}))),e},e.getNode=function(){return s};return e._isPlaying_=function(e){if(void 0===e)return t._is_playing_;t._is_playing_=!!e,e||_(p)},e}function es(){return this.declarations=[],this}function ns(t){return this.selector=t,this.styles=[],this}es.prototype.select=function(t){if(!t)return this;var e=new ns(t);return e.parent=this,this.addDeclaration(e),e},es.prototype.addDeclaration=function(t){return this.declarations.push(t),this},es.prototype.print=function(){var t="";return this.declarations.forEach((function(e){t+=e.selector+" {\n",e.styles.forEach((function(e){t+="\t"+e[0]+": "+e[1]+";\n"})),t+="}\n\n"})),t},es.prototype.clear=function(){return this.declarations=[],this},ns.prototype.style=function(t,e){var n="function"==typeof value_?e():e;return""!==n&&null!=n&&this.styles.push([t,n]),this},ns.prototype.select=function(t){return this.parent.select(this.selector+" "+t)};var rs=Object.freeze({font_size:1,font_weight:"bold",height:2});function is(t,e,n){for(var r in this._state=t,rs)void 0===this._state[r]&&(this._state[r]=rs[r]);return this._layout=n||{},this._styles=new es,this._selector=e,this._createStylesheet(),this}function as(t,e){var n=function(t,e){if("string"!=typeof t)return!1;var n=he(t);return n.opacity=void 0!==e?e:1,n}(t,e);return!!n&&n.toString()}is.prototype._createStylesheet=function(){this._stylesheet=document.createElement("style"),this._stylesheet.className="fl-ui-styles-controls",document.head.appendChild(this._stylesheet)},is.prototype.update=function(){this._styles.clear(),this._styles.select(this._selector+".hidden").style("display","none"),this._styles.select(this._selector).style("vertical-align","middle").style("position","relative").style("font-size",this._state.font_size+"rem").style("font-weight",this._state.font_weight),this._styles.select(".fl-controls-title").style("font-size",this._state.font_size+"rem").style("font-weight",this._state.font_weight).style("vertical-align","middle"),this._styles.select(this._selector+".fl-control .button").style("height",this._state.height+"rem").style("padding","0 0.5em"),this._styles.select(this._selector+"-dropdown select").style("height",this._state.height+"rem").style("font-size",this._state.font_size+"rem").style("font-weight",this._state.font_weight).style("padding","0 "+.1*this._state.height+"rem"),this._styles.select(this._selector+"-slider .slider-end-labels").style("font-size",this._state.font_size+"rem").style("font-weight",this._state.font_weight),this._styles.select(this._selector+"-slider").style("height",this._state.height+"rem"),this._stylesheet.innerHTML=this._styles.print()},function(){var t=document.createElement("canvas").getContext("2d")}();var os=Object.freeze({background:null,font_color:null,background_selected:"#2886b2",font_color_selected:"#ffffff",background_hover:null,font_color_hover:null,border_width:1,border_transparency:.25,border_color:null,border_radius:3});function ls(t,e,n){for(var r in this._state=t,os)void 0===this._state[r]&&(this._state[r]=os[r]);return this._layout=n||{},this._styles=new es,this._selector=e,this._createStylesheet(),this}ls.prototype._createStylesheet=function(){this._stylesheet=document.createElement("style"),this._stylesheet.className="fl-ui-styles-button",document.head.appendChild(this._stylesheet)},ls.prototype.update=function(){this._styles.clear();var t=this._state.background||this._layout.background_color||"#ffffff",e=this._state.font_color||this._layout.font_color||"#333333",n=as(this._state.border_color||e,this._state.border_transparency);this._styles.select(this._selector+".fl-control.hidden").style("display","none"),this._styles.select(this._selector+".fl-control .button").style("overflow","hidden").style("white-space","nowrap").style("margin","0 2px 0 0 !important").style("background-color",t).style("color",e).style("border",this._state.border_width+"px solid "+n).style("border-radius",this._state.border_radius+"px"),this._styles.select(this._selector+".fl-control .button:hover").style("background-color",this._state.background_hover||t).style("color",this._state.font_color_hover||e),this._styles.select(this._selector+".fl-control .button.selected").style("background-color",this._state.background_selected).style("color",this._state.font_color_selected),this._styles.select(this._selector+".grouped.fl-control .button").style("border-right","none").style("border-radius","0").style("margin","0"),this._styles.select(this._selector+".grouped.fl-control .button:first-child").style("border-radius",this._state.border_radius+"px 0 0 "+this._state.border_radius+"px"),this._styles.select(this._selector+".grouped.fl-control .button:last-child").style("border-radius","0 "+this._state.border_radius+"px "+this._state.border_radius+"px 0").style("border-right",this._state.border_width+"px solid "+n),this._styles.select(this._selector+".grouped.fl-control.fixed-width:not(.hidden)").style("width",this._state.grouped_width+"%"),this._stylesheet.innerHTML=this._styles.print()};var us=Object.freeze({background:null,font_color:null,border_style:"bottom",border_width:1,border_color:null,border_transparency:.25,border_radius:3});function ss(t,e,n){for(var r in this._state=t,us)void 0===this._state[r]&&(this._state[r]=us[r]);return this._layout=n||{},this._styles=new es,this._selector=e,this._createStylesheet(),this}function cs(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function fs(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function hs(){}ss.prototype._createStylesheet=function(){this._stylesheet=document.createElement("style"),this._stylesheet.className="fl-ui-styles-dropdown",document.head.appendChild(this._stylesheet)},ss.prototype.update=function(){this._styles.clear();var t=this._state.background||this._layout.background_color||"#ffffff",e=this._state.font_color||this._layout.font_color||"#333333",n=as(this._state.border_color||e,this._state.border_transparency);this._styles.select(this._selector+" .heading").style("margin-bottom","0.4em"),this._styles.select(this._selector).style("pointer-events","all"),this._styles.select(this._selector+" select").style("display","inline-block").style("cursor","pointer").style("overflow","hidden").style("white-space","nowrap").style("position","relative").style("font-family","inherit").style("background-color",t).style("color",e).style("border","bottom"==this._state.border_style?this._state.border_width+"px solid transparent":this._state.border_width+"px solid "+n).style("border-bottom","bottom"==this._state.border_style?this._state.border_width+"px solid "+n:null).style("border-radius","bottom"==this._state.border_style?null:this._state.border_radius+"px"),this._styles.select(this._selector+":after").style("right","bottom"==this._state.border_style?null:this._state.border_width+5+"px"),this._styles.select(this._selector+" .main .current").style("line-height","1em").style("height","100%").style("max-width","88%").style("display","inline-block").style("overflow","hidden").style("vertical-align","top"),this._styles.select(this._selector+" .list").style("top","2px").style("min-width","100%").style("padding","2px").style("display","none").style("max-height","200px").style("overflow-y","auto").style("box-shadow","0 1px 4px rgba(0, 0, 0, .1)").style("margin-top","2px").select(".list-item").style("line-height","1em").style("cursor","pointer").style("font-weight","normal").style("color",e),this._styles.select(this._selector+".open .list").style("display","block").style("border",this._state.border_width+"px solid "+n).style("background-color",t).style("z-index","1").style("animation","dropdown-out 200ms"),this._styles.select(this._selector+" .list-item:hover").style("opacity","0.6"),this._styles.select(this._selector+" .list-item.selected, "+this._selector+" .list-item.selected:hover").style("opacity","1").style("cursor","default"),"bottom"==this._state.border_style&&this._styles.select(this._selector+" .main").style("padding-left",0).style("padding-right","0.1rem"),this._stylesheet.innerHTML=this._styles.print()};var ds=.7,gs=1/ds,ps="\\s*([+-]?\\d+)\\s*",_s="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",bs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ms=/^#([0-9a-f]{3,8})$/,ys=new RegExp(`^rgb\\(${ps},${ps},${ps}\\)$`),vs=new RegExp(`^rgb\\(${bs},${bs},${bs}\\)$`),xs=new RegExp(`^rgba\\(${ps},${ps},${ps},${_s}\\)$`),ws=new RegExp(`^rgba\\(${bs},${bs},${bs},${_s}\\)$`),ks=new RegExp(`^hsl\\(${_s},${bs},${bs}\\)$`),Ms=new RegExp(`^hsla\\(${_s},${bs},${bs},${_s}\\)$`),Ts={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function As(){return this.rgb().formatHex()}function Ns(){return this.rgb().formatRgb()}function Cs(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ms.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Ss(e):3===n?new Ds(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Es(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Es(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=ys.exec(t))?new Ds(e[1],e[2],e[3],1):(e=vs.exec(t))?new Ds(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=xs.exec(t))?Es(e[1],e[2],e[3],e[4]):(e=ws.exec(t))?Es(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=ks.exec(t))?Ls(e[1],e[2]/100,e[3]/100,1):(e=Ms.exec(t))?Ls(e[1],e[2]/100,e[3]/100,e[4]):Ts.hasOwnProperty(t)?Ss(Ts[t]):"transparent"===t?new Ds(NaN,NaN,NaN,0):null}function Ss(t){return new Ds(t>>16&255,t>>8&255,255&t,1)}function Es(t,e,n,r){return r<=0&&(t=e=n=NaN),new Ds(t,e,n,r)}function zs(t){return t instanceof hs||(t=Cs(t)),t?new Ds((t=t.rgb()).r,t.g,t.b,t.opacity):new Ds}function Ds(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Fs(){return`#${Hs(this.r)}${Hs(this.g)}${Hs(this.b)}`}function Os(){const t=js(this.opacity);return`${1===t?"rgb(":"rgba("}${Us(this.r)}, ${Us(this.g)}, ${Us(this.b)}${1===t?")":`, ${t})`}`}function js(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Us(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Hs(t){return((t=Us(t))<16?"0":"")+t.toString(16)}function Ls(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ys(t,e,n,r)}function qs(t){if(t instanceof Ys)return new Ys(t.h,t.s,t.l,t.opacity);if(t instanceof hs||(t=Cs(t)),!t)return new Ys;if(t instanceof Ys)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,l=a-i,u=(a+i)/2;return l?(o=e===a?(n-r)/l+6*(n<r):n===a?(r-e)/l+2:(e-n)/l+4,l/=u<.5?a+i:2-a-i,o*=60):l=u>0&&u<1?0:o,new Ys(o,l,u,t.opacity)}function Ps(t,e,n,r){return 1===arguments.length?qs(t):new Ys(t,e,n,null==r?1:r)}function Ys(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function $s(t){return(t=(t||0)%360)<0?t+360:t}function Rs(t){return Math.max(0,Math.min(1,t||0))}function Bs(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}cs(hs,Cs,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:As,formatHex:As,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return qs(this).formatHsl()},formatRgb:Ns,toString:Ns}),cs(Ds,(function(t,e,n,r){return 1===arguments.length?zs(t):new Ds(t,e,n,null==r?1:r)}),fs(hs,{brighter(t){return t=null==t?gs:Math.pow(gs,t),new Ds(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?ds:Math.pow(ds,t),new Ds(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ds(Us(this.r),Us(this.g),Us(this.b),js(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Fs,formatHex:Fs,formatHex8:function(){return`#${Hs(this.r)}${Hs(this.g)}${Hs(this.b)}${Hs(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Os,toString:Os})),cs(Ys,Ps,fs(hs,{brighter(t){return t=null==t?gs:Math.pow(gs,t),new Ys(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?ds:Math.pow(ds,t),new Ys(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Ds(Bs(t>=240?t-240:t+120,i,r),Bs(t,i,r),Bs(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Ys($s(this.h),Rs(this.s),Rs(this.l),js(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=js(this.opacity);return`${1===t?"hsl(":"hsla("}${$s(this.h)}, ${100*Rs(this.s)}%, ${100*Rs(this.l)}%${1===t?")":`, ${t})`}`}}));const Is=Math.PI/180,Ws=180/Math.PI,Vs=.96422,Xs=.82521,Zs=4/29,Gs=6/29,Qs=3*Gs*Gs,Js=Gs*Gs*Gs;function Ks(t){if(t instanceof tc)return new tc(t.l,t.a,t.b,t.opacity);if(t instanceof oc)return lc(t);t instanceof Ds||(t=zs(t));var e,n,r=ic(t.r),i=ic(t.g),a=ic(t.b),o=ec((.2225045*r+.7168786*i+.0606169*a)/1);return r===i&&i===a?e=n=o:(e=ec((.4360747*r+.3850649*i+.1430804*a)/Vs),n=ec((.0139322*r+.0971045*i+.7141733*a)/Xs)),new tc(116*o-16,500*(e-o),200*(o-n),t.opacity)}function tc(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function ec(t){return t>Js?Math.pow(t,1/3):t/Qs+Zs}function nc(t){return t>Gs?t*t*t:Qs*(t-Zs)}function rc(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function ic(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ac(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof oc)return new oc(t.h,t.c,t.l,t.opacity);if(t instanceof tc||(t=Ks(t)),0===t.a&&0===t.b)return new oc(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*Ws;return new oc(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}(t):new oc(t,e,n,null==r?1:r)}function oc(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function lc(t){if(isNaN(t.h))return new tc(t.l,0,0,t.opacity);var e=t.h*Is;return new tc(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}cs(tc,(function(t,e,n,r){return 1===arguments.length?Ks(t):new tc(t,e,n,null==r?1:r)}),fs(hs,{brighter(t){return new tc(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker(t){return new tc(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new Ds(rc(3.1338561*(e=Vs*nc(e))-1.6168667*(t=1*nc(t))-.4906146*(n=Xs*nc(n))),rc(-.9787684*e+1.9161415*t+.033454*n),rc(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),cs(oc,ac,fs(hs,{brighter(t){return new oc(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker(t){return new oc(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb(){return lc(this).rgb()}}));const uc="undefined"!=typeof window&&"undefined"!=typeof document&&"function"==typeof document.createElement&&"function"==typeof document.body?.appendChild&&"undefined"!=typeof HTMLElement,sc=document.createElement("canvas"),cc=sc.getContext("2d"),fc=document.createElementNS("http://www.w3.org/2000/svg","svg"),hc=document.createElementNS("http://www.w3.org/2000/svg","text");fc.appendChild(hc),uc&&(sc.style.position="fixed",sc.style.left="1000vw",fc.style.position="fixed",fc.style.left="1000vw",document.body.appendChild(sc),document.body.appendChild(fc));let dc=null;function gc(t,e,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];"string"!=typeof t&&(t=String(t));const a=t=>cc.measureTextWithTnums(t).width>r,o=(t,e)=>{let n=cc.measureText(t).width;if(n<=e)return t;let r=1,i=t;do{i=t.substring(0,t.length-r)+"…",n=cc.measureTextWithTnums(i).width}while(n>e&&++r<t.length);return i.length<1&&(i=t.substring(0,1)+"…"),i};cc.font=e;let l=[];if(Object.defineProperty(l,"widest_line",{value:0,enumerable:!0,writable:!0}),Object.defineProperty(l,"has_truncated",{value:!1,enumerable:!0,writable:!0}),void 0===t||Number.isInteger(n)&&n<=0)return l;if(0===t.length)return l.push(""),l;if(r<=0)return t.length>0&&(l.push(t.slice(0,1)+"…"),l.widest_line=cc.measureTextWithTnums(l[0]).width),l;if(!t||0===t.length||0===n||r<=0)return l;const u=t.split(/\s+/g);if(!a(t))return l.push(t),l.widest_line=cc.measureTextWithTnums(t).width,l.has_truncated=!1,l;let s=new String(u[0]);if(s&&a(s))return i?s=o(s,r):u.length>1&&(s+="…"),l.push(s),l.widest_line=cc.measureTextWithTnums(s).width,l.has_truncated=!0,l;let c="",f=!1;if(u.forEach((t=>{if(!f)if(a(c+(c?" ":"")+t)){if(c){cc.measureTextWithTnums(c).width>r&&(c=o(c,r),f=!0),l.push(c),c=""}c=t}else c+=(c?" ":"")+t})),c&&!f&&l.push(o(c,r)),l.length>n){if(l.length>n&&Number.isInteger(n)){l.splice(n,l.length-n);let t=l[l.length-1];a(t+"…")&&(t=o(t,r-cc.measureTextWithTnums("…").width)),"…"!==t.slice(-1)&&(t+="…"),l[l.length-1]=t,f=!0}}return l.widest_line=Math.max(...l.map((t=>cc.measureTextWithTnums(t).width))),l.has_truncated=f,l}var pc,_c,bc;function mc(){document.body.querySelector(".font-samples").innerHTML=""}function yc(t){bc||(bc=t||["normal","bold"]);var e="";["mobile_big","tablet","desktop","big_screen"].forEach((function(t){var n="@media(min-width: "+Ng["breakpoint_"+t]+"px) {\n",r="html { font-size:"+Ng["font_size_"+t]+"%; }";e+=n+r+"\n}\n\n"}));var n="html { \n font-size:"+Ng.font_size_mobile_small+"%; \n -webkit-font-smoothing: antialiased; \n -moz-osx-font-smoothing: auto; } \n\n\n";pc.innerHTML=n+e;var r=[Ng.body_font,Ng.title_font,Ng.subtitle_font,Ng.footer_font];r.forEach((function(t){if(t){for(var e=!1,n=document.head.querySelectorAll("link.layout-font"),r=0;r<n.length;r++){n[r].href==t.url&&(e=!0)}if(!e){var i=document.createElement("link");i.setAttribute("rel","stylesheet"),i.setAttribute("href",t.url),i.className="layout-font",document.head.appendChild(i),function(t){document.body.querySelector(".font-samples")||((_c=document.createElement("div")).className="font-samples",_c.style.visibility="hidden",_c.style.overflow="hidden",_c.style.height=0,document.body.appendChild(_c)),bc.forEach((function(e){var n=document.createElement("div");n.className="font-sample-el",n.innerText=t.name,n.style.fontFamily=t.name,n.style.fontWeight=e,_c.appendChild(n)}))}(t)}}}));for(var i=document.head.querySelectorAll("link.layout-font"),a=0;a<i.length;a++){var o=i[a],l=!1;r.forEach((function(t){t&&t.url==o.href&&(l=!0)})),l||o.parentElement.removeChild(o)}document.body.style.fontFamily=Ng.body_font.name}cc.measureTextWithTnums=function(t){if(!uc)return cc.measureText(t);const e=window.getComputedStyle(this.canvas);if(!((e.fontFeatureSettings||"").includes("tnum")||(e.fontVariantNumeric||"").includes("tabular-nums")))return this.measureText(t);if(null===dc&&function(){const t="0123456789.,£",e=document.createElement("canvas"),n=document.createElement("canvas"),r=e.getContext("2d"),i=n.getContext("2d");e.setAttribute("style","font-feature-settings: normal; font-variant-numeric: normal; position: fixed; left: 1000vw;"),n.setAttribute("style",'font-feature-settings: "tnum" 1; font-variant-numeric: tabular-nums; position: fixed; left: 1000vw;'),r.font=i.font=cc.font,document.body.appendChild(e),document.body.appendChild(n);const a=r.measureText(t).width,o=i.measureText(t).width;dc=a!==o,document.body.removeChild(e),document.body.removeChild(n)}(),dc)return this.measureText(t);hc.textContent=t,hc.setAttribute("style",`font: ${cc.font}; font-feature-settings: 'tnum' 1; font-variant-numeric: tabular-nums; position: fixed; left: 1000vw;`);let n=hc.getBBox().width;return{...this.measureText(t),width:n}};var vc,xc,wc,kc,Mc,Tc,Ac,Nc,Cc,Sc,Ec=Object.freeze({"stack-default":["header","controls","legend","primary","footer"],"stack-2":["primary","header","controls","legend","footer"],"stack-3":["header","primary","controls","legend","footer"],"stack-4":["controls","primary","header","legend","footer"],"stack-5":["header","controls","primary","legend","footer"],"stack-6":["header","legend","primary","controls","footer"],"grid-1":{wrapper:{display:"grid","grid-template-rows":"min-content min-content minmax(min-content,auto) min-content","grid-template-columns":"1fr 2fr"},header:{"grid-column-start":1},legend:{"grid-column-start":1},controls:{"grid-column-start":1},primary:{"grid-column-start":2,"grid-row":"1 / -1"},footer:{"grid-column-start":"1","grid-row-start":4}}});function zc(t){return window.innerWidth!==vc&&(vc=window.innerWidth,xc=parseFloat(getComputedStyle(document.documentElement).fontSize)),t*xc}function Dc(t){return"justify"==t?"":"left"==t?"start":"right"==t?"end":"center"==t?"center":void 0}function Fc(t){return 0!==t.indexOf("http://")&&0!==t.indexOf("https://")?"http://"+t:t}function Oc(){return Ng.header_logo_enabled&&Ng.header_logo_src}function jc(){var t="top"==Ng.header_border||"top_and_bottom"==Ng.header_border,e="bottom"==Ng.header_border||"top_and_bottom"==Ng.header_border;wc.style.textAlign=Dc(Ng.header_align),wc.style.margin=0,wc.style.borderTop=t?Ng.header_border_width+"px "+Ng.header_border_style+" "+Ng.header_border_color:null,wc.style.borderBottom=e?Ng.header_border_width+"px "+Ng.header_border_style+" "+Ng.header_border_color:null,wc.style.paddingTop=t?Ng.header_border_space+"rem":"",wc.style.paddingBottom=e?Ng.header_border_space+"rem":"",kc.innerHTML=Ng.title?Ng.title:"",kc.setAttribute("id","flourish-header-title"),kc.style.fontFamily=Ng.title_font?Ng.title_font.name:"inherit",kc.style.fontSize=("custom"!=Ng.title_size?Ng.title_size:Ng.title_size_custom)+"rem",kc.style.lineHeight=Ng.title_line_height,kc.style.fontWeight=Ng.title_weight,kc.style.color=Ng.title_color||Ng.font_color,kc.style.margin=0,kc.style.paddingTop=Ng.title?("custom"==Ng.title_space_above?Ng.title_space_above_custom:Ng.title_space_above)+"rem":0,Mc.innerHTML=Ng.subtitle?Ng.subtitle:"",Mc.setAttribute("id","flourish-header-subtitle"),Mc.style.fontFamily=Ng.subtitle_font?Ng.subtitle_font.name:"inherit",Mc.style.fontSize=("custom"!=Ng.subtitle_size?Ng.subtitle_size:Ng.subtitle_size_custom)+"rem",Mc.style.lineHeight=Ng.subtitle_line_height,Mc.style.fontWeight=Ng.subtitle_weight,Mc.style.color=Ng.subtitle_color||Ng.font_color,Mc.style.margin=0,Mc.style.paddingTop=Ng.subtitle?("custom"==Ng.subtitle_space_above?Ng.subtitle_space_above_custom:Ng.subtitle_space_above)+"rem":0,Tc.innerHTML=Ng.header_text?Ng.header_text:"",Tc.setAttribute("id","flourish-header-text"),Tc.style.fontSize=("custom"!=Ng.header_text_size?Ng.header_text_size:Ng.header_text_size_custom)+"rem",Tc.style.lineHeight=Ng.header_text_line_height,Tc.style.fontWeight=Ng.header_text_weight,Tc.style.margin=0,Tc.style.color=Ng.header_text_color||Ng.font_color,Tc.style.paddingTop=Ng.header_text?("custom"==Ng.header_text_space_above?Ng.header_text_space_above_custom:Ng.header_text_space_above)+"rem":0,Ac.style.clear="both",Nc.innerHTML="",Oc()&&((Cc=Cc||document.createElement("img")).className="flourish-header-logo",Cc.src=Fc(Ng.header_logo_src),Cc.alt=Ng.header_logo_alt,Cc.style.position="inside"==Ng.header_logo_align?"":"fixed",Cc.style.height=Ng.header_logo_height+"rem",Cc.style.top="outside"==Ng.header_logo_align?0:"",Cc.style.left="outside"==Ng.header_logo_align&&"left"==Ng.header_logo_position_outside?0:"",Cc.style.right="outside"==Ng.header_logo_align&&"right"==Ng.header_logo_position_outside?0:"",Cc.style.marginTop=Ng.header_logo_margin_top+"rem",Cc.style.marginBottom=Ng.header_logo_margin_bottom+"rem",Cc.style.marginLeft=Ng.header_logo_margin_left+"rem",Cc.style.marginRight=Ng.header_logo_margin_right+"rem",Cc.style.float="top"==Ng.header_logo_position_inside||"outside"==Ng.header_logo_align?"":Ng.header_logo_position_inside,Cc.style.width="auto",Ng.header_logo_link_url?((Sc=document.createElement("a")).target="_blank",Sc.appendChild(Cc),Nc.appendChild(Sc),Cc.style.cursor="pointer",Sc.href=Fc(Ng.header_logo_link_url)):Nc.appendChild(Cc))}
/** @preserve
	/////    SAPC APCA - Advanced Perceptual Contrast Algorithm
	/////           Beta 0.1.9 W3 • contrast function only
	/////           DIST: W3 • Revision date: July 3, 2022
	/////    Function to parse color values and determine Lc contrast
	/////    Copyright © 2019-2022 by Andrew Somers. All Rights Reserved.
	/////    LICENSE: W3 LICENSE
	/////    CONTACT: Please use the ISSUES or DISCUSSIONS tab at:
	/////    https://github.com/Myndex/SAPC-APCA/
	/////
	///////////////////////////////////////////////////////////////////////////////
	/////
	/////    MINIMAL IMPORTS:
	/////      import { APCAcontrast, sRGBtoY, displayP3toY,
	/////               calcAPCA, fontLookupAPCA } from 'apca-w3';
	/////      import { colorParsley } from 'colorparsley';
	/////
	/////    FORWARD CONTRAST USAGE:
	/////      Lc = APCAcontrast( sRGBtoY( TEXTcolor ) , sRGBtoY( BACKGNDcolor ) );
	/////    Where the colors are sent as an rgba array [255,255,255,1]
	/////
	/////    Retrieving an array of font sizes for the contrast:
	/////      fontArray = fontLookupAPCA(Lc);
	/////
	/////    Live Demonstrator at https://www.myndex.com/APCA/
	// */
const Uc={mainTRC:2.4,get mainTRCencode(){return 1/this.mainTRC},sRco:.2126729,sGco:.7151522,sBco:.072175,normBG:.56,normTXT:.57,revTXT:.62,revBG:.65,blkThrs:.022,blkClmp:1.414,scaleBoW:1.14,scaleWoB:1.14,loBoWoffset:.027,loWoBoffset:.027,deltaYmin:5e-4,loClip:.1,mFactor:1.9468554433171,get mFactInv(){return 1/this.mFactor},mOffsetIn:.0387393816571401,mExpAdj:.283343396420869,get mExp(){return this.mExpAdj/this.blkClmp},mOffsetOut:.312865795870758};function Hc(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0];function e(t){return Math.pow(t/255,Uc.mainTRC)}return Uc.sRco*e(t[0])+Uc.sGco*e(t[1])+Uc.sBco*e(t[2])}function Lc(t,e){if("string"!=typeof t)return!1;var n=Cs(t);return n.opacity=1,n}function qc(t,e){if(!t||!e)return void console.warn("No valid color",t,e);const n=Hc(Object.values(Lc(t))),r=Hc(Object.values(Lc(e)));return Math.abs(function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;const r=[0,1.1];if(isNaN(t)||isNaN(e)||Math.min(t,e)<r[0]||Math.max(t,e)>r[1])return 0;let i=0,a=0,o="BoW";return t=t>Uc.blkThrs?t:t+Math.pow(Uc.blkThrs-t,Uc.blkClmp),e=e>Uc.blkThrs?e:e+Math.pow(Uc.blkThrs-e,Uc.blkClmp),Math.abs(e-t)<Uc.deltaYmin?0:(e>t?(i=(Math.pow(e,Uc.normBG)-Math.pow(t,Uc.normTXT))*Uc.scaleBoW,a=i<Uc.loClip?0:i-Uc.loBoWoffset):(o="WoB",i=(Math.pow(e,Uc.revBG)-Math.pow(t,Uc.revTXT))*Uc.scaleWoB,a=i>-Uc.loClip?0:i+Uc.loWoBoffset),n<0?100*a:0==n?Math.round(100*Math.abs(a))+"<sub>"+o+"</sub>":Number.isInteger(n)?(100*a).toFixed(n):0)}(n,r))}const Pc=new Date,Yc=new Date;function $c(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=e=>(t(e=new Date(+e)),e),i.ceil=n=>(t(n=new Date(n-1)),e(n,1),t(n),n),i.round=t=>{const e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=(t,n)=>(e(t=new Date(+t),null==n?1:Math.floor(n)),t),i.range=(n,r,a)=>{const o=[];if(n=i.ceil(n),a=null==a?1:Math.floor(a),!(n<r&&a>0))return o;let l;do{o.push(l=new Date(+n)),e(n,a),t(n)}while(l<n&&n<r);return o},i.filter=n=>$c((e=>{if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),((t,r)=>{if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););})),n&&(i.count=(e,r)=>(Pc.setTime(+e),Yc.setTime(+r),t(Pc),t(Yc),Math.floor(n(Pc,Yc))),i.every=t=>(t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?e=>r(e)%t==0:e=>i.count(0,e)%t==0):i:null)),i}const Rc=6e4,Bc=864e5,Ic=6048e5,Wc=$c((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Rc)/Bc),(t=>t.getDate()-1));Wc.range;const Vc=$c((t=>{t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+e)}),((t,e)=>(e-t)/Bc),(t=>t.getUTCDate()-1));Vc.range;const Xc=$c((t=>{t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+e)}),((t,e)=>(e-t)/Bc),(t=>Math.floor(t/Bc)));function Zc(t){return $c((e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),((t,e)=>{t.setDate(t.getDate()+7*e)}),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Rc)/Ic))}Xc.range;const Gc=Zc(0),Qc=Zc(1),Jc=Zc(2),Kc=Zc(3),tf=Zc(4),ef=Zc(5),nf=Zc(6);function rf(t){return $c((e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+7*e)}),((t,e)=>(e-t)/Ic))}Gc.range,Qc.range,Jc.range,Kc.range,tf.range,ef.range,nf.range;const af=rf(0),of=rf(1),lf=rf(2),uf=rf(3),sf=rf(4),cf=rf(5),ff=rf(6);af.range,of.range,lf.range,uf.range,sf.range,cf.range,ff.range;const hf=$c((t=>{t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,e)=>{t.setFullYear(t.getFullYear()+e)}),((t,e)=>e.getFullYear()-t.getFullYear()),(t=>t.getFullYear()));hf.every=t=>isFinite(t=Math.floor(t))&&t>0?$c((e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),((e,n)=>{e.setFullYear(e.getFullYear()+n*t)})):null,hf.range;const df=$c((t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)}),((t,e)=>e.getUTCFullYear()-t.getUTCFullYear()),(t=>t.getUTCFullYear()));function gf(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function pf(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function _f(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}df.every=t=>isFinite(t=Math.floor(t))&&t>0?$c((e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),((e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null,df.range;var bf,mf,yf={"-":"",_:" ",0:"0"},vf=/^\s*\d+/,xf=/^%/,wf=/[\\^$*+?|[\]().{}]/g;function kf(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function Mf(t){return t.replace(wf,"\\$&")}function Tf(t){return new RegExp("^(?:"+t.map(Mf).join("|")+")","i")}function Af(t){return new Map(t.map(((t,e)=>[t.toLowerCase(),e])))}function Nf(t,e,n){var r=vf.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Cf(t,e,n){var r=vf.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Sf(t,e,n){var r=vf.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Ef(t,e,n){var r=vf.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function zf(t,e,n){var r=vf.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Df(t,e,n){var r=vf.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Ff(t,e,n){var r=vf.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Of(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function jf(t,e,n){var r=vf.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function Uf(t,e,n){var r=vf.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Hf(t,e,n){var r=vf.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Lf(t,e,n){var r=vf.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function qf(t,e,n){var r=vf.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Pf(t,e,n){var r=vf.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Yf(t,e,n){var r=vf.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function $f(t,e,n){var r=vf.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Rf(t,e,n){var r=vf.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Bf(t,e,n){var r=xf.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function If(t,e,n){var r=vf.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Wf(t,e,n){var r=vf.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function Vf(t,e){return kf(t.getDate(),e,2)}function Xf(t,e){return kf(t.getHours(),e,2)}function Zf(t,e){return kf(t.getHours()%12||12,e,2)}function Gf(t,e){return kf(1+Wc.count(hf(t),t),e,3)}function Qf(t,e){return kf(t.getMilliseconds(),e,3)}function Jf(t,e){return Qf(t,e)+"000"}function Kf(t,e){return kf(t.getMonth()+1,e,2)}function th(t,e){return kf(t.getMinutes(),e,2)}function eh(t,e){return kf(t.getSeconds(),e,2)}function nh(t){var e=t.getDay();return 0===e?7:e}function rh(t,e){return kf(Gc.count(hf(t)-1,t),e,2)}function ih(t){var e=t.getDay();return e>=4||0===e?tf(t):tf.ceil(t)}function ah(t,e){return t=ih(t),kf(tf.count(hf(t),t)+(4===hf(t).getDay()),e,2)}function oh(t){return t.getDay()}function lh(t,e){return kf(Qc.count(hf(t)-1,t),e,2)}function uh(t,e){return kf(t.getFullYear()%100,e,2)}function sh(t,e){return kf((t=ih(t)).getFullYear()%100,e,2)}function ch(t,e){return kf(t.getFullYear()%1e4,e,4)}function fh(t,e){var n=t.getDay();return kf((t=n>=4||0===n?tf(t):tf.ceil(t)).getFullYear()%1e4,e,4)}function hh(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+kf(e/60|0,"0",2)+kf(e%60,"0",2)}function dh(t,e){return kf(t.getUTCDate(),e,2)}function gh(t,e){return kf(t.getUTCHours(),e,2)}function ph(t,e){return kf(t.getUTCHours()%12||12,e,2)}function _h(t,e){return kf(1+Vc.count(df(t),t),e,3)}function bh(t,e){return kf(t.getUTCMilliseconds(),e,3)}function mh(t,e){return bh(t,e)+"000"}function yh(t,e){return kf(t.getUTCMonth()+1,e,2)}function vh(t,e){return kf(t.getUTCMinutes(),e,2)}function xh(t,e){return kf(t.getUTCSeconds(),e,2)}function wh(t){var e=t.getUTCDay();return 0===e?7:e}function kh(t,e){return kf(af.count(df(t)-1,t),e,2)}function Mh(t){var e=t.getUTCDay();return e>=4||0===e?sf(t):sf.ceil(t)}function Th(t,e){return t=Mh(t),kf(sf.count(df(t),t)+(4===df(t).getUTCDay()),e,2)}function Ah(t){return t.getUTCDay()}function Nh(t,e){return kf(of.count(df(t)-1,t),e,2)}function Ch(t,e){return kf(t.getUTCFullYear()%100,e,2)}function Sh(t,e){return kf((t=Mh(t)).getUTCFullYear()%100,e,2)}function Eh(t,e){return kf(t.getUTCFullYear()%1e4,e,4)}function zh(t,e){var n=t.getUTCDay();return kf((t=n>=4||0===n?sf(t):sf.ceil(t)).getUTCFullYear()%1e4,e,4)}function Dh(){return"+0000"}function Fh(){return"%"}function Oh(t){return+t}function jh(t){return Math.floor(+t/1e3)}!function(t){bf=function(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,l=t.months,u=t.shortMonths,s=Tf(i),c=Af(i),f=Tf(a),h=Af(a),d=Tf(o),g=Af(o),p=Tf(l),_=Af(l),b=Tf(u),m=Af(u),y={a:function(t){return o[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return l[t.getMonth()]},c:null,d:Vf,e:Vf,f:Jf,g:sh,G:fh,H:Xf,I:Zf,j:Gf,L:Qf,m:Kf,M:th,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Oh,s:jh,S:eh,u:nh,U:rh,V:ah,w:oh,W:lh,x:null,X:null,y:uh,Y:ch,Z:hh,"%":Fh},v={a:function(t){return o[t.getUTCDay()]},A:function(t){return a[t.getUTCDay()]},b:function(t){return u[t.getUTCMonth()]},B:function(t){return l[t.getUTCMonth()]},c:null,d:dh,e:dh,f:mh,g:Sh,G:zh,H:gh,I:ph,j:_h,L:bh,m:yh,M:vh,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Oh,s:jh,S:xh,u:wh,U:kh,V:Th,w:Ah,W:Nh,x:null,X:null,y:Ch,Y:Eh,Z:Dh,"%":Fh},x={a:function(t,e,n){var r=d.exec(e.slice(n));return r?(t.w=g.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(t,e,n){var r=f.exec(e.slice(n));return r?(t.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(t,e,n){var r=b.exec(e.slice(n));return r?(t.m=m.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(t,e,n){var r=p.exec(e.slice(n));return r?(t.m=_.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(t,n,r){return M(t,e,n,r)},d:Hf,e:Hf,f:Rf,g:Ff,G:Df,H:qf,I:qf,j:Lf,L:$f,m:Uf,M:Pf,p:function(t,e,n){var r=s.exec(e.slice(n));return r?(t.p=c.get(r[0].toLowerCase()),n+r[0].length):-1},q:jf,Q:If,s:Wf,S:Yf,u:Cf,U:Sf,V:Ef,w:Nf,W:zf,x:function(t,e,r){return M(t,n,e,r)},X:function(t,e,n){return M(t,r,e,n)},y:Ff,Y:Df,Z:Of,"%":Bf};function w(t,e){return function(n){var r,i,a,o=[],l=-1,u=0,s=t.length;for(n instanceof Date||(n=new Date(+n));++l<s;)37===t.charCodeAt(l)&&(o.push(t.slice(u,l)),null!=(i=yf[r=t.charAt(++l)])?r=t.charAt(++l):i="e"===r?" ":"0",(a=e[r])&&(r=a(n,i)),o.push(r),u=l+1);return o.push(t.slice(u,l)),o.join("")}}function k(t,e){return function(n){var r,i,a=_f(1900,void 0,1);if(M(a,t,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(e&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(r=pf(_f(a.y,0,1))).getUTCDay(),r=i>4||0===i?of.ceil(r):of(r),r=Vc.offset(r,7*(a.V-1)),a.y=r.getUTCFullYear(),a.m=r.getUTCMonth(),a.d=r.getUTCDate()+(a.w+6)%7):(i=(r=gf(_f(a.y,0,1))).getDay(),r=i>4||0===i?Qc.ceil(r):Qc(r),r=Wc.offset(r,7*(a.V-1)),a.y=r.getFullYear(),a.m=r.getMonth(),a.d=r.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),i="Z"in a?pf(_f(a.y,0,1)).getUTCDay():gf(_f(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,pf(a)):gf(a)}}function M(t,e,n,r){for(var i,a,o=0,l=e.length,u=n.length;o<l;){if(r>=u)return-1;if(37===(i=e.charCodeAt(o++))){if(i=e.charAt(o++),!(a=x[i in yf?e.charAt(o++):i])||(r=a(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return y.x=w(n,y),y.X=w(r,y),y.c=w(e,y),v.x=w(n,v),v.X=w(r,v),v.c=w(e,v),{format:function(t){var e=w(t+="",y);return e.toString=function(){return t},e},parse:function(t){var e=k(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=w(t+="",v);return e.toString=function(){return t},e},utcParse:function(t){var e=k(t+="",!0);return e.toString=function(){return t},e}}}(t),mf=bf.format,bf.parse,bf.utcFormat,bf.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Uh=Uint8Array,Hh=Uint16Array,Lh=Int32Array,qh=new Uh([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ph=new Uh([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Yh=new Uh([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),$h=function(t,e){for(var n=new Hh(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];var i=new Lh(n[30]);for(r=1;r<30;++r)for(var a=n[r];a<n[r+1];++a)i[a]=a-n[r]<<5|r;return{b:n,r:i}},Rh=$h(qh,2),Bh=Rh.b,Ih=Rh.r;Bh[28]=258,Ih[258]=28;for(var Wh=$h(Ph,0).r,Vh=new Hh(32768),Xh=0;Xh<32768;++Xh){var Zh=(43690&Xh)>>1|(21845&Xh)<<1;Zh=(61680&(Zh=(52428&Zh)>>2|(13107&Zh)<<2))>>4|(3855&Zh)<<4,Vh[Xh]=((65280&Zh)>>8|(255&Zh)<<8)>>1}var Gh=function(t,e,n){for(var r=t.length,i=0,a=new Hh(e);i<r;++i)t[i]&&++a[t[i]-1];var o,l=new Hh(e);for(i=1;i<e;++i)l[i]=l[i-1]+a[i-1]<<1;if(n){o=new Hh(1<<e);var u=15-e;for(i=0;i<r;++i)if(t[i])for(var s=i<<4|t[i],c=e-t[i],f=l[t[i]-1]++<<c,h=f|(1<<c)-1;f<=h;++f)o[Vh[f]>>u]=s}else for(o=new Hh(r),i=0;i<r;++i)t[i]&&(o[i]=Vh[l[t[i]-1]++]>>15-t[i]);return o},Qh=new Uh(288);for(Xh=0;Xh<144;++Xh)Qh[Xh]=8;for(Xh=144;Xh<256;++Xh)Qh[Xh]=9;for(Xh=256;Xh<280;++Xh)Qh[Xh]=7;for(Xh=280;Xh<288;++Xh)Qh[Xh]=8;var Jh=new Uh(32);for(Xh=0;Xh<32;++Xh)Jh[Xh]=5;var Kh=Gh(Qh,9,0),td=Gh(Jh,5,0),ed=function(t){return(t+7)/8|0},nd=function(t,e,n){return(null==n||n>t.length)&&(n=t.length),new Uh(t.subarray(e,n))},rd=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],id=function(t,e,n){var r=new Error(e||rd[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,id),!n)throw r;return r},ad=function(t,e,n){n<<=7&e;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},od=function(t,e,n){n<<=7&e;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},ld=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,a=n.slice();if(!i)return{t:gd,l:0};if(1==i){var o=new Uh(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort((function(t,e){return t.f-e.f})),n.push({s:-1,f:25001});var l=n[0],u=n[1],s=0,c=1,f=2;for(n[0]={s:-1,f:l.f+u.f,l:l,r:u};c!=i-1;)l=n[n[s].f<n[f].f?s++:f++],u=n[s!=c&&n[s].f<n[f].f?s++:f++],n[c++]={s:-1,f:l.f+u.f,l:l,r:u};var h=a[0].s;for(r=1;r<i;++r)a[r].s>h&&(h=a[r].s);var d=new Hh(h+1),g=ud(n[c-1],d,0);if(g>e){r=0;var p=0,_=g-e,b=1<<_;for(a.sort((function(t,e){return d[e.s]-d[t.s]||t.f-e.f}));r<i;++r){var m=a[r].s;if(!(d[m]>e))break;p+=b-(1<<g-d[m]),d[m]=e}for(p>>=_;p>0;){var y=a[r].s;d[y]<e?p-=1<<e-d[y]++-1:++r}for(;r>=0&&p;--r){var v=a[r].s;d[v]==e&&(--d[v],++p)}g=e}return{t:new Uh(d),l:g}},ud=function(t,e,n){return-1==t.s?Math.max(ud(t.l,e,n+1),ud(t.r,e,n+1)):e[t.s]=n},sd=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Hh(++e),r=0,i=t[0],a=1,o=function(t){n[r++]=t},l=1;l<=e;++l)if(t[l]==i&&l!=e)++a;else{if(!i&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(i),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(i);a=1,i=t[l]}return{c:n.subarray(0,r),n:e}},cd=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},fd=function(t,e,n){var r=n.length,i=ed(e+2);t[i]=255&r,t[i+1]=r>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<r;++a)t[i+a+4]=n[a];return 8*(i+4+r)},hd=function(t,e,n,r,i,a,o,l,u,s,c){ad(e,c++,n),++i[256];for(var f=ld(i,15),h=f.t,d=f.l,g=ld(a,15),p=g.t,_=g.l,b=sd(h),m=b.c,y=b.n,v=sd(p),x=v.c,w=v.n,k=new Hh(19),M=0;M<m.length;++M)++k[31&m[M]];for(M=0;M<x.length;++M)++k[31&x[M]];for(var T=ld(k,7),A=T.t,N=T.l,C=19;C>4&&!A[Yh[C-1]];--C);var S,E,z,D,F=s+5<<3,O=cd(i,Qh)+cd(a,Jh)+o,j=cd(i,h)+cd(a,p)+o+14+3*C+cd(k,A)+2*k[16]+3*k[17]+7*k[18];if(u>=0&&F<=O&&F<=j)return fd(e,c,t.subarray(u,u+s));if(ad(e,c,1+(j<O)),c+=2,j<O){S=Gh(h,d,0),E=h,z=Gh(p,_,0),D=p;var U=Gh(A,N,0);ad(e,c,y-257),ad(e,c+5,w-1),ad(e,c+10,C-4),c+=14;for(M=0;M<C;++M)ad(e,c+3*M,A[Yh[M]]);c+=3*C;for(var H=[m,x],L=0;L<2;++L){var q=H[L];for(M=0;M<q.length;++M){var P=31&q[M];ad(e,c,U[P]),c+=A[P],P>15&&(ad(e,c,q[M]>>5&127),c+=q[M]>>12)}}}else S=Kh,E=Qh,z=td,D=Jh;for(M=0;M<l;++M){var Y=r[M];if(Y>255){od(e,c,S[(P=Y>>18&31)+257]),c+=E[P+257],P>7&&(ad(e,c,Y>>23&31),c+=qh[P]);var $=31&Y;od(e,c,z[$]),c+=D[$],$>3&&(od(e,c,Y>>5&8191),c+=Ph[$])}else od(e,c,S[Y]),c+=E[Y]}return od(e,c,S[256]),c+E[256]},dd=new Lh([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),gd=new Uh(0),pd=function(){for(var t=new Int32Array(256),e=0;e<256;++e){for(var n=e,r=9;--r;)n=(1&n&&-306674912)^n>>>1;t[e]=n}return t}(),_d=function(){var t=-1;return{p:function(e){for(var n=t,r=0;r<e.length;++r)n=pd[255&n^e[r]]^n>>>8;t=n},d:function(){return~t}}},bd=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),o=new Uh(a.length+t.length);o.set(a),o.set(t,a.length),t=o,i.w=a.length}return function(t,e,n,r,i,a){var o=a.z||t.length,l=new Uh(r+o+5*(1+Math.ceil(o/7e3))+i),u=l.subarray(r,l.length-i),s=a.l,c=7&(a.r||0);if(e){c&&(u[0]=a.r>>3);for(var f=dd[e-1],h=f>>13,d=8191&f,g=(1<<n)-1,p=a.p||new Hh(32768),_=a.h||new Hh(g+1),b=Math.ceil(n/3),m=2*b,y=function(e){return(t[e]^t[e+1]<<b^t[e+2]<<m)&g},v=new Lh(25e3),x=new Hh(288),w=new Hh(32),k=0,M=0,T=a.i||0,A=0,N=a.w||0,C=0;T+2<o;++T){var S=y(T),E=32767&T,z=_[S];if(p[E]=z,_[S]=E,N<=T){var D=o-T;if((k>7e3||A>24576)&&(D>423||!s)){c=hd(t,u,0,v,x,w,M,A,C,T-C,c),A=k=M=0,C=T;for(var F=0;F<286;++F)x[F]=0;for(F=0;F<30;++F)w[F]=0}var O=2,j=0,U=d,H=E-z&32767;if(D>2&&S==y(T-H))for(var L=Math.min(h,D)-1,q=Math.min(32767,T),P=Math.min(258,D);H<=q&&--U&&E!=z;){if(t[T+O]==t[T+O-H]){for(var Y=0;Y<P&&t[T+Y]==t[T+Y-H];++Y);if(Y>O){if(O=Y,j=H,Y>L)break;var $=Math.min(H,Y-2),R=0;for(F=0;F<$;++F){var B=T-H+F&32767,I=B-p[B]&32767;I>R&&(R=I,z=B)}}}H+=(E=z)-(z=p[E])&32767}if(j){v[A++]=268435456|Ih[O]<<18|Wh[j];var W=31&Ih[O],V=31&Wh[j];M+=qh[W]+Ph[V],++x[257+W],++w[V],N=T+O,++k}else v[A++]=t[T],++x[t[T]]}}for(T=Math.max(T,N);T<o;++T)v[A++]=t[T],++x[t[T]];c=hd(t,u,s,v,x,w,M,A,C,T-C,c),s||(a.r=7&c|u[c/8|0]<<3,c-=7,a.h=_,a.p=p,a.i=T,a.w=N)}else{for(T=a.w||0;T<o+s;T+=65535){var X=T+65535;X>=o&&(u[c/8|0]=s,X=o),c=fd(u,c+1,t.subarray(T,X))}a.i=o}return nd(l,0,r+ed(c)+i)}(t,null==e.level?6:e.level,null==e.mem?i.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):20:12+e.mem,n,r,i)},md=function(t,e){var n={};for(var r in t)n[r]=t[r];for(var r in e)n[r]=e[r];return n},yd=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8};function vd(t,e){return bd(t,e||{},0,0)}var xd=function(t,e,n,r){for(var i in t){var a=t[i],o=e+i,l=r;Array.isArray(a)&&(l=md(r,a[1]),a=a[0]),a instanceof Uh?n[o]=[a,l]:(n[o+="/"]=[new Uh(0),l],xd(a,o,n,r))}},wd="undefined"!=typeof TextEncoder&&new TextEncoder,kd="undefined"!=typeof TextDecoder&&new TextDecoder;try{kd.decode(gd,{stream:!0})}catch(t){}function Md(t,e){if(wd)return wd.encode(t);for(var n=t.length,r=new Uh(t.length+(t.length>>1)),i=0,a=function(t){r[i++]=t},o=0;o<n;++o){if(i+5>r.length){var l=new Uh(i+8+(n-o<<1));l.set(r),r=l}var u=t.charCodeAt(o);u<128||e?a(u):u<2048?(a(192|u>>6),a(128|63&u)):u>55295&&u<57344?(a(240|(u=65536+(1047552&u)|1023&t.charCodeAt(++o))>>18),a(128|u>>12&63),a(128|u>>6&63),a(128|63&u)):(a(224|u>>12),a(128|u>>6&63),a(128|63&u))}return nd(r,0,i)}var Td=function(t){var e=0;if(t)for(var n in t){var r=t[n].length;r>65535&&id(9),e+=r+4}return e},Ad=function(t,e,n,r,i,a,o,l){var u=r.length,s=n.extra,c=l&&l.length,f=Td(s);yd(t,e,null!=o?33639248:67324752),e+=4,null!=o&&(t[e++]=20,t[e++]=n.os),t[e]=20,e+=2,t[e++]=n.flag<<1|(a<0&&8),t[e++]=i&&8,t[e++]=255&n.compression,t[e++]=n.compression>>8;var h=new Date(null==n.mtime?Date.now():n.mtime),d=h.getFullYear()-1980;if((d<0||d>119)&&id(10),yd(t,e,d<<25|h.getMonth()+1<<21|h.getDate()<<16|h.getHours()<<11|h.getMinutes()<<5|h.getSeconds()>>1),e+=4,-1!=a&&(yd(t,e,n.crc),yd(t,e+4,a<0?-a-2:a),yd(t,e+8,n.size)),yd(t,e+12,u),yd(t,e+14,f),e+=16,null!=o&&(yd(t,e,c),yd(t,e+6,n.attrs),yd(t,e+10,o),e+=14),t.set(r,e),e+=u,f)for(var g in s){var p=s[g],_=p.length;yd(t,e,+g),yd(t,e+2,_),t.set(p,e+4),e+=4+_}return c&&(t.set(l,e),e+=c),e};function Nd(t,e){e||(e={});var n={},r=[];xd(t,"",n,e);var i=0,a=0;for(var o in n){var l=n[o],u=l[0],s=l[1],c=0==s.level?0:8,f=(k=Md(o)).length,h=s.comment,d=h&&Md(h),g=d&&d.length,p=Td(s.extra);f>65535&&id(11);var _=c?vd(u,s):u,b=_.length,m=_d();m.p(u),r.push(md(s,{size:u.length,crc:m.d(),c:_,f:k,m:d,u:f!=o.length||d&&h.length!=g,o:i,compression:c})),i+=30+f+p+b,a+=76+2*(f+p)+(g||0)+b}for(var y=new Uh(a+22),v=i,x=a-i,w=0;w<r.length;++w){var k=r[w];Ad(y,k.o,k,k.f,k.u,k.c.length);var M=30+k.f.length+Td(k.extra);y.set(k.c,k.o+M),Ad(y,i,k,k.f,k.u,k.c.length,k.o,k.m),i+=16+M+(k.m?k.m.length:0)}return function(t,e,n,r,i){yd(t,e,101010256),yd(t,e+8,n),yd(t,e+10,n),yd(t,e+12,r),yd(t,e+16,i)}(y,i,r.length,x,v),y}function Cd(t){throw new TypeError("Expected a value of type string but got a value of type "+typeof t)}function Sd(t){return function(e){return"string"!=typeof e&&Cd(e),(e=e.trim())?t(e):null}}var Ed=new Date(1972,3,27,19,45,5),zd={"%b %d":[{regex:/^june\s(30|[12][0-9]|0?[1-9])$/i,toDate:function(t){return new Date(null,5,t.split(/\s/)[1])}},{regex:/^july\s(3[01]|[12][0-9]|0?[1-9])$/i,toDate:function(t){return new Date(null,6,t.split(/\s/)[1])}},{regex:/^sept\s(30|[12][0-9]|0?[1-9])$/i,toDate:function(t){return new Date(null,8,t.split(/\s/)[1])}}],"%d %b":[{regex:/^(0?[1-9]|[1-9][0-9])\sjune$/i,toDate:function(t){return new Date(null,5,t.split(/\s/)[0])}},{regex:/^(0?[1-9]|[1-9][0-9])\sjuly$/i,toDate:function(t){return new Date(null,6,t.split(/\s/)[0])}},{regex:/^(0?[1-9]|[1-9][0-9])\ssept$/i,toDate:function(t){return new Date(null,8,t.split(/\s/)[0])}}]};function Dd(t){return function(e){var n=null;return t.forEach((function(t){e.match(t.regex)&&(n=t.toDate(e))})),n}}function Fd(t,e){var n,r=so(t),i=uo(t);return n=Sd("function"==typeof e?function(t){return e(t,null!==r(t))}:function(t){return null!==r(t)}),Object.freeze({test:n,parse:Sd((function(e){return r(e)||(zd[t]?Dd(zd[t])(e):null)})),format:function(t){return i(t)},type:"datetime",description:t,id:"datetime$"+t,example:i(Ed)})}var Od=Object.freeze([Fd("%Y-%m-%dT%H:%M:%S.%LZ"),Fd("%Y-%m-%d %H:%M:%S"),Fd("%Y-%m-%dT%H:%M:%S"),Fd("%Y-%m-%dT%H:%M:%SZ"),Fd("%d/%m/%Y",(function(t,e){if(!e)return!1;var n=t.split("/").map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12&&n[2]>=1e3})),Fd("%d/%m/%Y %H:%M",(function(t,e){if(!e)return!1;var n=t.split(/[/ :]/).map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12&&n[2]>=1e3&&n[3]>=0&&n[3]<24&&n[4]>=0&&n[4]<60})),Fd("%d/%m/%y",(function(t,e){if(!e)return!1;var n=t.split("/").map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12&&!isNaN(n[2])})),Fd("%m/%d/%Y",(function(t,e){if(!e)return!1;var n=t.split("/").map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>0&&n[1]<=31&&n[2]>=1e3})),Fd("%m/%d/%Y %H:%M",(function(t,e){if(!e)return!1;var n=t.split(/[/ :]/).map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>0&&n[1]<=31&&n[2]>=1e3&&n[3]>=0&&n[3]<24&&n[4]>=0&&n[4]<60})),Fd("%m/%d/%y",(function(t,e){if(!e)return!1;var n=t.split("/").map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>0&&n[1]<=31&&!isNaN(n[2])})),Fd("%Y/%m/%d",(function(t,e){if(!e)return!1;var n=t.split("/").map(parseFloat);return n[0]>=1e3&&n[1]>0&&n[1]<=12&&n[2]>0&&n[2]<=31})),Fd("%d-%m-%Y",(function(t,e){if(!e)return!1;var n=t.split("-").map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12&&n[2]>=1e3})),Fd("%d-%m-%y",(function(t,e){if(!e)return!1;var n=t.split("-").map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12&&!isNaN(n[2])})),Fd("%d.%m.%Y",(function(t,e){if(!e)return!1;var n=t.split(".").map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12&&n[2]>=1e3})),Fd("%m.%d.%y",(function(t,e){if(!e)return!1;var n=t.split(".").map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>0&&n[1]<=31&&!isNaN(n[2])})),Fd("%m-%d-%Y",(function(t,e){if(!e)return!1;var n=t.split("-").map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>0&&n[1]<=31&&n[2]>=1e3})),Fd("%m-%d-%y",(function(t,e){if(!e)return!1;var n=t.split("-").map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>0&&n[1]<=31&&!isNaN(n[2])})),Fd("%Y-%m-%d",(function(t,e){if(!e)return!1;var n=t.split("-").map(parseFloat);return n[0]>=1e3&&n[1]>0&&n[1]<=12&&n[2]>0&&n[2]<=31})),Fd("%Y-%m",(function(t,e){if(!e)return!1;var n=t.split("-").map(parseFloat);return n[0]>=1e3&&n[1]>0&&n[1]<=12})),Fd("%Y%m",(function(t,e){if(!e)return!1;var n=parseFloat(t.slice(0,4)),r=parseFloat(t.slice(4));return n>1e3&&r>0&&r<=12})),Fd("%d %b %Y",(function(t,e){if(!e)return!1;var n=t.split(" ").map(parseFloat);return n[0]>0&&n[0]<=31&&n[2]>=1e3})),Fd("%d %B %Y",(function(t,e){if(!e)return!1;var n=t.split(" ").map(parseFloat);return n[0]>0&&n[0]<=31&&n[2]>=1e3})),Fd("%d %b %y"),Fd("%-d %b ’%y"),Fd("%d %B %y"),Fd("%d-%b-%Y",(function(t,e){if(!e)return!1;var n=t.split("-").map(parseFloat);return n[0]>0&&n[0]<=31&&n[2]>=1e3})),Fd("%d-%B-%Y",(function(t,e){if(!e)return!1;var n=t.split("-").map(parseFloat);return n[0]>0&&n[0]<=31&&n[2]>=1e3})),Fd("%d-%b-%y"),Fd("%d-%B-%y"),Fd("%m/%Y",(function(t,e){if(!e)return!1;var n=t.split("/").map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>=1e3})),Fd("%m/%y"),Fd("%b %Y",(function(t,e){return!!e&&t.split(" ").map(parseFloat)[1]>=1e3})),Fd("%B %Y",(function(t,e){return!!e&&t.split(" ").map(parseFloat)[1]>=1e3})),Fd("%b-%y"),Fd("%b %y"),Fd("%B %y"),Fd("%b '%y"),Fd("%b ’%y"),Fd("%B %-d %Y"),Fd("%d %b",(function(t,e){return!!e||!!Dd(zd["%d %b"])(t)})),Fd("%d %B"),Fd("%b %d",(function(t,e){return!!e||!!Dd(zd["%b %d"])(t)})),Fd("%B %d"),Fd("%d-%m",(function(t,e){if(!e)return!1;var n=t.split("-").map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12})),Fd("%m-%d"),Fd("%d/%m"),Fd("%m/%d"),Fd("%b %d %Y"),Fd("%b %d %Y, %-I.%M%p"),Fd("%Y",(function(t,e){if(!e)return!1;var n=parseFloat(t);return n>1499&&n<2200})),Fd("%B"),Fd("%b"),Fd("%X"),Fd("%I:%M %p"),Fd("%-I.%M%p"),Fd("%H:%M",(function(t,e){if(!e)return!1;var n=t.split(":").map(parseFloat);return n[0]>=0&&n[0]<24})),Fd("%H:%M:%S"),Fd("%M:%S"),Fd("%-I%p"),Fd("Q%q %Y",(function(t,e){return!!e&&6===t.replace(/\s/g,"").length})),Fd("%Y Q%q",(function(t,e){return!!e&&6===t.replace(/\s/g,"").length})),Fd("%YM%m",(function(t,e){if(!e)return!1;var n=t.split("M").map(parseFloat);return n[0]>=1e3&&n[1]>0&&n[1]<=12})),Fd("%YQ%q",(function(t,e){if(!e)return!1;var n=t.split("Q").map(parseFloat);return n[0]>=1e3&&n[1]>0&&n[1]<=4})),Fd("%YÁ%q",(function(t,e){if(!e)return!1;var n=t.split("Á").map(parseFloat);return n[0]>=1e3&&n[1]>0&&n[1]<=4}))]);var jd={test:Sd((function(t){return/^(\+|-)?\d{1,3}(,\d{3})*(\.\d+)?((e|E)(\+|-)?\d+)?$/.test(t.trim())})),parse:Sd((function(t){return parseFloat(t.replace(/,/g,""))})),description:"Comma thousand separator, point decimal mark",thousand_separator:",",decimal_mark:".",id:"number$comma_point",example:"12,235.56"},Ud={test:Sd((function(t){return/^(\+|-)?\d{1,3}(\s\d{3})*(\.\d+)?((e|E)(\+|-)?\d+)?$/.test(t.trim())})),parse:Sd((function(t){return parseFloat(t.replace(/\s/g,""))})),description:"Space thousand separator, point decimal mark",thousand_separator:" ",decimal_mark:".",id:"number$space_point",example:"12 235.56"},Hd={test:Sd((function(t){return/^(\+|-)?\d+(\.\d+)?((e|E)(\+|-)?\d+)?$/.test(t.trim())})),parse:Sd((function(t){return parseFloat(t)})),description:"No thousand separator, point decimal mark",thousand_separator:"",decimal_mark:".",id:"number$none_point",example:"12235.56"},Ld={test:Sd((function(t){return/^(\+|-)?\d{1,3}(\.\d{3})*(,\d+)?((e|E)(\+|-)?\d+)?$/.test(t.trim())})),parse:Sd((function(t){return parseFloat(t.replace(/\./g,"").replace(/,/,"."))})),description:"Point thousand separator, comma decimal mark",thousand_separator:".",decimal_mark:",",id:"number$point_comma",example:"12.235,56"},qd={test:Sd((function(t){return/^(\+|-)?\d{1,3}(\s\d{3})*(,\d+)?((e|E)(\+|-)?\d+)?$/.test(t.trim())})),parse:Sd((function(t){return parseFloat(t.replace(/\s/g,"").replace(/,/,"."))})),description:"Space thousand separator, comma decimal mark",thousand_separator:" ",decimal_mark:",",id:"number$space_comma",example:"12 235,56"},Pd={test:Sd((function(t){return/^(\+|-)?\d+(,\d+)?((e|E)(\+|-)?\d+)?$/.test(t.trim())})),parse:Sd((function(t){return parseFloat(t.replace(/,/,"."))})),description:"No thousand separator, comma decimal mark",thousand_separator:"",decimal_mark:",",id:"number$none_comma",example:"12235,56"},Yd=Object.freeze([jd,Ud,Ld,qd,Hd,Pd]);Yd.forEach((function(t){t.type="number",t.format=function(t){var e,n,r=Zl({decimal:t.decimal_mark,thousands:t.thousand_separator,grouping:[3],currency:["",""]});return function(t,i){return null===t?"":(i||(i=",.2f"),i!==n&&(n=i,e=r.format(n)),e(t))}}(t),Object.freeze(t)}));var $d=Object.freeze({test:function(t){return"string"==typeof t||Cd(t)},parse:function(t){return"string"==typeof t?t:Cd(t)},format:function(t){if("string"==typeof t)return t},type:"string",description:"Arbitrary string",id:"string$arbitrary_string"}),Rd=Object.freeze({datetime:Od,number:Yd}),Bd=Object.freeze(["datetime","number","string"]),Id=Object.freeze({n_max:250,n_failing_values:0,failure_fraction:.05,sort:!0}),Wd=Object.freeze(Object.keys(Id));function Vd(t,e){return t.index-e.index}function Xd(t,e){return e.n_success-t.n_success||Vd(t,e)}function Zd(t){return(""+t).trim()}function Gd(t){return void 0===t?function(t){return Zd(t)}:"function"==typeof t?function(e,n){return Zd(t(e,n))}:function(e){return Zd(e[""+t])}}function Qd(t){t?Array.isArray(t)||(t=[t]):t=Bd;var e=t.reduce((function(t,e){var n=Rd[e];return n&&Array.prototype.push.apply(t,n),t}),[]),n=-1!==t.indexOf("string"),r=Wd.reduce((function(t,e){return t[e]=Id[e],t}),{}),i=function(t,i){i=Gd(i);var a=t.map(i).filter(Boolean);if(!a.length)return n?[$d]:[];var o=Math.min(r.n_max,a.length),l=Math.floor(o*r.failure_fraction),u=r.n_failing_values,s=r.sort?Xd:Vd,c=e.slice().reduce((function(t,e,n){for(var r=c=0,i=[],s=!1,c=0;c<o;c++){var f=a[c];if(!e.test(f)&&(++r>l?s=!0:-1===i.indexOf(f)&&(i.push(f),i.length>u&&(s=!0)),s))break}return s||t.push({interp:e,n_success:o-r,index:n}),t}),[]).sort(s).map((function(t){return t.interp}));return n&&c.push($d),c};return Wd.forEach((function(t){var e;i[(e=t,e.replace(/_(\w)/g,(function(t,e){return e.toUpperCase()})))]=function(e){return void 0===e?r[t]:(r[t]=e,i)}})),i}Qd.DATETIME_IDS=Object.freeze(Od.map((function(t){return t.id}))),Qd.NUMBER_IDS=Object.freeze(Yd.map((function(t){return t.id}))),Qd.STRING_IDS=Object.freeze([$d.id]),Qd.getInterpretation=function(){var t=Od.concat(Yd,$d).reduce((function(t,e){return t[e.id]=e,t}),{});return function(e){return t[e]}}(),Qd._createAccessorFunction=Gd;const Jd=Qd.getInterpretation,Kd=Object.freeze({transform_labels:!1,transform:"multiply",multiply_divide_constant:1,exponentiate_constant:0,multiplier:1,prefix:"",n_dec:2,suffix:"",strip_zeros:!0,strip_separator:!0,negative_sign:"-$nk",show_positive_sign:!1});function tg(t,e){const n=Jd(e);if(!n)throw new Error(`format_id ${e} not recognised`);if("number"!==n.type)throw new Error(`format_id ${e}not a number format`);const r=n.format,i=n.decimal_mark,a=n.thousand_separator,o=Math.trunc(t.n_dec),l=(a?",":"")+"."+Math.max(0,o)+"f",u=t.strip_zeros&&o>0?new RegExp("\\"+i+"?0+$"):null,s=t.strip_separator&&a,c=t.negative_sign,f=t.show_positive_sign,h=function(t){let e=1;return t.transform_labels&&(e="multiply"===t.transform?t.multiply_divide_constant:"divide"===t.transform?1/t.multiply_divide_constant:Math.pow(10,t.exponentiate_constant)),function(t){return t*e}}(t);return function(e){if(null===e)return"";const n=o>=0?h(e):function(t,e){if(!(e=e>0?Math.floor(e):Math.ceil(e)))return Math.round(t);const n=Math.pow(10,Math.abs(e));return e>0?Math.round(t*n)/n:Math.round(t/n)*n}(h(e),o),i=n<0,d=Math.abs(n),g=s&&a&&d>=1e3&&d<1e4;let p=r(d,l);return u&&(p=p.replace(u,"")),g&&(p=p.replace(a,"")),!i&&"$-nk"===c&&f?t.prefix+"+"+p+t.suffix:!i&&"-$nk"===c&&f?"+"+t.prefix+p+t.suffix:i&&"none"!==c?"-$nk"===c?"-"+t.prefix+p+t.suffix:"$-nk"===c?t.prefix+"-"+p+t.suffix:"($nk)"===c?"("+t.prefix+p+t.suffix+")":t.prefix+"("+p+")"+t.suffix:t.prefix+p+t.suffix}}function eg(t){const e=Qd.getInterpretation(t);if(!e)throw new Error(`format_id ${t} not recognised`);return function(){return e.format(...arguments)}}function ng(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=t;return"datetime"===e&&Boolean(r)&&(r=function(t,e){let n=e;/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z$/.test(e)?n=new Date(e):"string"==typeof e&&(n=Qd.getInterpretation(t).parse(n));return eg(t)(n)}(n,r)),"number"===e&&Boolean(r)&&(r=function(t,e){const n=parseFloat(e),r=`,.${(e.toString().split(".")[1]||"").length}f`;let i=eg(t)(e,r);const a={none:"",comma:",",point:".",space:" "},o=t.split("$")[1].split("_")[1];return Number.isInteger(n)&&(i=i.split(a[o])[0]),i}(n,r)),(String(r).includes(",")||String(r).includes('"')||String(r).includes("\r")||String(r).includes("\n"))&&(r=`"${String(r).replace(/"/g,'""')}"`),r}function rg(t){const e=Object.keys(t);let n={};const r=["lines","order","labels","colors","regions_geometry","geo_regions"],i=e.filter((e=>!r.includes(e)&&0!==t[e].length));return i.forEach((e=>{const r=function(t,e){const n=JSON.parse(JSON.stringify(t[e]));return n.column_names=t[e].column_names||{},n.metadata=t[e].metadata||{},n.forEach((t=>{Object.keys(t).forEach((e=>{Object.keys(n.column_names).includes(e)||delete t[e]}))})),n}(t,e);n[e]=r})),{formatted_datasets:n,datasets_to_download:i}}function ig(t,e){const n=t[e],{headers:r,header_index_lookup:i}=function(t){const e=[],n={};for(const r in t.column_names)t.column_names[r]&&((Array.isArray(t.column_names[r])?t.column_names[r]:[t.column_names[r]]).forEach((t=>{let n=ng(t);e.includes(n)||e.push(n)})),Array.isArray(t.column_names[r])?n[r]=t.column_names[r].map((t=>e.indexOf(ng(t)))):n[r]=e.indexOf(ng(t.column_names[r])));return{headers:e,header_index_lookup:n}}(n),a=function(t,e,n){const r=[];return t.forEach((e=>{const i=[];for(const r in e){const a=e[r],o=n[r];let l=t.metadata?t.metadata[r]?.type:null,u=t.metadata?t.metadata[r]?.type_id:null;Array.isArray(a)?a.forEach(((e,n)=>{l=t.metadata[r][n]?.type,u=t.metadata[r][n]?.type_id,i[o[n]]=ng(e,l,u)})):i[o]=ng(a,l,u)}r.push(i)})),[e.join(",")].concat(r.map((t=>t.join(",")))).join("\n")}(n,r,i);return a}var ag="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0;function og(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){cg(r.response,e,n)},r.onerror=function(){console.error("could not download file")},r.send()}function lg(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return e.status>=200&&e.status<=299}function ug(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var sg=ag.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),cg=ag.saveAs||("object"!=typeof window||window!==ag?function(){}:"download"in HTMLAnchorElement.prototype&&!sg?function(t,e,n){var r=ag.URL||ag.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener","string"==typeof t?(i.href=t,i.origin!==location.origin?lg(i.href)?og(t,e,n):ug(i,i.target="_blank"):ug(i)):(i.href=r.createObjectURL(t),setTimeout((function(){r.revokeObjectURL(i.href)}),4e4),setTimeout((function(){ug(i)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download","string"==typeof t)if(lg(t))og(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout((function(){ug(r)}))}else navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof t)return og(t,e,n);var i="application/octet-stream"===t.type,a=/constructor/i.test(ag.HTMLElement)||ag.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&a||sg)&&"undefined"!=typeof FileReader){var l=new FileReader;l.onloadend=function(){var t=l.result;t=o?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=t:location=t,r=null},l.readAsDataURL(t)}else{var u=ag.URL||ag.webkitURL,s=u.createObjectURL(t);r?r.location=s:location.href=s,r=null,setTimeout((function(){u.revokeObjectURL(s)}),4e4)}});let fg,hg,dg,gg,pg;ag.saveAs=cg.saveAs=cg;let _g=!1;function bg(){var t;return(t=document.createElement("style")).type="text/css",t.innerHTML=".flourish-footer { margin: 0; } .flourish-footer p { margin: 0; display: inline; } .flourish-footer p:empty { height: 0; } .flourish-footer a { color: inherit; }",document.head.appendChild(t),fg=document.createElement("footer"),fg.className="flourish-footer",hg=document.createElement("div"),hg.className="flourish-footer-text",hg.setAttribute("id","flourish-footer-text"),dg=document.createElement("div"),dg.className="flourish-footer-logo-container",fg.appendChild(hg),fg.appendChild(dg),fg}function mg(){return Ng.background_color_enabled&&!function(t){if(!t)return void console.warn("No valid color",t);const e=qc("#000000",t);return qc("#ffffff",t)<e}(Ng.background_color)}function yg(){var t=Ng.footer_logo_src?Ng.footer_logo_src:"";return Ng.footer_logo_src_light&&mg()&&(t=Ng.footer_logo_src_light),t}function vg(){return Ng.footer_logo_enabled&&yg()}function xg(){var t=[{name:Ng.source_name,url:Ng.source_url},{name:Ng.multiple_sources?Ng.source_name_2:"",url:Ng.multiple_sources?Ng.source_url_2:""},{name:Ng.multiple_sources?Ng.source_name_3:"",url:Ng.multiple_sources?Ng.source_url_3:""}].filter((function(t){return t.name||t.url}));_g=t.length>0||Ng.footer_note||Ng.footer_note_secondary||vg();var e,n="top"==Ng.footer_border||"top_and_bottom"==Ng.footer_border,r="bottom"==Ng.footer_border||"top_and_bottom"==Ng.footer_border;fg.style.display="flex",fg.style.height=_g?null:0,fg.style.width="100%",fg.style.paddingTop=n?Ng.footer_border_space+"rem":"",fg.style.paddingBottom=r?Ng.footer_border_space+"rem":"",fg.style.borderTop=n?Ng.footer_border_width+"px "+Ng.footer_border_style+" "+Ng.footer_border_color:"",fg.style.borderBottom=r?Ng.footer_border_width+"px "+Ng.footer_border_style+" "+Ng.footer_border_color:"",fg.style.fontFamily=Ng.footer_font?Ng.footer_font.name:"inherit",fg.style.fontWeight=Ng.footer_text_weight,fg.style.justifyContent="justify"==(e=Ng.footer_align)?"space-between":"left"==e?"flex-start":"right"==e?"flex-end":"center"==e?"center":void 0,fg.style.fontSize=Ng.footer_text_size+"rem",fg.style.color=Ng.footer_text_color||Ng.font_color,fg.style.alignItems=Ng.footer_align_vertical;var i=document.createElement("span");t.forEach((function(t,e){var n=document.createElement("p");if(e>0&&(n.innerText=", "),t.url){var r=document.createElement("a");r.innerText=t.name||t.url,r.href=Fc(t.url),r.target="_blank",n.appendChild(r)}else n.innerText+=t.name||t.url;i.innerHTML+=n.innerHTML})),hg.style.order="left"==Ng.footer_logo_order?2:"",hg.style.textAlign=Dc(Ng.footer_align);const a=""!==i.innerHTML?`${Ng.source_label} ${i.innerHTML}`:"",o=Ng.footer_note?(""!==i.innerHTML?" • ":"")+wg("primary"):"",l=Ng.footer_note_secondary?`<br /><p>${wg("secondary")}</p>`:"";hg.innerHTML=`<p>${a}${o}</p>${l}`,dg.innerHTML="",vg()&&(gg=gg||document.createElement("img"),gg.className="flourish-footer-logo",gg.src=Fc(yg()),gg.alt=Ng.footer_logo_alt,gg.style.height=Ng.footer_logo_height+"rem",gg.style.marginRight="left"==Ng.footer_logo_order?Ng.footer_logo_margin+"rem":"",gg.style.marginLeft="right"==Ng.footer_logo_order?Ng.footer_logo_margin+"rem":"",gg.style.verticalAlign=Ng.footer_align_vertical,gg.style.display=vg()?"":"none",Ng.footer_logo_link_url?(pg=document.createElement("a"),pg.target="_blank",pg.appendChild(gg),dg.appendChild(pg),gg.style.cursor="pointer",pg.href=Fc(Ng.footer_logo_link_url)):dg.appendChild(gg)),document.querySelectorAll(".fl-data-download-button").forEach((t=>{t.addEventListener("click",(async t=>{t.preventDefault();const{file_name:e,blob:n}=await async function(){const t={},{formatted_datasets:e,datasets_to_download:n}=rg(window.template?.data);if(1===n.length){const t=n[0],r=`Flourish-data_${t}.csv`,i=ig(e,t);return{file_name:r,blob:new Blob([i],{type:"text/csv"})}}if(n.length>1){n.forEach((n=>{const r=ig(e,n);t[`${n}.csv`]=Md(r)}));const r="Flourish-data.zip",i=Nd(t);return{file_name:r,blob:new Blob([i],{type:"application/zip"})}}return Flourish.warn("There is no data to download"),null}();try{cg(n,e)}catch(t){console.error("An error occurred while saving the file:",t)}}))}))}function wg(t){const e=("primary"===t?Ng.footer_note:Ng.footer_note_secondary).replace(/{{([^}]+)}}/g,((t,e)=>{if("data_last_updated"===e){return function(t,e){let n="n/a";null!==t&&(n=mf(e)(t));return n}(function(t){const e="data_last_updated"===t?"last_updated":t,n=Object.keys(window.template?.data);if(n.length>0){const t=n.map((t=>window.template.data[t].timestamps?.[e]||null)).filter((t=>null!==t));if(0===t.length)return null;return Math.max(...t)}return null}(e),Ng.footer_timestamp_format)}if(e.includes("download_data")){return!!window.template.data&&(window.template.data.length||Object.keys(window.template.data).length)?function(t){const e=[...document.querySelectorAll(".fl-data-download-button")],n=[...document.querySelectorAll("#flourish-header-title, #flourish-header-subtitle, #flourish-header-text")].find((t=>Boolean(t.textContent.trim()))),r=`fl-data-download-button-${e.length}`,i=n?`aria-labelledby='${n.id} ${r}'`:"";let a="Download data";if(t.includes('"')){const e=t.indexOf('"'),n=t.lastIndexOf('"');a=t.slice(e+1,n)}return`<a id='${r}' ${i} href='#' class='fl-data-download-button'>${a}</a>`}(e):(Flourish.warn("There is no data to download"),"")}return""}));return e}function kg(){yc(),jc(),xg(),document.body.style.backgroundColor=Ng.background_color_enabled?Ng.background_color:"transparent",document.body.style.backgroundImage=Ng.background_image_enabled?"url("+Ng.background_image_src+")":"",document.body.style.backgroundSize=Ng.background_image_size,document.body.style.backgroundRepeat="no-repeat",document.body.style.backgroundPosition=Ng.background_image_position;var t=zg.wrapper.style;t.display="flex",t.height="100vh",t.color=Ng.font_color,t.maxWidth="wrapper"==Ng.max_width_target?Ng.max_width+"px":"",t.marginLeft="wrapper"==Ng.max_width_target&&"left"!=Ng.max_width_align?"auto":"",t.marginRight="wrapper"==Ng.max_width_target&&"right"!=Ng.max_width_align?"auto":"",t.padding=Ng.margin_top+"rem "+Ng.margin_right+"rem "+Ng.margin_bottom+"rem "+Ng.margin_left+"rem",t.borderTop=Ng.border.enabled?Ng.border.top.width+"px "+Ng.border.top.style+" "+Ng.border.top.color:"",t.borderRight=Ng.border.enabled?Ng.border.right.width+"px "+Ng.border.right.style+" "+Ng.border.right.color:"",t.borderBottom=Ng.border.enabled?Ng.border.bottom.width+"px "+Ng.border.bottom.style+" "+Ng.border.bottom.color:"",t.borderLeft=Ng.border.enabled?Ng.border.left.width+"px "+Ng.border.left.style+" "+Ng.border.left.color:"";var e=zg.primary.outer.style,n=zg.legend.outer.style,r=Mg();if("stack"==r.mode)r.elements.forEach((function(t,e){zg[t].outer.style.order=10*e}));else for(var i in r.elements)for(var a in r.elements[i]){var o=zg[i].outer||zg[i];o.style[a]=r.elements[i][a],o.style.order=""}zg.header.outer.style.display="",zg.footer.outer.style.display="",zg.controls.outer.style.display="",e.display="flex",n.display="",e.flex="1 1 auto",e.height=null,zg.primary.outer.style.maxWidth="primary"==Ng.max_width_target?Ng.max_width+"px":"",zg.primary.outer.style.marginLeft="primary"==Ng.max_width_target&&"left"!=Ng.max_width_align?"auto":"",zg.primary.outer.style.marginRight="primary"==Ng.max_width_target&&"right"!=Ng.max_width_align?"auto":"";var l=""!=Ng.screenreader_text_primary.trim(),u=document.getElementById("fl-layout-primary-description");zg.primary.outer.setAttribute("aria-label","primary visualisation container"),u.innerText=Ng.screenreader_text_primary,l?zg.primary.outer.setAttribute("aria-describedBy","fl-layout-primary-description"):zg.primary.outer.removeAttribute("aria-describedBy"),Ng.screenreader_hide_primary?zg.primary.inner.setAttribute("aria-hidden",!0):zg.primary.inner.removeAttribute("aria-hidden"),""!=Ng.screenreader_label.trim()?jg().setAttribute("aria-label",Ng.screenreader_label):jg().removeAttribute("aria-label"),Eg.map((function(t){var e=zg[t],n=e.outer.style;return{name:t,height:Fg(e.inner),order:parseFloat(n.order),style:n}})).sort((function(t,e){return t.order-e.order})).filter((function(t){if(t.height||"primary"==t.name)return!0;t.style.paddingBottom="",t.style.paddingTop="",t.style.display="none"})).forEach((function(t,e,n){t.style.width="100%",t.style.paddingTop=e?Tg("padding"):"",t.style.paddingBottom=e<n.length-1?Tg("padding"):""})),zg.wrapper.style.gridColumnGap=Tg("gap"),zg.wrapper.style.gridRowGap=Tg("gap"),document.body.setAttribute("dir",Ng.read_direction),zg.wrapper.setAttribute("dir",Ng.read_direction),document.getElementById("fl-layout-wrapper-outer").setAttribute("dir","ltr")}function Mg(){var t=window.innerWidth<Ng.breakpoint_mobile_big,e=Ng.layout_order.indexOf("grid")>-1,n={id:Ng.layout_order,mode:e?"grid":"stack",elements:Ec[Ng.layout_order]};return t&&e&&(n.id="stack-default",n.mode="stack",n.elements=Ec["stack-default"]),n}function Tg(t){var e,n=Mg();return e="custom"==Ng.space_between_sections?Ng.space_between_sections_custom:Ng.space_between_sections,"grid"==n.mode?"gap"==t?e+"rem":"":"gap"==t?"":e/2+"rem"}var Ag=Object.freeze({body_font:{name:"Canva Sans Variable",url:"https://public.flourish.studio/resources/fonts/canva-sans.css"},title_font:null,subtitle_font:null,footer_font:null,read_direction:"ltr",border:{enabled:!1,top:{width:1,color:"#dddddd",style:"solid"},right:{width:1,color:"#dddddd",style:"solid"},bottom:{width:1,color:"#dddddd",style:"solid"},left:{width:1,color:"#dddddd",style:"solid"}},layout_order:"stack-default",margin_top:.75,margin_right:.75,margin_bottom:.75,margin_left:.75,space_between_sections:1,space_between_sections_custom:1,background_color_enabled:!0,background_color:"#ffffff",background_image_enabled:!1,background_image_src:"",background_image_size:"cover",background_image_position:"center center",max_width:600,max_width_target:"none",max_width_align:"center",breakpoint_mobile_small:0,breakpoint_mobile_big:380,breakpoint_tablet:580,breakpoint_desktop:1080,breakpoint_big_screen:1280,font_color:"#333333",font_size_mobile_small:62.5,font_size_mobile_big:75,font_size_tablet:87.5,font_size_desktop:100,font_size_big_screen:120,header_align:"left",header_border:"none",header_border_width:1,header_border_color:"#dddddd",header_border_style:"solid",header_border_space:.5,header_logo_enabled:!1,header_logo_align:"inside",header_logo_src:"",header_logo_alt:"Header logo",header_logo_link_url:"",header_logo_height:3,header_logo_position_inside:"left",header_logo_position_outside:"left",header_logo_margin_top:.25,header_logo_margin_right:.5,header_logo_margin_bottom:0,header_logo_margin_left:0,title:"",title_size:2,title_size_custom:1.6,title_line_height:1.2,title_color:null,title_weight:"bold",title_space_above:0,title_space_above_custom:1.5,title_styling:!1,subtitle:"",subtitle_size:1.4,subtitle_size_custom:1.6,subtitle_line_height:1.2,subtitle_color:null,subtitle_weight:"normal",subtitle_space_above:.5,subtitle_space_above_custom:1.5,subtitle_styling:!1,header_text:"",header_text_size:1.2,header_text_size_custom:1.2,header_text_line_height:1.2,header_text_color:null,header_text_weight:"normal",header_text_space_above:.5,header_text_space_above_custom:1.5,source_label:"Source: ",source_name:"",source_url:"",source_name_2:"",source_url_2:"",source_name_3:"",source_url_3:"",footer_note:"",footer_note_secondary:"",footer_text_size:1,footer_text_color:null,footer_styling:!1,footer_text_weight:"normal",footer_align:"justify",footer_align_vertical:"center",footer_border:"none",footer_border_width:1,footer_border_color:"#dddddd",footer_border_style:"solid",footer_border_space:.5,footer_logo_enabled:!1,footer_logo_src:"",footer_logo_src_light:"",footer_logo_alt:"Footer logo",footer_logo_link_url:"",footer_logo_height:1.5,footer_logo_margin:.25,footer_logo_order:"right",footer_timestamp_format:"%H:%M:%S",screenreader_hide_primary:!0,screenreader_text_primary:"",screenreader_label:""});var Ng;function Cg(t,e,n){yc(n),t=function(t){return function(){return document.body.classList.add("fl-fonts-loaded"),t.apply(this,arguments)}}(t=t||window.template.update);var r=setTimeout(t,isNaN(e)?500:e),i=[];document.fonts&&i.push(document.fonts.ready),vg()&&i.push(function(){if(vg())return new Promise((function(t){var e=Fc(yg());function n(){"undefined"!=typeof Flourish&&Flourish.warn&&Flourish.warn("flourish-layout unable to load image: "+e),t()}gg=gg||document.createElement("img"),gg.onload=function(){t()},gg.onerror=n,gg.oncancel=n,gg.src=e}))}()),Oc()&&i.push(function(){if(Oc())return new Promise((function(t){var e=Fc(Ng.header_logo_src);function n(){"undefined"!=typeof Flourish&&Flourish.warn&&Flourish.warn("flourish-layout unable to load image: "+e),t()}(Cc=Cc||document.createElement("img")).onload=function(){t()},Cc.onerror=n,Cc.oncancel=n,Cc.src=e}))}()),i.length&&(document.fonts||i.push(new Promise((function(t){setTimeout(t,500)}))),Promise.all(i).then((function(e){document.fonts&&e[0].size&&(clearTimeout(r),t(),mc()),document.fonts.addEventListener("loadingdone",(function(){clearTimeout(r),t(),mc()}))})))}var Sg,Eg=["header","controls","legend","primary","footer"],zg={};function Dg(t){return t.getBoundingClientRect().width}function Fg(t){return t.getBoundingClientRect().height}function Og(t,e){var n="fl-layout-"+t,r=document.createElement("section");r.className="fl-layout-container",r.id=n+"-container",r.style.width="100%",r.style.position="relative",r.style.order=e;var i=document.createElement("div");return i.className="fl-layout-inner",i.id=n,i.style.width="100%",i.style.position="relative","primary"==t&&(r.style.display="flex",function(t){var e=document.createElement("p");e.id="fl-layout-primary-description";var n=e.style;n.border="0",n.height="1px",n.width="1px",n.margin="-1px",n.overflow="hidden",n.padding="0",n.position="absolute",n.clip="rect(0 0 0 0)",t.appendChild(e)}(r)),r.appendChild(i),zg.wrapper.appendChild(r),{outer:r,inner:i}}function jg(){return zg.wrapper}function Ug(){return zg.sidebar}function Hg(t){return-1!==Eg.indexOf(t)?zg[t].inner:null}function Lg(t){return zg[t]||void 0===t?Dg("wrapper"==t||void 0===t?zg.wrapper:zg[t].outer):null}function qg(t){return zg[t]||void 0===t?"wrapper"==t||void 0===t?Dg(zg.wrapper)-Vg("horizontal")-Xg("horizontal"):Dg(zg[t].inner):null}function Pg(t){return zg[t]||void 0===t?Fg("wrapper"==t||void 0===t?zg.wrapper:zg[t].outer):null}function Yg(t){return zg[t]||void 0===t?"wrapper"==t||void 0===t?Fg(zg.wrapper)-Vg("vertical")-Xg("vertical"):Fg(zg[t].inner):null}function $g(){var t="grid"==Mg().mode?0:Ig(zg.primary.outer);return Fg(zg.primary.outer)-t}function Rg(){return Dg(zg.primary.inner)}function Bg(){return Ng.screenreader_hide_primary?"hidden":"readable"}function Ig(t){return"grid"==Mg().mode?parseFloat(getComputedStyle(zg.wrapper).gap)||0:(parseFloat(getComputedStyle(t).paddingTop)||0)+(parseFloat(getComputedStyle(t).paddingBottom)||0)}function Wg(){var t=function(){if(Flourish.fixed_height)return window.innerHeight;var t=window.innerWidth;return t>999?650:t>599?575:400}()-Vg("vertical")-Xg("vertical"),e=function(){var t=Mg(),e="grid-1"==t.id?[]:["header","controls","legend","footer"];return e.reduce((function(e,n){var r=Pg(n);return r>0&&"grid"==t.mode&&(r+=Ig()),e+r}),0)}();return t-e-("grid"==Mg().mode?0:Ig(zg.primary.outer))}function Vg(t){var e;return"left"==t?e=Ng.margin_left:"right"==t?e=Ng.margin_right:"top"==t?e=Ng.margin_top:"bottom"==t?e=Ng.margin_bottom:"horizontal"==t?e=Ng.margin_left+Ng.margin_right:"vertical"==t&&(e=Ng.margin_top+Ng.margin_bottom),zc(e)}function Xg(t){return Ng.border.enabled?"vertical"==t?Ng.border.top.width+Ng.border.bottom.width:"horizontal"==t?Ng.border.left.width+Ng.border.right.width:null:0}function Zg(t){var e=zg.primary;if(Flourish.fixed_height||void 0===Flourish.fixed_height)e.inner.style.height="";else{var n=null===t,r=n?Wg():t;r+Ig(zg.primary.outer)!==parseFloat(e.outer.style.height)&&(zg.wrapper.style.height="",e.outer.style.flex="",e.inner.style.height=r+"px",Flourish.setHeight(n?null:Pg()))}}function Gg(t){var e=Sg.querySelector(".fl-layout-overlay-message");if(t){Sg.style.display="block";var n="string"==typeof t?t:"Your web browser does not support the features used by this content. Consider updating to a modern browser.";e.innerHTML=n}else e.textContent="",Sg.style.display="none"}function Qg(){return Sg}let Jg;function Kg(){Jg&&tp(),Jg=function(t,e){if("string"==typeof t&&(t=document.querySelector(t)),!t)return console.error("No valid target in createScreenshotSVG"),null;const{width:n,height:r,x:i,y:a}=t.getBoundingClientRect(),o=document.createElementNS("http://www.w3.org/2000/svg","svg");return o.id=e,o.classList.add("flourish-screenshot-svg-container"),o.style.left=i+"px",o.style.top=a+"px",o.style.width=n+"px",o.style.height=r+"px",o.style.position="absolute",t.appendChild(o),{addTextElements:function(e){if("string"==typeof e&&(e=t.querySelectorAll(e)),!e)return console.error("No valid els inside addTextElements"),null;for(const t of e){const{x:e,y:n,width:r}=t.getBoundingClientRect(),i=document.createElementNS("http://www.w3.org/2000/svg","text"),{color:a,"font-family":l,"font-size":u,"font-weight":s,"line-height":c,"padding-left":f,"padding-top":h}=window.getComputedStyle(t),d=`${s} ${u} ${l}`,g=gc(t.innerText,d,null,Math.ceil(r)),p=isNaN(parseFloat(c))?1.2*parseFloat(u)+"px":c,_=window.getComputedStyle(t.closest("[style*='opacity']")||t).opacity;g.forEach(((t,n)=>{const r=document.createElementNS("http://www.w3.org/2000/svg","tspan");r.innerHTML=t,r.setAttribute("dy",0===n?parseFloat(h):p),r.setAttribute("dx",parseFloat(f)),r.setAttribute("x",e),r.setAttribute("opacity",_),i.appendChild(r)})),i.style.dominantBaseline="text-before-edge",i.setAttribute("x",e+"px"),i.setAttribute("y",n+"px"),i.setAttribute("font-family",l),i.setAttribute("font-size",u),i.setAttribute("font-weight",s),i.setAttribute("fill",a),o.appendChild(i)}return this},addCircleElements:function(e){if("string"==typeof e&&(e=t.querySelectorAll(e)),!e)return console.error("No valid els inside addCircleElements"),null;for(const t of e){const e=document.createElementNS("http://www.w3.org/2000/svg","circle"),{x:n,y:r,width:i}=t.getBoundingClientRect(),a=window.getComputedStyle(t)["background-color"],l=window.getComputedStyle(t.closest("[style*='opacity']")||t).opacity,u=i/2;e.setAttribute("cx",n+u+"px"),e.setAttribute("cy",r+u+"px"),e.setAttribute("r",u+"px"),e.setAttribute("opacity",l),e.setAttribute("fill",a),"rgba(0, 0, 0, 0)"===a&&e.setAttribute("stroke","#CCC"),o.appendChild(e)}return this},addSwatchElements:function(e,n){if("string"==typeof e&&(e=t.querySelectorAll(e)),!e)return console.error("No valid els inside addSwatchElements"),null;"string"==typeof n&&(n=t.querySelectorAll(n));for(const[t,r]of e.entries()){const e=document.createElementNS("http://www.w3.org/2000/svg","rect"),{x:i,y:a,width:l,height:u}=r.getBoundingClientRect(),s=n[t]?.getBoundingClientRect()?.y,c=window.getComputedStyle(r)["background-color"],f=window.getComputedStyle(r).border,[,h,d,g,p]=f.replace(/\s/g,"").match(/rgba?\((\d+(?:\.\d+)?),(\d+(?:\.\d+)?),(\d+(?:\.\d+)?)(?:,(\d+(?:\.\d+)?))?\)/i),_=p?`rgba(${h},${d},${g},${p})`:`rgb(${h},${d},${g})`||"#000",b=f.split(" ")[0]||0;let m=window.getComputedStyle(r)["border-radius"]||0;m=parseFloat(m);const y=window.getComputedStyle(r.closest("[style*='opacity']")||r).opacity;e.setAttribute("x",i),e.setAttribute("y",s||a),e.setAttribute("width",`${l}px`),e.setAttribute("height",`${u}px`),e.setAttribute("rx",m),e.setAttribute("ry",m),e.setAttribute("opacity",y),e.setAttribute("fill",c),e.setAttribute("stroke",_),e.setAttribute("stroke-width",b),"rgba(0, 0, 0, 0)"===c&&e.setAttribute("stroke","#CCC"),o.appendChild(e)}return this},addGradient:function(e,n,r){if("string"==typeof e&&(e=t.querySelector(e)),!e)return console.error("No valid els inside addCircleElements"),null;const i=document.createElementNS("http://www.w3.org/2000/svg","g"),{x:a,y:l,width:u,height:s}=e.getBoundingClientRect(),{max:c,min:f}=r,h=c-f;for(let t=0;t<=u;t++){const e=document.createElementNS("http://www.w3.org/2000/svg","line");e.setAttribute("stroke",n(f+t*h/u)),e.setAttribute("x1",t+a),e.setAttribute("y1",l),e.setAttribute("x2",t+a),e.setAttribute("y2",s+l),i.appendChild(e)}return o.appendChild(i),this},remove:function(){o.remove()}}}(this.getWrapper(),"fl-layout-svg-screenshot-container"),Jg.addTextElements("#fl-layout-header-container h2"),Jg.addTextElements("#fl-layout-header-container h3"),Jg.addTextElements("#fl-layout-header-container p"),Jg.addTextElements("#fl-layout-footer .flourish-footer-text")}function tp(){Jg.remove(),Jg=null}function ep(t,e){return Object.keys(e).forEach((function(n){void 0===t[n]&&(t[n]=e[n])})),t}var np=Object.freeze({axis_position:"bottom",y_axis_position:"",numeric_scale_type:"linear",nice:!0,flip:!1,zero_axis:"auto",linear_min:null,linear_max:null,log_min:null,log_max:null,datetime_min:"",datetime_max:"",line_visible:!0,line_and_tick_color:"#eeeeee",line_and_tick_width:.1,tick_side:"out",tick_mode:"auto",tick_number:5,tick_custom:"",tick_length:.5,tick_padding:.25,edge_padding:50,tick_label_position:"default",tick_label_size:1,tick_label_color:"#4A4A4A",tick_label_angle:"45",tick_label_weight:"normal",tick_label_space_mode:"auto",tick_label_space:10,tick_label_max_lines:2,tick_label_line_height:1.1,gridlines_visible:!1,gridline_color:"#eeeeee",gridline_width:.1,gridline_style:"solid",gridline_category_dividers:!1,gridline_category_dividers_extend:!1,title_mode:"auto",title:"",title_color:"#4A4A4A",title_size:1.1,title_weight:"bold",title_padding:.6}),rp=Object.freeze({axis_visible:!0,numeric_scale_type:"linear",nice:!0,flip:!1,zero_axis:"auto",linear_min:null,linear_max:null,log_min:null,log_max:null,datetime_min:"",datetime_max:"",line_visible:!0,line_and_tick_color:"#eeeeee",line_and_tick_width:.1,tick_side:"out",tick_mode:"number",tick_number:4,tick_custom:"",tick_length:.5,tick_padding:.25,edge_padding:50,tick_label_position:"default",tick_label_size:1,tick_label_color:"#4A4A4A",tick_label_angle:"0",tick_label_weight:"normal",tick_label_space_mode:"auto",tick_label_space:10,tick_label_max_lines:2,tick_label_line_height:1.1,gridlines_visible:!0,gridline_color:"#eeeeee",gridline_width:.1,gridline_style:"solid",gridline_category_dividers:!1,gridline_category_dividers_extend:!1,title_mode:"auto",title:"",title_position:"end",title_color:"#4A4A4A",title_size:1.1,title_weight:"bold",title_padding:.6}),ip=Object.freeze(ep({axis_visible:!1},rp)),ap=Object.freeze({background_color_enabled:!1,background_color:"#f5f5f5",background_image_enabled:!1,background_image_src:"",background_image_size:"stretch",background_image_position:"xMidYMid"});function op(t,e,n){t[e]||(t[e]={}),ep(t[e],n)}function lp(t){t=t||{};var e=op.bind(null,t);return e("x",np),e("y",rp),e("y2",ip),e("background",ap),t}var up="http://www.w3.org/1999/xhtml",sp={svg:"http://www.w3.org/2000/svg",xhtml:up,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function cp(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),sp.hasOwnProperty(e)?{space:sp[e],local:t}:t}function fp(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===up&&e.documentElement.namespaceURI===up?e.createElement(t):e.createElementNS(n,t)}}function hp(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function dp(t){var e=cp(t);return(e.local?hp:fp)(e)}function gp(){}function pp(t){return null==t?gp:function(){return this.querySelector(t)}}function _p(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function bp(){return[]}function mp(t){return null==t?bp:function(){return this.querySelectorAll(t)}}function yp(t){return function(){return this.matches(t)}}function vp(t){return function(e){return e.matches(t)}}var xp=Array.prototype.find;function wp(){return this.firstElementChild}var kp=Array.prototype.filter;function Mp(){return this.children}function Tp(t){return new Array(t.length)}function Ap(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function Np(t,e,n,r,i,a){for(var o,l=0,u=e.length,s=a.length;l<s;++l)(o=e[l])?(o.__data__=a[l],r[l]=o):n[l]=new Ap(t,a[l]);for(;l<u;++l)(o=e[l])&&(i[l]=o)}function Cp(t,e,n,r,i,a,o){var l,u,s,c=new Map,f=e.length,h=a.length,d=new Array(f);for(l=0;l<f;++l)(u=e[l])&&(d[l]=s=o.call(u,u.__data__,l,e)+"",c.has(s)?i[l]=u:c.set(s,u));for(l=0;l<h;++l)s=o.call(t,a[l],l,a)+"",(u=c.get(s))?(r[l]=u,u.__data__=a[l],c.delete(s)):n[l]=new Ap(t,a[l]);for(l=0;l<f;++l)(u=e[l])&&c.get(d[l])===u&&(i[l]=u)}function Sp(t){return t.__data__}function Ep(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function zp(t){return function(){this.removeAttribute(t)}}function Dp(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Fp(t,e){return function(){this.setAttribute(t,e)}}function Op(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function jp(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function Up(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Hp(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Lp(t){return function(){this.style.removeProperty(t)}}function qp(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Pp(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Yp(t,e){return t.style.getPropertyValue(e)||Hp(t).getComputedStyle(t,null).getPropertyValue(e)}function $p(t){return function(){delete this[t]}}function Rp(t,e){return function(){this[t]=e}}function Bp(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Ip(t){return t.trim().split(/^|\s+/)}function Wp(t){return t.classList||new Vp(t)}function Vp(t){this._node=t,this._names=Ip(t.getAttribute("class")||"")}function Xp(t,e){for(var n=Wp(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Zp(t,e){for(var n=Wp(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Gp(t){return function(){Xp(this,t)}}function Qp(t){return function(){Zp(this,t)}}function Jp(t,e){return function(){(e.apply(this,arguments)?Xp:Zp)(this,t)}}function Kp(){this.textContent=""}function t_(t){return function(){this.textContent=t}}function e_(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function n_(){this.innerHTML=""}function r_(t){return function(){this.innerHTML=t}}function i_(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function a_(){this.nextSibling&&this.parentNode.appendChild(this)}function o_(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function l_(){return null}function u_(){var t=this.parentNode;t&&t.removeChild(this)}function s_(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function c_(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function f_(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,a=e.length;r<a;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?e.length=i:delete this.__on}}}function h_(t,e,n){return function(){var r,i=this.__on,a=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(i)for(var o=0,l=i.length;o<l;++o)if((r=i[o]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=a,r.options=n),void(r.value=e);this.addEventListener(t.type,a,n),r={type:t.type,name:t.name,value:e,listener:a,options:n},i?i.push(r):this.__on=[r]}}function d_(t,e,n){var r=Hp(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function g_(t,e){return function(){return d_(this,t,e)}}function p_(t,e){return function(){return d_(this,t,e.apply(this,arguments))}}Ap.prototype={constructor:Ap,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},Vp.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var __=[null];function b_(t,e){this._groups=t,this._parents=e}function m_(){return new b_([[document.documentElement]],__)}function y_(t){return"string"==typeof t?new b_([[document.querySelector(t)]],[document.documentElement]):new b_([[t]],__)}function v_(t){return"svg"===t.tagName.toLowerCase()}b_.prototype=m_.prototype={constructor:b_,select:function(t){"function"!=typeof t&&(t=pp(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o,l=e[i],u=l.length,s=r[i]=new Array(u),c=0;c<u;++c)(a=l[c])&&(o=t.call(a,a.__data__,c,l))&&("__data__"in a&&(o.__data__=a.__data__),s[c]=o);return new b_(r,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);return null==e?[]:_p(e)}}(t):mp(t);for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o,l=e[a],u=l.length,s=0;s<u;++s)(o=l[s])&&(r.push(t.call(o,o.__data__,s,l)),i.push(o));return new b_(r,i)},selectChild:function(t){return this.select(null==t?wp:function(t){return function(){return xp.call(this.children,t)}}("function"==typeof t?t:vp(t)))},selectChildren:function(t){return this.selectAll(null==t?Mp:function(t){return function(){return kp.call(this.children,t)}}("function"==typeof t?t:vp(t)))},filter:function(t){"function"!=typeof t&&(t=yp(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o=e[i],l=o.length,u=r[i]=[],s=0;s<l;++s)(a=o[s])&&t.call(a,a.__data__,s,o)&&u.push(a);return new b_(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,Sp);var n=e?Cp:Np,r=this._parents,i=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var a=i.length,o=new Array(a),l=new Array(a),u=new Array(a),s=0;s<a;++s){var c=r[s],f=i[s],h=f.length,d=_p(t.call(c,c&&c.__data__,s,r)),g=d.length,p=l[s]=new Array(g),_=o[s]=new Array(g);n(c,f,p,_,u[s]=new Array(h),d,e);for(var b,m,y=0,v=0;y<g;++y)if(b=p[y]){for(y>=v&&(v=y+1);!(m=_[v])&&++v<g;);b._next=m||null}}return(o=new b_(o,r))._enter=l,o._exit=u,o},enter:function(){return new b_(this._enter||this._groups.map(Tp),this._parents)},exit:function(){return new b_(this._exit||this._groups.map(Tp),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,a=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=e&&(i=e(i)),null==n?a.remove():n(a),r&&i?r.merge(i).order():i},merge:function(t){if(!(t instanceof b_))throw new Error("invalid merge");for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),l=0;l<a;++l)for(var u,s=e[l],c=n[l],f=s.length,h=o[l]=new Array(f),d=0;d<f;++d)(u=s[d]||c[d])&&(h[d]=u);for(;l<r;++l)o[l]=e[l];return new b_(o,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=Ep);for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o,l=n[a],u=l.length,s=i[a]=new Array(u),c=0;c<u;++c)(o=l[c])&&(s[c]=o);s.sort(e)}return new b_(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,a=e[n],o=0,l=a.length;o<l;++o)(i=a[o])&&t.call(i,i.__data__,o,a);return this},attr:function(t,e){var n=cp(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?Dp:zp:"function"==typeof e?n.local?Up:jp:n.local?Op:Fp)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?Lp:"function"==typeof e?Pp:qp)(t,e,null==n?"":n)):Yp(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?$p:"function"==typeof e?Bp:Rp)(t,e)):this.node()[t]},classed:function(t,e){var n=Ip(t+"");if(arguments.length<2){for(var r=Wp(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?Jp:e?Gp:Qp)(n,e))},text:function(t){return arguments.length?this.each(null==t?Kp:("function"==typeof t?e_:t_)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?n_:("function"==typeof t?i_:r_)(t)):this.node().innerHTML},raise:function(){return this.each(a_)},lower:function(){return this.each(o_)},append:function(t){var e="function"==typeof t?t:dp(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:dp(t),r=null==e?l_:"function"==typeof e?e:pp(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(u_)},clone:function(t){return this.select(t?c_:s_)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,a=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}(t+""),o=a.length;if(!(arguments.length<2)){for(l=e?h_:f_,r=0;r<o;++r)this.each(l(a[r],e,n));return this}var l=this.node().__on;if(l)for(var u,s=0,c=l.length;s<c;++s)for(r=0,u=l[s];r<o;++r)if((i=a[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(t,e){return this.each(("function"==typeof e?p_:g_)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],a=0,o=i.length;a<o;++a)(r=i[a])&&(yield r)}};var x_=0;var w_=Object.freeze({left:!0,top:!0,right:!0,bottom:!0}),k_=Object.freeze({left:!1,top:!1,right:!1,bottom:!1});var M_=yt("start","end","cancel","interrupt"),T_=[];function A_(t,e,n,r,i,a){var o=t.__transition;if(o){if(n in o)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function a(t){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay)}function o(a){var s,c,f,h;if(1!==n.state)return u();for(s in i)if((h=i[s]).name===n.name){if(3===h.state)return Yt(o);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete i[s]):+s<e&&(h.state=6,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete i[s])}if(Yt((function(){3===n.state&&(n.state=4,n.timer.restart(l,n.delay,n.time),l(a))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(f=n.tween.length),s=0,c=-1;s<f;++s)(h=n.tween[s].value.call(t,t.__data__,n.index,n.group))&&(r[++c]=h);r.length=c+1}}function l(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(u),n.state=5,1),a=-1,o=r.length;++a<o;)r[a].call(t,i);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){for(var r in n.state=6,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=Ut(a,0,n.time)}(t,n,{name:e,index:r,group:i,on:M_,tween:T_,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})}function N_(t,e){var n=S_(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function C_(t,e){var n=S_(t,e);if(n.state>3)throw new Error("too late; already running");return n}function S_(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function E_(t,e){var n,r;return function(){var i=C_(this,t),a=i.tween;if(a!==n)for(var o=0,l=(r=n=a).length;o<l;++o)if(r[o].name===e){(r=r.slice()).splice(o,1);break}i.tween=r}}function z_(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var a=C_(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var l={name:e,value:n},u=0,s=i.length;u<s;++u)if(i[u].name===e){i[u]=l;break}u===s&&i.push(l)}a.tween=i}}function D_(t,e,n){var r=t._id;return t.each((function(){var t=C_(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return S_(t,r).value[e]}}function F_(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function O_(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function j_(){}var U_=.7,H_=1/U_,L_="\\s*([+-]?\\d+)\\s*",q_="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",P_="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Y_=/^#([0-9a-f]{3,8})$/,$_=new RegExp("^rgb\\("+[L_,L_,L_]+"\\)$"),R_=new RegExp("^rgb\\("+[P_,P_,P_]+"\\)$"),B_=new RegExp("^rgba\\("+[L_,L_,L_,q_]+"\\)$"),I_=new RegExp("^rgba\\("+[P_,P_,P_,q_]+"\\)$"),W_=new RegExp("^hsl\\("+[q_,P_,P_]+"\\)$"),V_=new RegExp("^hsla\\("+[q_,P_,P_,q_]+"\\)$"),X_={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Z_(){return this.rgb().formatHex()}function G_(){return this.rgb().formatRgb()}function Q_(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Y_.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?J_(e):3===n?new tb(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?K_(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?K_(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=$_.exec(t))?new tb(e[1],e[2],e[3],1):(e=R_.exec(t))?new tb(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=B_.exec(t))?K_(e[1],e[2],e[3],e[4]):(e=I_.exec(t))?K_(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=W_.exec(t))?ib(e[1],e[2]/100,e[3]/100,1):(e=V_.exec(t))?ib(e[1],e[2]/100,e[3]/100,e[4]):X_.hasOwnProperty(t)?J_(X_[t]):"transparent"===t?new tb(NaN,NaN,NaN,0):null}function J_(t){return new tb(t>>16&255,t>>8&255,255&t,1)}function K_(t,e,n,r){return r<=0&&(t=e=n=NaN),new tb(t,e,n,r)}function tb(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function eb(){return"#"+rb(this.r)+rb(this.g)+rb(this.b)}function nb(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function rb(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function ib(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ob(t,e,n,r)}function ab(t){if(t instanceof ob)return new ob(t.h,t.s,t.l,t.opacity);if(t instanceof j_||(t=Q_(t)),!t)return new ob;if(t instanceof ob)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,l=a-i,u=(a+i)/2;return l?(o=e===a?(n-r)/l+6*(n<r):n===a?(r-e)/l+2:(e-n)/l+4,l/=u<.5?a+i:2-a-i,o*=60):l=u>0&&u<1?0:o,new ob(o,l,u,t.opacity)}function ob(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function lb(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function ub(t,e){var n;return("number"==typeof e?hn:e instanceof Q_?on:(n=Q_(e))?(e=n,on):_n)(t,e)}function sb(t){return function(){this.removeAttribute(t)}}function cb(t){return function(){this.removeAttributeNS(t.space,t.local)}}function fb(t,e,n){var r,i,a=n+"";return function(){var o=this.getAttribute(t);return o===a?null:o===r?i:i=e(r=o,n)}}function hb(t,e,n){var r,i,a=n+"";return function(){var o=this.getAttributeNS(t.space,t.local);return o===a?null:o===r?i:i=e(r=o,n)}}function db(t,e,n){var r,i,a;return function(){var o,l,u=n(this);if(null!=u)return(o=this.getAttribute(t))===(l=u+"")?null:o===r&&l===i?a:(i=l,a=e(r=o,u));this.removeAttribute(t)}}function gb(t,e,n){var r,i,a;return function(){var o,l,u=n(this);if(null!=u)return(o=this.getAttributeNS(t.space,t.local))===(l=u+"")?null:o===r&&l===i?a:(i=l,a=e(r=o,u));this.removeAttributeNS(t.space,t.local)}}function pb(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}(t,i)),n}return i._value=e,i}function _b(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}(t,i)),n}return i._value=e,i}function bb(t,e){return function(){N_(this,t).delay=+e.apply(this,arguments)}}function mb(t,e){return e=+e,function(){N_(this,t).delay=e}}function yb(t,e){return function(){C_(this,t).duration=+e.apply(this,arguments)}}function vb(t,e){return e=+e,function(){C_(this,t).duration=e}}F_(j_,Q_,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Z_,formatHex:Z_,formatHsl:function(){return ab(this).formatHsl()},formatRgb:G_,toString:G_}),F_(tb,(function(t,e,n,r){return 1===arguments.length?((i=t)instanceof j_||(i=Q_(i)),i?new tb((i=i.rgb()).r,i.g,i.b,i.opacity):new tb):new tb(t,e,n,null==r?1:r);var i}),O_(j_,{brighter:function(t){return t=null==t?H_:Math.pow(H_,t),new tb(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?U_:Math.pow(U_,t),new tb(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:eb,formatHex:eb,formatRgb:nb,toString:nb})),F_(ob,(function(t,e,n,r){return 1===arguments.length?ab(t):new ob(t,e,n,null==r?1:r)}),O_(j_,{brighter:function(t){return t=null==t?H_:Math.pow(H_,t),new ob(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?U_:Math.pow(U_,t),new ob(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new tb(lb(t>=240?t-240:t+120,i,r),lb(t,i,r),lb(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var xb=m_.prototype.constructor;function wb(t){return function(){this.style.removeProperty(t)}}var kb=0;function Mb(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Tb(){return++kb}var Ab=m_.prototype;Mb.prototype={constructor:Mb,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=pp(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var l,u,s=r[o],c=s.length,f=a[o]=new Array(c),h=0;h<c;++h)(l=s[h])&&(u=t.call(l,l.__data__,h,s))&&("__data__"in l&&(u.__data__=l.__data__),f[h]=u,A_(f[h],e,n,h,f,S_(l,n)));return new Mb(a,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=mp(t));for(var r=this._groups,i=r.length,a=[],o=[],l=0;l<i;++l)for(var u,s=r[l],c=s.length,f=0;f<c;++f)if(u=s[f]){for(var h,d=t.call(u,u.__data__,f,s),g=S_(u,n),p=0,_=d.length;p<_;++p)(h=d[p])&&A_(h,e,n,p,d,g);a.push(d),o.push(u)}return new Mb(a,o,e,n)},filter:function(t){"function"!=typeof t&&(t=yp(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o=e[i],l=o.length,u=r[i]=[],s=0;s<l;++s)(a=o[s])&&t.call(a,a.__data__,s,o)&&u.push(a);return new Mb(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),l=0;l<a;++l)for(var u,s=e[l],c=n[l],f=s.length,h=o[l]=new Array(f),d=0;d<f;++d)(u=s[d]||c[d])&&(h[d]=u);for(;l<r;++l)o[l]=e[l];return new Mb(o,this._parents,this._name,this._id)},selection:function(){return new xb(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=Tb(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o,l=r[a],u=l.length,s=0;s<u;++s)if(o=l[s]){var c=S_(o,e);A_(o,t,n,s,l,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Mb(r,this._parents,t,n)},call:Ab.call,nodes:Ab.nodes,node:Ab.node,size:Ab.size,empty:Ab.empty,each:Ab.each,on:function(t,e){var n=this._id;return arguments.length<2?S_(this.node(),n).on.on(t):this.each(function(t,e,n){var r,i,a=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?N_:C_;return function(){var o=a(this,t),l=o.on;l!==r&&(i=(r=l).copy()).on(e,n),o.on=i}}(n,t,e))},attr:function(t,e){var n=cp(t),r="transform"===n?Cn:ub;return this.attrTween(t,"function"==typeof e?(n.local?gb:db)(n,r,D_(this,"attr."+t,e)):null==e?(n.local?cb:sb)(n):(n.local?hb:fb)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=cp(t);return this.tween(n,(r.local?pb:_b)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?Nn:ub;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var a=Yp(this,t),o=(this.style.removeProperty(t),Yp(this,t));return a===o?null:a===n&&o===r?i:i=e(n=a,r=o)}}(t,r)).on("end.style."+t,wb(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,a;return function(){var o=Yp(this,t),l=n(this),u=l+"";return null==l&&(this.style.removeProperty(t),u=l=Yp(this,t)),o===u?null:o===r&&u===i?a:(i=u,a=e(r=o,l))}}(t,r,D_(this,"style."+t,e))).each(function(t,e){var n,r,i,a,o="style."+e,l="end."+o;return function(){var u=C_(this,t),s=u.on,c=null==u.value[o]?a||(a=wb(e)):void 0;s===n&&i===c||(r=(n=s).copy()).on(l,i=c),u.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,a=n+"";return function(){var o=Yp(this,t);return o===a?null:o===r?i:i=e(r=o,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,function(t,e,n){var r,i;function a(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&function(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}(t,a,n)),r}return a._value=e,a}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(D_(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&function(t){return function(e){this.textContent=t.call(this,e)}}(r)),e}return r._value=t,r}(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=S_(this.node(),n).tween,a=0,o=i.length;a<o;++a)if((r=i[a]).name===t)return r.value;return null}return this.each((null==e?E_:z_)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?bb:mb)(e,t)):S_(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?yb:vb)(e,t)):S_(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){C_(this,t).ease=e}}(e,t)):S_(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;C_(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(a,o){var l={value:o},u={value:function(){0==--i&&a()}};n.each((function(){var n=C_(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(l),e._.interrupt.push(l),e._.end.push(u)),n.on=e})),0===i&&a()}))},[Symbol.iterator]:Ab[Symbol.iterator]};var Nb={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Cb(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Sb(t){return""+t}function Eb(t){var e=Sb;return function(n){return void 0===n?e||Sb:(e=n,t)}}function zb(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Db(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Fb(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}m_.prototype.interrupt=function(t){return this.each((function(){!function(t,e){var n,r,i,a=t.__transition,o=!0;if(a){for(i in e=null==e?null:e+"",a)(n=a[i]).name===e?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete a[i]):o=!1;o&&delete t.__transition}}(this,t)}))},m_.prototype.transition=function(t){var e,n;t instanceof Mb?(e=t._id,t=t._name):(e=Tb(),(n=Nb).time=Ft(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o,l=r[a],u=l.length,s=0;s<u;++s)(o=l[s])&&A_(o,t,e,s,l,n||Cb(o,e));return new Mb(r,this._parents,t,e)};var Ob,jb,Ub={"-":"",_:" ",0:"0"},Hb=/^\s*\d+/,Lb=/^%/,qb=/[\\^$*+?|[\]().{}]/g;function Pb(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function Yb(t){return t.replace(qb,"\\$&")}function $b(t){return new RegExp("^(?:"+t.map(Yb).join("|")+")","i")}function Rb(t){return new Map(t.map(((t,e)=>[t.toLowerCase(),e])))}function Bb(t,e,n){var r=Hb.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Ib(t,e,n){var r=Hb.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Wb(t,e,n){var r=Hb.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Vb(t,e,n){var r=Hb.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Xb(t,e,n){var r=Hb.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Zb(t,e,n){var r=Hb.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Gb(t,e,n){var r=Hb.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Qb(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Jb(t,e,n){var r=Hb.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function Kb(t,e,n){var r=Hb.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function tm(t,e,n){var r=Hb.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function em(t,e,n){var r=Hb.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function nm(t,e,n){var r=Hb.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function rm(t,e,n){var r=Hb.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function im(t,e,n){var r=Hb.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function am(t,e,n){var r=Hb.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function om(t,e,n){var r=Hb.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function lm(t,e,n){var r=Lb.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function um(t,e,n){var r=Hb.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function sm(t,e,n){var r=Hb.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function cm(t,e){return Pb(t.getDate(),e,2)}function fm(t,e){return Pb(t.getHours(),e,2)}function hm(t,e){return Pb(t.getHours()%12||12,e,2)}function dm(t,e){return Pb(1+Fa.count($a(t),t),e,3)}function gm(t,e){return Pb(t.getMilliseconds(),e,3)}function pm(t,e){return gm(t,e)+"000"}function _m(t,e){return Pb(t.getMonth()+1,e,2)}function bm(t,e){return Pb(t.getMinutes(),e,2)}function mm(t,e){return Pb(t.getSeconds(),e,2)}function ym(t){var e=t.getDay();return 0===e?7:e}function vm(t,e){return Pb(ja.count($a(t)-1,t),e,2)}function xm(t){var e=t.getDay();return e>=4||0===e?qa(t):qa.ceil(t)}function wm(t,e){return t=xm(t),Pb(qa.count($a(t),t)+(4===$a(t).getDay()),e,2)}function km(t){return t.getDay()}function Mm(t,e){return Pb(Ua.count($a(t)-1,t),e,2)}function Tm(t,e){return Pb(t.getFullYear()%100,e,2)}function Am(t,e){return Pb((t=xm(t)).getFullYear()%100,e,2)}function Nm(t,e){return Pb(t.getFullYear()%1e4,e,4)}function Cm(t,e){var n=t.getDay();return Pb((t=n>=4||0===n?qa(t):qa.ceil(t)).getFullYear()%1e4,e,4)}function Sm(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Pb(e/60|0,"0",2)+Pb(e%60,"0",2)}function Em(t,e){return Pb(t.getUTCDate(),e,2)}function zm(t,e){return Pb(t.getUTCHours(),e,2)}function Dm(t,e){return Pb(t.getUTCHours()%12||12,e,2)}function Fm(t,e){return Pb(1+Ia.count(eo(t),t),e,3)}function Om(t,e){return Pb(t.getUTCMilliseconds(),e,3)}function jm(t,e){return Om(t,e)+"000"}function Um(t,e){return Pb(t.getUTCMonth()+1,e,2)}function Hm(t,e){return Pb(t.getUTCMinutes(),e,2)}function Lm(t,e){return Pb(t.getUTCSeconds(),e,2)}function qm(t){var e=t.getUTCDay();return 0===e?7:e}function Pm(t,e){return Pb(Va.count(eo(t)-1,t),e,2)}function Ym(t){var e=t.getUTCDay();return e>=4||0===e?Qa(t):Qa.ceil(t)}function $m(t,e){return t=Ym(t),Pb(Qa.count(eo(t),t)+(4===eo(t).getUTCDay()),e,2)}function Rm(t){return t.getUTCDay()}function Bm(t,e){return Pb(Xa.count(eo(t)-1,t),e,2)}function Im(t,e){return Pb(t.getUTCFullYear()%100,e,2)}function Wm(t,e){return Pb((t=Ym(t)).getUTCFullYear()%100,e,2)}function Vm(t,e){return Pb(t.getUTCFullYear()%1e4,e,4)}function Xm(t,e){var n=t.getUTCDay();return Pb((t=n>=4||0===n?Qa(t):Qa.ceil(t)).getUTCFullYear()%1e4,e,4)}function Zm(){return"+0000"}function Gm(){return"%"}function Qm(t){return+t}function Jm(t){return Math.floor(+t/1e3)}!function(t){Ob=function(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,l=t.months,u=t.shortMonths,s=$b(i),c=Rb(i),f=$b(a),h=Rb(a),d=$b(o),g=Rb(o),p=$b(l),_=Rb(l),b=$b(u),m=Rb(u),y={a:function(t){return o[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return l[t.getMonth()]},c:null,d:cm,e:cm,f:pm,g:Am,G:Cm,H:fm,I:hm,j:dm,L:gm,m:_m,M:bm,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Qm,s:Jm,S:mm,u:ym,U:vm,V:wm,w:km,W:Mm,x:null,X:null,y:Tm,Y:Nm,Z:Sm,"%":Gm},v={a:function(t){return o[t.getUTCDay()]},A:function(t){return a[t.getUTCDay()]},b:function(t){return u[t.getUTCMonth()]},B:function(t){return l[t.getUTCMonth()]},c:null,d:Em,e:Em,f:jm,g:Wm,G:Xm,H:zm,I:Dm,j:Fm,L:Om,m:Um,M:Hm,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Qm,s:Jm,S:Lm,u:qm,U:Pm,V:$m,w:Rm,W:Bm,x:null,X:null,y:Im,Y:Vm,Z:Zm,"%":Gm},x={a:function(t,e,n){var r=d.exec(e.slice(n));return r?(t.w=g.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(t,e,n){var r=f.exec(e.slice(n));return r?(t.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(t,e,n){var r=b.exec(e.slice(n));return r?(t.m=m.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(t,e,n){var r=p.exec(e.slice(n));return r?(t.m=_.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(t,n,r){return M(t,e,n,r)},d:tm,e:tm,f:om,g:Gb,G:Zb,H:nm,I:nm,j:em,L:am,m:Kb,M:rm,p:function(t,e,n){var r=s.exec(e.slice(n));return r?(t.p=c.get(r[0].toLowerCase()),n+r[0].length):-1},q:Jb,Q:um,s:sm,S:im,u:Ib,U:Wb,V:Vb,w:Bb,W:Xb,x:function(t,e,r){return M(t,n,e,r)},X:function(t,e,n){return M(t,r,e,n)},y:Gb,Y:Zb,Z:Qb,"%":lm};function w(t,e){return function(n){var r,i,a,o=[],l=-1,u=0,s=t.length;for(n instanceof Date||(n=new Date(+n));++l<s;)37===t.charCodeAt(l)&&(o.push(t.slice(u,l)),null!=(i=Ub[r=t.charAt(++l)])?r=t.charAt(++l):i="e"===r?" ":"0",(a=e[r])&&(r=a(n,i)),o.push(r),u=l+1);return o.push(t.slice(u,l)),o.join("")}}function k(t,e){return function(n){var r,i,a=Fb(1900,void 0,1);if(M(a,t,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(e&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(r=Db(Fb(a.y,0,1))).getUTCDay(),r=i>4||0===i?Xa.ceil(r):Xa(r),r=Ia.offset(r,7*(a.V-1)),a.y=r.getUTCFullYear(),a.m=r.getUTCMonth(),a.d=r.getUTCDate()+(a.w+6)%7):(i=(r=zb(Fb(a.y,0,1))).getDay(),r=i>4||0===i?Ua.ceil(r):Ua(r),r=Fa.offset(r,7*(a.V-1)),a.y=r.getFullYear(),a.m=r.getMonth(),a.d=r.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),i="Z"in a?Db(Fb(a.y,0,1)).getUTCDay():zb(Fb(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,Db(a)):zb(a)}}function M(t,e,n,r){for(var i,a,o=0,l=e.length,u=n.length;o<l;){if(r>=u)return-1;if(37===(i=e.charCodeAt(o++))){if(i=e.charAt(o++),!(a=x[i in Ub?e.charAt(o++):i])||(r=a(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return y.x=w(n,y),y.X=w(r,y),y.c=w(e,y),v.x=w(n,v),v.X=w(r,v),v.c=w(e,v),{format:function(t){var e=w(t+="",y);return e.toString=function(){return t},e},parse:function(t){var e=k(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=w(t+="",v);return e.toString=function(){return t},e},utcParse:function(t){var e=k(t+="",!0);return e.toString=function(){return t},e}}}(t),Ob.format,jb=Ob.parse,Ob.utcFormat,Ob.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Km=parseFloat,ty=jb("%Y-%m-%d");function ey(t){var e=Km;return function(n){return void 0===n?e||Km:(e=n,t)}}function ny(t){var e=ty;return function(n){return void 0===n?e||ty:(e=n,t)}}function ry(t){var e=[],n={};return t.forEach((function(t){n[t]||(e.push(t),n[t]=!0)})),e}var iy=Array.isArray;function ay(t){return t}function oy(t){return{prop:function(e,n){Object.defineProperty(t,e,{value:n,enumerable:!0})},getter:function(e,n){Object.defineProperty(t,e,{get:n,enumerable:!0})},method:function(e,n){Object.defineProperty(t,e,{value:n})}}}function ly(t,e){var n=1;return t[e?"reduce":"reduceRight"]((function(t,e){return t[e]||(t[e]=n),n+=1,t}),{})}function uy(t,e){var n=1;return t[e?"reduce":"reduceRight"]((function(t,e){return t[e]=n++,t}),{})}function sy(t,e,n,r){var i;i="dense"===r?function(t,e){var n=1;return t[e?"reduce":"reduceRight"]((function(t,e){return t[e]||(t[e]=n++),t}),{})}(e,n):"fractional"===r?function(t,e){var n=ly(t,e),r=uy(t,e);return Object.keys(n).reduce((function(t,e){return t[e]=(n[e]+r[e])/2,t}),{})}(e,n):"worst"===r?uy(e,n):ly(e,n);var a=function(t){return i[t]};return"ordinal"===r&&(a=function(t){return i[t]++}),t.map(a)}function cy(t){return t=t||Math.random,function(e,n){var r=n-e+1;return Math.floor(t()*r)+e}}function fy(t,e){return t[cy(e)(0,t.length-1)]}function hy(t,e,n,r){var i,a=t.length;if(n=void 0!==e&&n,e=void 0!==e?Math.floor(e):a,!a||e<1)return[];var o=cy(r);if(n||1===e){i=[];for(var l=0;l<e;l++)i.push(t[o(0,a-1)]);return i}i=t.slice();var u=Math.min(a,e);for(l=0;l<u;l++){var s=o(l,a-1);if(s!==l){var c=i[s],f=i[l];i[l]=c,i[s]=f}}return i.length=u,i}function dy(t,e,n){if(!e.length)return t.slice();for(var r=0,i=t.reduce((function(t,i){for(;t.length===e[r];)t.push(n),r++;return t.push(i),t}),[]);e[r++];)i.push(n);return i}function gy(t,e){return iy(e)?e.map((function(e){return pa(t,e)})):pa(t,e)}function py(t){t.getter("variance",(function(){return function(t){for(var e,n,r=t.length,i=0,a=-1,o=0,l=0;++a<r;)isNaN(e=oa(t[a]))||(l+=(n=e-o)*(e-(o+=n/++i)));if(i>1)return l/(i-1)}(this.values)})),t.getter("sd",(function(){return Math.sqrt(this.variance)})),t.getter("median",(function(){return gy(this.sorted_values,.5)})),t.getter("iqr",(function(){var t=gy(this.sorted_values,[.25,.75]);return t[1]-t[0]})),t.method("quantiles",(function(t){return gy(this.sorted_values,t)})),t.method("quartiles",(function(){return gy(this.sorted_values,[.25,.5,.75])}))}function _y(t){return t>=-90&&t<=90}function by(t){return t>=-180&&t<=180}function my(t,e,n){return t.length?n?e(t.min)&&e(t.max)?1:0:t.values.reduce((function(t,n){return t+e(n)}),0)/t.length:null}var yy=function(){var t={},e=oy(t);return function(t){t.method("unsorted",(function(){return this.values.slice()})),t.method("ascending",(function(){return this.sorted_values.slice()})),t.method("descending",(function(){return this.sorted_values.slice().reverse()})),t.method("unique",(function(){return ry(this.values)})),t.method("uniqueAscending",(function(){return ry(this.sorted_values)})),t.method("uniqueDescending",(function(){return ry(this.sorted_values).reverse()}))}(e),py(e),function(t){t.method("random",(function(t){return fy(this.values,t)})),t.method("sample",(function(t,e,n){return hy(this.values,t,e,n)}))}(e),function(t){t.method("rank",(function(t,e){return sy(this.values,this.sorted_values,t,e)}))}(e),function(t){t.method("unclean",(function(t){if(t&&t.length<this.values.length)throw new RangeError("dataset is too short");if(t&&t.length>this.values.length)throw new RangeError("dataset is too long");return dy(t=t||this.values,this.dropped_indexes,NaN)}))}(e),function(t){t.method("latitudeScore",(function(t){return my(this,_y,t)})),t.method("longitudeScore",(function(t){return my(this,by,t)}))}(e),t}();function vy(t,e){var n=Object.create(yy);return function(t,e,n){n=n||ay;var r=1/0,i=-1/0,a=null,o=0,l=[],u=Object.freeze(e.reduce((function(t,e,a){var u=n(e);return"number"!=typeof u||isNaN(u)?l.push(a):(t.push(u),r=Math.min(r,u),i=Math.max(i,u),o+=u),t}),[])),s=oy(t);s.prop("enhanced_array",!0),s.prop("numeric_array",!0),s.prop("values",u),s.prop("min",u.length?r:null),s.prop("max",u.length?i:null),s.prop("sum",o),s.prop("mean",u.length?o/u.length:null),s.prop("range",u.length?i-r:null),s.prop("length",u.length),s.prop("dropped_indexes",Object.freeze(l)),s.method("extent",(function(){return[this.min,this.max]})),s.getter("sorted_values",(function(){var t;return a||(t=-1/0,u.every((function(e){if(e>=t)return t=e,!0}))&&(a=u),a=function(t){var e=1/0;return t.every((function(t){if(t<=e)return e=t,!0}))}(u)?Object.freeze(u.slice().reverse()):Object.freeze(u.slice().sort(ea))),a}))}(n,t,e),n}var xy=Object.freeze(["min","max","mean"]),wy=Object.freeze(["extent","random","sample","unsorted","ascending","descending","unique","uniqueAscending","uniqueDescending","quartiles","quantiles","unclean"]);function ky(t){return"number"!=typeof t?null:new Date(t)}function My(t,e){return function(){var n=t[e].apply(t,arguments);return Array.isArray(n)?n.map(ky):ky(n)}}function Ty(t,e,n){n=n||ay;var r=vy(e.map((function(t){var e,r=n(t);return e=r,"[object Date]"!==Object.prototype.toString.call(e)||isNaN(e.getTime())?null:r.getTime()}))),i=oy(t);i.prop("enhanced_array",!0),i.prop("datetime_array",!0),i.getter("values",(function(){return Object.freeze(r.values.map(ky))})),i.getter("sorted_values",(function(){return Object.freeze(r.sorted_values.map(ky))})),i.getter("median",(function(){return ky(r.median)})),i.prop("length",r.values.length),i.prop("dropped_indexes",r.dropped_indexes),i.method("rank",(function(){return r.rank(arguments)}));var a=My.bind(null,r);return xy.forEach((function(t){i.prop(t,ky(r[t]))})),wy.forEach((function(t){i.method(t,a(t))})),t}function Ay(t,e){var n={};return Ty(n,t,e),n}var Ny,Cy=function(){var t={},e=oy(t);return function(t){t.method("unsorted",(function(){return this.values.slice()})),t.method("ascending",(function(){return this.sorted_values.slice()})),t.method("descending",(function(){return this.sorted_values.slice().reverse()})),t.method("unique",(function(){return ry(this.values)})),t.method("uniqueAscending",(function(){return ry(this.sorted_values)})),t.method("uniqueDescending",(function(){return ry(this.sorted_values).reverse()}))}(e),function(t){t.method("random",(function(t){return fy(this.values,t)})),t.method("sample",(function(t,e,n){return hy(this.values,t,e,n)}))}(e),function(t){t.method("rank",(function(t,e){return sy(this.values,this.sorted_values,t,e)}))}(e),function(t){t.method("unclean",(function(t){if(t&&t.length<this.values.length)throw new RangeError("dataset is too short");if(t&&t.length>this.values.length)throw new RangeError("dataset is too long");return dy(t=t||this.values,this.dropped_indexes)}))}(e),t}();function Sy(t,e){var n=Object.create(Cy);return function(t,e,n){n=n||ay;for(var r=null,i=[],a=0,o=null,l=0;null===o&&l<e.length;){var u=n(e[l++]);"string"==typeof u&&(o=u)}var s=o,c=Object.freeze(e.reduce((function(t,e,r){var l=n(e);return"string"==typeof l?(t.push(l),o=l<o?l:o,s=l>s?l:s,l||a++):i.push(r),t}),[])),f=oy(t);f.prop("enhanced_array",!0),f.prop("string_array",!0),f.prop("values",c),f.prop("min",o),f.prop("max",s),f.prop("length",c.length),f.prop("dropped_indexes",Object.freeze(i)),f.prop("n_empty",a),f.method("extent",(function(){return[this.min,this.max]})),f.getter("sorted_values",(function(){return r||(function(t){if(t.length<2)return!0;var e=t[0];return t.every((function(t){if(t>=e)return e=t,!0}))}(c)&&(r=c),r=function(t){if(t.length<2)return!0;var e=t[0];return t.every((function(t){if(t<=e)return e=t,!0}))}(c)?Object.freeze(c.slice().reverse()):Object.freeze(c.slice().sort())),r}))}(n,t,e),n}function Ey(t,e,n){var r=getComputedStyle(t.node()).fontFamily;return(n?n+" ":"")+(Ny(e)+"px ")+r}function zy(t,e){return"translate("+t+","+e+")"}function Dy(t,e,n){return"rotate("+t+","+(e=e||0)+","+(n=n||0)+")"}var Fy=Math.log10||function(t){return Math.log(t)*Math.LOG10E};function Oy(t){return Math.floor(Fy(Math.abs(t)))}function jy(t){if(0===t)return 0;for(var e=Math.abs(String(t).replace(".",""));0!==e&&e%10==0;)e/=10;return Oy(e)+1}function Uy(t,e){var n=t[0][0],r=t[1][0],i=e[0][0],a=e[1][0],o=t[0][1],l=t[1][1],u=e[0][1],s=e[1][1],c=(n-r)*(u-s)-(i-a)*(o-l);if(!c)return!(n<i&&n<a&&r<i&&r<a||n>i&&n>a&&r>i&&r>a||o<u&&o<s&&l<u&&l<s||o>u&&o>s&&l>u&&l>s);var f=((n-i)*(u-s)-(o-u)*(i-a))/c;if(f<0||f>1)return!1;var h=-((n-r)*(o-u)-(o-l)*(n-i))/c;return!(h<0||h>1)}function Hy(t){return t&&"number"==typeof t?t>0?1:-1:0}function Ly(t){var e=t.type;(t=t.copy()).type=e;var n=function(n){var r=t(n);if(isNaN(r)||Math.abs(r)===1/0){var i,a=t.range();if("numeric"!==e)i=a[0]>a[1];else{var o=t.domain();i=Hy(o[1]-o[0])!==Hy(a[1]-a[0])}r=-1e6*(i?-1:1)}return r};return["domain","range"].forEach((function(e){n[e]=function(){var r=t[e].apply(t,arguments);return r===t?n:r}})),n.copy=function(){return Ly(t)},n.type=t.type,n.step=t.step,n}function qy(t){return"[object Date]"===Object.prototype.toString.call(t)}function Py(t){return t.split("\n").filter(Boolean).map((function(t){return t.trim()}))}var Yy="Input data must be an array or Flourish array";function $y(t,e){if(!t)throw new TypeError(Yy);if(t.enhanced_array)return t;if(!Array.isArray(t))throw new TypeError(Yy);for(var n=e||function(t){return t},r=0;r<t.length;r++){var i=n(t[r]),a=typeof i;if("number"===a)return vy(t,e);if("string"===a)return Sy(t,e);if(qy(i))return Ay(t,e)}return vy(t,e)}function Ry(t){var e=$y([]);return function(n,r){return void 0===n?e:(e=$y(n,r),t)}}var By="Testing";function Iy(t){return t*(Math.PI/180)}function Wy(t,e){var n;return t.filter((function(t){var r=e(t);if(r!==n)return n=r,!0}))}function Vy(t){var e=void 0!==t.max_space?t.max_space:100,n=void 0!==t.text_height?t.text_height:Ny(1),r=t.max_lines,i=t.angle||0,a=document.createElement("canvas").getContext("2d");a.font=t.font;var o,l=Iy(i);return o=(e-n*Math.sin(l))/Math.cos(l),function(t){"number"==typeof t&&(t=t.toString()),t||(t="");var e=[],n=0,i=a.measureText(t).width;if(i<=o)e.push(t),n=i;else{for(var l=t.trim().split(/\s+/g),u="",s=0;s<l.length;s++){var c=l[s],f=u+(u?" ":"")+c,h=a.measureText(f).width;if(!(h<=o)){if(!(e.length+1==r)&&u)if(e.push(u),a.measureText(c).width<=o){u=c;continue}var d=1,g=f;do{g=f.substring(0,f.length-d)+"…",h=a.measureText(g).width}while(h>o&&++d<f.length);n=Math.max(n,h),u=g;break}u=f,n=Math.max(n,h)}e.push(u)}return{lines:e,text_width:n}}}function Xy(t,e,n){var r=["px","rem","fraction"];e=e||"width",n="number"==typeof n?n:50;var i=.5,a="fraction";return function(o,l){return void 0===o?(s=t[e](),"px"===a?u=i:"rem"===a?u=Ny(i):"fraction"===a&&(u=Math.max(n,i*s)),{px:u,rem:"rem"===a?i:u/Ny(1),fraction:"fraction"===a?i:u/s,unit:a}):(i=Math.max(o,0),a=-1!==r.indexOf(l)?l:"px",t);var u,s}}function Zy(t,e,n){var r=e[n],i=n+"Data",a=n+"Format",o=n+"Ticks",l=Object.freeze([]),u=t.chart.select(".fl-y-axes"),s=function(){return l};return s._update=function(e){var n,s=t[i]().string_array?"string":"numeric",c=Ey(y_(".fl-y-axes"),r.tick_label_size,r.tick_label_weight),f="default"===r.tick_label_position?+r.tick_label_angle:0,h=0,d=t[a]();u.append("text").style("opacity",0).style("font",c).each((function(){var t=y_(this).text(By).node().getBoundingClientRect();n=t.height})).remove(),"object"==typeof e[0]&&(e=Wy(e,d));var g=Ny(r.tick_label_space);"auto"===r.tick_label_space_mode&&(g=t[o].autoLabelSpace().px);var p=Vy({text_height:n,max_space:g,font:c,angle:f,max_lines:f?1:r.tick_label_max_lines});return l=e.map((function(t,e){var i,a,o,l,u,c,g=p(d(t)),_=g.lines,b=g.text_width,m=0,y=n*_.length+(_.length-1)*r.tick_label_line_height;if(0===f||90===f)o=i=f?y:b,l=i,u=c=(a=f?b+Ny(.5):y)/2,0===f&&(m=_.length<2?0:(_.length-1)/2*(n*r.tick_label_line_height));else{var v=Iy(f),x=Math.sin(v),w=Math.cos(v);i=(o=y*x)+(l=b*w),a=(u=y*w)+(c=b*x)}h=Math.max(h,i);var k="numeric"===s?jy(t):null,M="numeric"===s?Oy(t):null;return Object.freeze({index:e,value:t,lines:_,type:s,significant_digits:k,exponent:M,text_width:b,text_height:n,box_width:i,box_height:a,box_width_above:o,box_width_below:l,box_height_above:u,box_height_below:c,multiline_offset:m})})),l.type=s,l.max_box_width="fixed"===r.tick_label_space_mode?Ny(r.tick_label_space):h,Object.freeze(l),t},s.autoLabelSpace=Xy(t),s}function Gy(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=()=>t[e+"Scale"]({domain_only:!0}).ticks();let r=n;return function(e){return void 0===e?r:(r=null===e?n:e,t)}}function Qy(t){var e="";return function(n){return void 0===n?e:(e=n,t)}}function Jy(t,e){var n=e.y,r=t.yTitle();if(!n.axis_visible||!r)return 0;var i=t.chart.select(".fl-left-axis .fl-axis-title"),a=Ey(i,n.title_size,n.title_weight),o=i.append("text").text(r).style("opacity",0).style("font",a),l=o.node().getBoundingClientRect().height;return o.remove(),l+2*Ny(n.title_padding)}function Ky(t,e){var n=e.y2,r=t.y2Title();if(!n.axis_visible||!r)return 0;var i=t.chart.select(".fl-right-axis .fl-axis-title"),a=Ey(i,n.title_size,n.title_weight),o=i.append("text").text(r).style("opacity",0).style("font",a),l=o.node().getBoundingClientRect().height;return o.remove(),l+2*Ny(n.title_padding)}function tv(t,e){var n=e.x,r=n.axis_position;if("off"===r)return 0;var i=0,a=0,o=0;if("top"===r||"bottom"==r){var l=t.xTicks();i=l.length&&"out"===n.tick_side&&"default"===n.tick_label_position?Ny(n.tick_length):0,o=l.max_box_height||0,a=l.length?Ny(n.tick_padding):0}var u=function(t,e){var n=e.x,r=t.xTitle();if("off"===n.axis_visible||!r)return 0;var i=t.chart.select(".fl-x-axis .fl-axis-title"),a=Ey(i,n.title_size,n.title_weight),o=i.append("text").text(r).style("opacity",0).style("font",a),l=o.node().getBoundingClientRect().height;return o.remove(),l+2*Ny(n.title_padding)}(t,e);return i+a+o+u}function ev(t,e){var n,r,i,a,o,l,u,s;o=l=u=s=0;var c=function(t,e){return"function"==typeof t&&(t=t(e)),void 0===t?e:t},f=function(){return{top:o,right:l,bottom:u,left:s}};return f._calculated=function(){return{top:n,right:r,bottom:i,left:a}},f._update=function(f){f=f||{},n=function(t,e){var n=e.x,r=0,i=["top","float-above"].includes(n.axis_position);!t.xHide()&&i&&(r=tv(t,e));var a=0,o=0,l=t.yHide()?[]:t.yTicks();if(l.length){var u=l[l.length-1];"default"==e.y.tick_label_position?a=.9*u.box_height_above:"above"==e.y.tick_label_position&&(a+=u.box_height)}"end"!==e.y.title_position||i||(a+=Jy(t,e));var s=t.y2Hide()?[]:t.y2Ticks();if(s.length){var c=s[s.length-1];"default"==e.y2.tick_label_position?o=.9*c.box_height_above:"above"==e.y2.tick_label_position&&(o+=c.box_height)}"end"!==e.y2.title_position||i||(o+=Ky(t,e));var f=Math.max(Ny(.25),a,o);return Math.max(r,f)}(t,e),r=function(t,e){var n=e.y2,r=0;if(n.axis_visible){var i=t.y2Hide()?[]:t.y2Ticks();r=(i.length&&"out"===n.tick_side&&"default"===n.tick_label_position?Ny(n.tick_length):0)+(i.length?Ny(n.tick_padding):0)+(i.max_box_width||0)+(t.y2Hide()||"side"!==n.title_position?0:Ky(t,e))}var a=Ny(.25),o=0,l=t.xHide()?[]:t.xTicks();if(l.length){var u=l[l.length-1];"default"==e.x.tick_label_position?o=.9*u.box_width_right:"right"==e.x.tick_label_position&&(o=u.box_width),a=Math.max(a,o)}return Math.max(r,a)}(t,e),i=function(t,e){var n=e.x,r=0,i=["bottom","float-below"].includes(n.axis_position);!t.xHide()&&i&&(r=tv(t,e));var a=0,o=0,l=t.yHide()?[]:t.yTicks();if(l.length){var u=l[0];"default"==e.y.tick_label_position?a=.9*u.box_height_below:"below"==e.y.tick_label_position&&(a+=u.box_height)}"end"!==e.y.title_position||i||"off"===n.axis_position||(a+=Jy(t,e));var s=t.y2Hide()?[]:t.y2Ticks();if(s.length){var c=s[0];"default"==e.y2.tick_label_position?o=.9*c.box_height_below:"below"==e.y2.tick_label_position&&(o+=c.box_height)}"end"!==e.y2.title_position||i||"off"===n.axis_position||(o+=Ky(t,e));var f=Math.max(Ny(.25),a,o);return Math.max(r,f)}(t,e),a=function(t,e){var n=e.y,r=0;if(n.axis_visible){var i=t.yHide()?[]:t.yTicks();r=(i.length&&"out"===n.tick_side&&"default"===n.tick_label_position?Ny(n.tick_length):0)+(i.length?Ny(n.tick_padding):0)+(i.max_box_width||0)+(t.yHide()||"side"!==n.title_position?0:Jy(t,e))}var a=Ny(.25),o=0,l=t.xHide()?[]:t.xTicks();if(l.length){var u=l[0];"default"==e.x.tick_label_position?o=.9*u.box_width_left:"left"==e.x.tick_label_position&&(o=u.box_width),a=Math.max(a,o)}return Math.max(r,a)}(t,e),o=c(f.top,n),l=c(f.right,r),u=c(f.bottom,i),s=c(f.left,a)},Object.defineProperty(f,"top",{get:function(){return o}}),Object.defineProperty(f,"right",{get:function(){return l}}),Object.defineProperty(f,"bottom",{get:function(){return u}}),Object.defineProperty(f,"left",{get:function(){return s}}),f}function nv(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function rv(t){let e=t,n=t;function r(t,e,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){const a=r+i>>>1;n(t[a],e)<0?r=a+1:i=a}return r}return 1===t.length&&(e=(e,n)=>t(e)-n,n=function(t){return(e,n)=>nv(t(e),n)}(t)),{left:r,center:function(t,n,i,a){null==i&&(i=0),null==a&&(a=t.length);const o=r(t,n,i,a-1);return o>i&&e(t[o-1],n)>-e(t[o],n)?o-1:o},right:function(t,e,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){const a=r+i>>>1;n(t[a],e)>0?i=a:r=a+1}return r}}}const iv=rv(nv).right;rv((function(t){return null===t?NaN:+t})).center;var av=Math.sqrt(50),ov=Math.sqrt(10),lv=Math.sqrt(2);function uv(t,e,n){var r,i,a,o,l=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(o=sv(t,e,n))||!isFinite(o))return[];if(o>0){let n=Math.round(t/o),r=Math.round(e/o);for(n*o<t&&++n,r*o>e&&--r,a=new Array(i=r-n+1);++l<i;)a[l]=(n+l)*o}else{o=-o;let n=Math.round(t*o),r=Math.round(e*o);for(n/o<t&&++n,r/o>e&&--r,a=new Array(i=r-n+1);++l<i;)a[l]=(n+l)/o}return r&&a.reverse(),a}function sv(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=av?10:a>=ov?5:a>=lv?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=av?10:a>=ov?5:a>=lv?2:1)}function cv(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=av?i*=10:a>=ov?i*=5:a>=lv&&(i*=2),e<t?-i:i}function fv(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}const hv=Symbol("implicit");function dv(){var t=new Map,e=[],n=[],r=hv;function i(i){var a=i+"",o=t.get(a);if(!o){if(r!==hv)return r;t.set(a,o=e.push(i))}return n[(o-1)%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new Map;for(const r of n){const n=r+"";t.has(n)||t.set(n,e.push(r))}return i},i.range=function(t){return arguments.length?(n=Array.from(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return dv(e,n).unknown(r)},fv.apply(i,arguments),i}function gv(){var t,e,n=dv().unknown(void 0),r=n.domain,i=n.range,a=0,o=1,l=!1,u=0,s=0,c=.5;function f(){var n=r().length,f=o<a,h=f?o:a,d=f?a:o;t=(d-h)/Math.max(1,n-u+2*s),l&&(t=Math.floor(t)),h+=(d-h-t*(n-u))*c,e=t*(1-u),l&&(h=Math.round(h),e=Math.round(e));var g=function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(i);++r<i;)a[r]=t+r*n;return a}(n).map((function(e){return h+t*e}));return i(f?g.reverse():g)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),f()):r()},n.range=function(t){return arguments.length?([a,o]=t,a=+a,o=+o,f()):[a,o]},n.rangeRound=function(t){return[a,o]=t,a=+a,o=+o,l=!0,f()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(l=!!t,f()):l},n.padding=function(t){return arguments.length?(u=Math.min(1,s=+t),f()):u},n.paddingInner=function(t){return arguments.length?(u=Math.min(1,t),f()):u},n.paddingOuter=function(t){return arguments.length?(s=+t,f()):s},n.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),f()):c},n.copy=function(){return gv(r(),[a,o]).round(l).paddingInner(u).paddingOuter(s).align(c)},fv.apply(f(),arguments)}function pv(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return pv(e())},t}function _v(){return pv(gv.apply(null,arguments).paddingInner(1))}function bv(t){return+t}var mv=[0,1];function yv(t){return t}function vv(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:function(t){return function(){return t}}(isNaN(e)?NaN:.5)}function xv(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=vv(i,r),a=n(o,a)):(r=vv(r,i),a=n(a,o)),function(t){return a(r(t))}}function wv(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=vv(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(e){var n=iv(t,e,1,r)-1;return a[n](i[n](e))}}function kv(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Mv(){var t,e,n,r,i,a,o=mv,l=mv,u=bn,s=yv;function c(){var t=Math.min(o.length,l.length);return s!==yv&&(s=function(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}(o[0],o[t-1])),r=t>2?wv:xv,i=a=null,f}function f(e){return isNaN(e=+e)?n:(i||(i=r(o.map(t),l,u)))(t(s(e)))}return f.invert=function(n){return s(e((a||(a=r(l,o.map(t),hn)))(n)))},f.domain=function(t){return arguments.length?(o=Array.from(t,bv),c()):o.slice()},f.range=function(t){return arguments.length?(l=Array.from(t),c()):l.slice()},f.rangeRound=function(t){return l=Array.from(t),u=mn,c()},f.clamp=function(t){return arguments.length?(s=!!t||yv,c()):s!==yv},f.interpolate=function(t){return arguments.length?(u=t,c()):u},f.unknown=function(t){return arguments.length?(n=t,f):n},function(n,r){return t=n,e=r,c()}}function Tv(){return Mv()(yv,yv)}function Av(t){var e=t.domain;return t.ticks=function(t){var n=e();return uv(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return function(t,e,n,r){var i,a=cv(t,e,n);switch((r=ql(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=Ql(a,o))||(r.precision=i),Wl(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=Jl(a,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=Gl(a))||(r.precision=i-2*("%"===r.type))}return Il(r)}(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i,a=e(),o=0,l=a.length-1,u=a[o],s=a[l],c=10;for(s<u&&(i=u,u=s,s=i,i=o,o=l,l=i);c-- >0;){if((i=sv(u,s,n))===r)return a[o]=u,a[l]=s,e(a);if(i>0)u=Math.floor(u/i)*i,s=Math.ceil(s/i)*i;else{if(!(i<0))break;u=Math.ceil(u*i)/i,s=Math.floor(s*i)/i}r=i}return t},t}function Nv(){var t=Tv();return t.copy=function(){return kv(t,Nv())},fv.apply(t,arguments),Av(t)}function Cv(t,e){var n,r=0,i=(t=t.slice()).length-1,a=t[r],o=t[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),t[r]=e.floor(a),t[i]=e.ceil(o),t}function Sv(t){return Math.log(t)}function Ev(t){return Math.exp(t)}function zv(t){return-Math.log(-t)}function Dv(t){return-Math.exp(-t)}function Fv(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Ov(t){return function(e){return-t(-e)}}function jv(t){var e,n,r=t(Sv,Ev),i=r.domain,a=10;function o(){return e=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}(a),n=function(t){return 10===t?Fv:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}(a),i()[0]<0?(e=Ov(e),n=Ov(n),t(zv,Dv)):t(Sv,Ev),r}return r.base=function(t){return arguments.length?(a=+t,o()):a},r.domain=function(t){return arguments.length?(i(t),o()):i()},r.ticks=function(t){var r,o=i(),l=o[0],u=o[o.length-1];(r=u<l)&&(h=l,l=u,u=h);var s,c,f,h=e(l),d=e(u),g=null==t?10:+t,p=[];if(!(a%1)&&d-h<g){if(h=Math.floor(h),d=Math.ceil(d),l>0){for(;h<=d;++h)for(c=1,s=n(h);c<a;++c)if(!((f=s*c)<l)){if(f>u)break;p.push(f)}}else for(;h<=d;++h)for(c=a-1,s=n(h);c>=1;--c)if(!((f=s*c)<l)){if(f>u)break;p.push(f)}2*p.length<g&&(p=uv(l,u,g))}else p=uv(h,d,Math.min(d-h,g)).map(n);return r?p.reverse():p},r.tickFormat=function(t,i){if(null==i&&(i=10===a?".0e":","),"function"!=typeof i&&(i=Il(i)),t===1/0)return i;null==t&&(t=10);var o=Math.max(1,a*t/r.ticks().length);return function(t){var r=t/n(Math.round(e(t)));return r*a<a-.5&&(r*=a),r<=o?i(t):""}},r.nice=function(){return i(Cv(i(),{floor:function(t){return n(Math.floor(e(t)))},ceil:function(t){return n(Math.ceil(e(t)))}}))},r}function Uv(){var t=jv(Mv()).domain([1,10]);return t.copy=function(){return kv(t,Uv()).base(t.base())},fv.apply(t,arguments),t}var Hv=1e3,Lv=6e4,qv=36e5,Pv=864e5,Yv=2592e6,$v=31536e6;function Rv(t){return new Date(t)}function Bv(t){return t instanceof Date?+t:+new Date(+t)}function Iv(t,e,n,r,i,a,o,l,u){var s=Tv(),c=s.invert,f=s.domain,h=u(".%L"),d=u(":%S"),g=u("%I:%M"),p=u("%I %p"),_=u("%a %d"),b=u("%b %d"),m=u("%B"),y=u("%Y"),v=[[o,1,Hv],[o,5,5e3],[o,15,15e3],[o,30,3e4],[a,1,Lv],[a,5,3e5],[a,15,9e5],[a,30,18e5],[i,1,qv],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,Pv],[r,2,1728e5],[n,1,6048e5],[e,1,Yv],[e,3,7776e6],[t,1,$v]];function x(l){return(o(l)<l?h:a(l)<l?d:i(l)<l?g:r(l)<l?p:e(l)<l?n(l)<l?_:b:t(l)<l?m:y)(l)}function w(e,n,r){if(null==e&&(e=10),"number"==typeof e){var i,a=Math.abs(r-n)/e,o=rv((function(t){return t[2]})).right(v,a);return o===v.length?(i=cv(n/$v,r/$v,e),e=t):o?(i=(o=v[a/v[o-1][2]<v[o][2]/a?o-1:o])[1],e=o[0]):(i=Math.max(cv(n,r,e),1),e=l),e.every(i)}return e}return s.invert=function(t){return new Date(c(t))},s.domain=function(t){return arguments.length?f(Array.from(t,Bv)):f().map(Rv)},s.ticks=function(t){var e,n=f(),r=n[0],i=n[n.length-1],a=i<r;return a&&(e=r,r=i,i=e),e=(e=w(t,r,i))?e.range(r,i+1):[],a?e.reverse():e},s.tickFormat=function(t,e){return null==e?x:u(e)},s.nice=function(t){var e=f();return(t=w(t,e[0],e[e.length-1]))?f(Cv(e,t)):s},s.copy=function(){return kv(s,Iv(t,e,n,r,i,a,o,l,u))},s}function Wv(){return fv.apply(Iv(eo,to,Va,Ia,Ba,Ra,Da,Na,uo).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Vv(t,e){let{edge_padding:n,flip:r}=e;var i=r?t.unique().reverse():t.unique(),a=_v().domain(i).padding(n/100);return a.type="ordinal",a}function Xv(t,e){var n=function(t,e){let{min:n,max:r,include_zero:i,nice:a,flip:o}=e;const l=100;if(n===r&&(n=r=null),null!==n&&null!==r)return o?[r,n]:[n,r];let u;if(t.range)u=t.extent(),a&&(u=Nv().domain(u).nice().domain()),i&&(u[0]>=0?u[0]=0:u[1]<0&&(u[1]=0),u=Nv().domain(u).nice().domain());else if(t.length){var s=t.min;u=s>0?[0,2*s]:s<0?[2*s,0]:[-50,50]}else u=[0,l];return null!==n?(u[0]=n,u[0]===u[1]&&(u[1]=n+(t.range||l))):null!==r&&(u[1]=r,u[0]===u[1]&&(u[0]=r-(t.range||l))),o?u.reverse():u}(t,e),r=Nv().domain(n);return r.type="numeric",r}function Zv(t,e){let{min:n,max:r,nice:i,flip:a}=e;const o=t.extent();o[0]<=0&&(o[1]>0?o[0]=Math.min(1,o[1]/1e3):o[0]=1),o[1]<=o[0]&&(o[1]=1e3*o[0]);const l=Uv().domain(o);i&&l.nice();const u=l.domain();return n===r&&(n=r=null),n>0&&(u[0]=n),r>0&&(u[1]=r),l.domain(a?u.reverse():u),l.type="numeric",l}function Gv(t,e){let{min:n,max:r,format:i,nice:a,flip:o}=e;const l=t.extent(),u=Wv().domain(l);a&&u.nice(),i&&u.tickFormat(null,i);const s=u.domain();return n===r&&(n=r=null),n&&(s[0]=i(n)),r&&(s[1]=i(r)),u.domain(o?s.reverse():s),u.type="datetime",u}function Qv(t,e){if(e.step)return e.step();const n=t.uniqueAscending().map((t=>e(t))),r=n.length;if(r<2)return 0;let i=1/0;for(let t=1;t<r;t++){const e=Math.abs(n[t]-n[t-1]);i=Math.min(i,e)}return i}function Jv(t,e){const n=e.x;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=t.xData(),i={nice:n.nice,flip:t.xFlipAxis()!==n.flip};let a;r.string_array?(a=Vv,i.edge_padding=n.edge_padding):r.datetime_array?(a=Gv,i.min=n.datetime_min,i.max=n.datetime_max,i.format=t.xDatetimeParse()):"log"===n.numeric_scale_type?(a=Zv,i.min=n.log_min,i.max=n.log_max):(a=Xv,i.min=n.linear_min,i.max=n.linear_max,i.include_zero="off"!==n.zero_axis&&("on"===n.zero_axis||t.xZeroAxis()));const o=a(r,i);if(e.domain_only)return o;const l=t.inner_width,u=t.margins.left+t.inner_margins.left,{left:s,right:c}=function(t,e,n){const r={left:0,right:0},i=t.xData();if(i.string_array)return r;const{left:a,right:o,unit:l}=t.xPadding();if(i.numeric_array&&"linear"!==e.numeric_scale_type&&"px"!==l)return r;if("px"===l||!a&&!o)return{left:a,right:o};const u=i.uniqueAscending(),s=u.length;if(s<2)return r;let c=1/0;for(let t=1;t<s;t++){const e=Math.abs(u[t]-u[t-1]);c=Math.min(c,e)}const f=(Math.max(...n)-Math.min(...n)+(a+o)*c)/c,h=t.inner_width/f;return{left:a*h,right:o*h}}(t,n,o.domain()),f=u+s;let h=[f,f+(l-(s+c))];const d=e.global&&t.offsetLeft();return d&&(h=h.map((function(t){return t+d}))),o.range(h)}}function Kv(t,e){const n=e.y;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var r=t.yData();const i={nice:n.nice,flip:t.yFlipAxis()!==n.flip};let a;r.string_array?(a=Vv,i.edge_padding=n.edge_padding):r.datetime_array?(a=Gv,i.min=n.datetime_min,i.max=n.datetime_max,i.format=t.yDatetimeParse()):"log"===n.numeric_scale_type?(a=Zv,i.min=n.log_min,i.max=n.log_max):(a=Xv,i.min=n.linear_min,i.max=n.linear_max,i.include_zero="off"!==n.zero_axis&&("on"===n.zero_axis||t.yZeroAxis()));const o=a(r,i);if(e.domain_only)return o;const l=t.inner_height,u=t.margins.top+t.inner_margins.top,{bottom:s,top:c}=function(t,e,n){const r={bottom:0,top:0},i=t.yData();if(i.string_array)return r;const{bottom:a,top:o,unit:l}=t.yPadding();if(i.numeric_array&&"linear"!==e.numeric_scale_type&&"px"!==l)return r;if("px"===l||!a&&!o)return{bottom:a,top:o};const u=i.uniqueAscending(),s=u.length;if(s<2)return r;let c=1/0;for(let t=1;t<s;t++){const e=Math.abs(u[t]-u[t-1]);c=Math.min(c,e)}const f=(Math.max(...n)-Math.min(...n)+(a+o)*c)/c,h=t.inner_height/f;return{bottom:a*h,top:o*h}}(t,n,o.domain()),f=l-(s+c),h=e.global&&t.offsetTop(),d=u+c;let g=[d+f,d];return h&&(g=g.map((function(t){return t+h}))),o.range(g)}}function tx(t,e){const n=e.y2;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var r=t.y2Data();const i={nice:n.nice,flip:t.y2FlipAxis()!==n.flip};let a;r.string_array?(a=Vv,i.edge_padding=n.edge_padding):r.datetime_array?(a=Gv,i.min=n.datetime_min,i.max=n.datetime_max,i.format=t.y2DatetimeParse()):"log"===n.numeric_scale_type?(a=Zv,i.min=n.log_min,i.max=n.log_max):(a=Xv,i.min=n.linear_min,i.max=n.linear_max,i.include_zero="off"!==n.zero_axis&&("on"===n.zero_axis||t.y2ZeroAxis()));const o=a(r,i);if(e.domain_only)return o;const l=t.inner_height,u=t.margins.top+t.inner_margins.top,{bottom:s,top:c}=function(t,e,n){const r={bottom:0,top:0},i=t.y2Data();if(i.string_array)return r;const{bottom:a,top:o,unit:l}=t.y2Padding();if(i.numeric_array&&"linear"!==e.numeric_scale_type&&"px"!==l)return r;if("px"===l||!a&&!o)return{bottom:a,top:o};const u=i.uniqueAscending(),s=u.length;if(s<2)return r;let c=1/0;for(let t=1;t<s;t++){const e=Math.abs(u[t]-u[t-1]);c=Math.min(c,e)}const f=(Math.max(...n)-Math.min(...n)+(a+o)*c)/c,h=t.inner_width/f;return{bottom:a*h,top:o*h}}(t,n,o.domain()),f=l-(s+c),h=e.global&&t.offsetTop(),d=u+c;let g=[d+f,d];return h&&(g=g.map((function(t){return t+h}))),o.range(g)}}function ex(t){var e=!1;return function(n){return void 0===n?e:(e=!!n,t)}}function nx(t){let e=!1;return function(n){return void 0===n?e:(e=!!n,t)}}function rx(t){var e=!1,n=!1;return function(r){return void 0===r?!!e&&{keep_gridlines:n}:(e=!!r,n=!(!r||"object"!=typeof r||!r.keep_gridlines),t)}}function ix(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const r=e[n],i=t[n+"Scale"]({domain_only:!0}),a=t[n+"Data"]();let o;if("x"===n?"off"===r.axis_position:!r.axis_visible)o=[];else if(a.string_array){let t=i.domain();if("custom"!==r.tick_mode)o=t;else{o=Py(r.tick_custom.replace("{{FIRST}}",t[0]).replace("{{LAST}}",t[t.length-1])).filter((t=>i.domain().indexOf(t)>-1))}}else if("number"===r.tick_mode)o=i.ticks(r.tick_number);else{const e=a.datetime_array,u=i.domain(),s=Math.min(...u),c=Math.max(...u);if("custom"===r.tick_mode){const i=t[n+(e?"Datetime":"Number")+"Parse"]();o=Py(r.tick_custom).map((t=>"{{FIRST}}"===t?u[0]:"{{LAST}}"===t?u[u.length-1]:i(t)))}else{const e=t[n+"AutoTicks"]();o=Array.isArray(e)?e:e()}o=e?o.filter((t=>{return qy(e=t)&&!isNaN(e.getTime())&&t>=s&&t<=c;var e})):o.filter((t=>!isNaN(t)&&t>=s&&t<=c)),o=(l=o).length?qy(l[0])?Array.from(new Set(l.map((t=>t.getTime())))).map((t=>new Date(t))):Array.from(new Set(l)):l.slice()}var l;return o}function ax(t,e){return function(){t.xTicks._update(ix(t,e,"x")),t.yTicks._update(ix(t,e,"y")),t.y2Ticks._update(ix(t,e,"y2"))}}function ox(t,e){var n=t.significant_digits-e.significant_digits;return n||((n=e.exponent-t.exponent)||(n=Math.abs(e.value)-Math.abs(t.value))?n:n=e.value-t.value)}function lx(t){t.style("user-select","none").style("-moz-user-select","none").style("-webkit-user-select","none").style("-ms-user-select","none").style("cursor","default")}function ux(){return document.body.getAttribute("dir")}function sx(t,e){var n,r,i,a,o,l,u,s,c,f,h,d,g,p,_,b,m,y,v,x,w=e.x;var k,M,T,A,N,C=function(){var m,k=t.chart.select("g.fl-bottom-axis"),M=k.select("g.fl-axis-line"),T=k.select("g.fl-axis-ticks"),A=k.select("g.fl-axis-title");return function(){var k=w.axis_position,N={pos:k},C=!t.xHide()&&-1!==["bottom","float-below"].indexOf(k),S=C?t.xTicks():[],E=t.y_bottom;void 0===m&&(m=E);var z=E+Ny(w.title_padding);function D(t,e){return void 0===t||isNaN(t)?e:t}"bottom"===k&&(z+=c+S.max_box_height,N.extended_gridline=E+c+S.max_box_height);var F=m,O=E;"float-below"===k&&(F=D((x||r)(w.y_axis_position),m),O=D(r(w.y_axis_position),E));var j=M.selectAll("line").data(C&&w.line_visible?[n.domain()]:[]);j.exit().style("stroke",a).style("stroke-width",o).transition().duration(i).attr("x1",d).attr("x2",p).attr("y1",O).attr("y2",O).style("opacity",0).remove();var U=j.enter().append("line").style("shape-rendering","crispEdges").style("stroke-linecap","square").style("stroke-width",o).attr("x1",_).attr("x2",b).attr("y1",F).attr("y2",F).style("opacity",0);j.merge(U).style("stroke",a).style("stroke-width",o).transition().duration(i).attr("x1",d).attr("x2",p).attr("y1",O).attr("y2",O).style("opacity",1);var H=C?S:[];"numeric"===S.type&&"custom"!==w.tick_mode&&(H=S.slice().sort(ox));var L=function(t){var e="default"==w.tick_label_position?-w.tick_label_angle:-90,n=Dy(e,0,0);if("default"!==w.tick_label_position){var r="left"===w.tick_label_position?-.3:1;return zy(0,c)+" "+n+" "+zy(0,s*r)}return 0===e?zy(t.text_width/2,c+.66*s):-90===e?zy(0,c)+" "+n+" "+zy(0,.33*s-t.multiline_offset):zy(0,c)+" "+n+" "+zy(0,.66*s)},q=T.selectAll("g").data(H,(function(t){return t.type+"-"+t.value})),P=q.exit();P.transition().duration(i).attr("transform",(function(t){return zy(v(t.value),O)})).style("opacity",0).remove(),P.each((function(){var t=y_(this);t.select("line").style("stroke",a).style("stroke-width",o).transition().duration(i).attr("y2",u),t.select("text").style("fill",l).style("font-size",s+"px").style("font-weight",w.tick_label_weight).attr("transform",L).transition().duration(i)}));var Y=q.enter().append("g").style("opacity",0);Y.attr("transform",(function(t){return zy(y(t.value),F)})),Y.each((function(){var t=y_(this);t.append("line").attr("y2",u),t.append("text").attr("text-anchor","middle").attr("transform",L).call(lx)}));var $=q.merge(Y);$.transition().duration(i).style("opacity",1).attr("transform",(function(t){return zy(n(t.value),O)}));var R,B,I=(R=[],B=O+c,function(t){var r=n(t.value);if("float-below"===k){var i=n.range();if(e.y.axis_visible&&r-t.box_width_left<i[0])return 0;if(e.y2.axis_visible&&r+t.box_width_right>i[1])return 0}for(var a=[r,B],o=[a,[r+t.box_width_right,B+t.box_height_right]],l=[a,[r-t.box_width_left,B+t.box_height_left]],u=0;u<R.length;u++){var s=R[u];if(r<=s.x_anchor){if(Uy(o,s.q))return 0}else if(Uy(s.p,l))return 0}return R.push({x_anchor:r,p:o,q:l}),1});const W=ux();$.each((function(){var t=y_(this);t.select("line").style("stroke",a).style("stroke-width",o).transition().duration(i).attr("y2",u),t.select("text").each((function(){var t=y_(this).selectAll("tspan").data((function(t){return t.lines}));t.merge(t.enter().append("tspan")).attr("x",0).attr("dy",(function(t,e){return e?w.tick_label_line_height+"em":0})).text((function(t){return"number"==typeof t&&isNaN(t)?"":t})),t.exit().remove()})).attr("text-anchor","rtl"===W?"start":"end").style("fill",l).style("font-size",s+"px").style("font-weight",w.tick_label_weight).transition().duration(i).style("opacity",I).attr("transform",L)}));var V=A.selectAll("text").data(C&&h?[h]:[]);return V.exit().remove(),V.enter().append("text").attr("text-anchor","middle").style("font-size",f+"px").style("fill",w.title_color).style("font-weight",w.title_weight).call(lx).transition().duration(0).delay(i).text((function(t){return t})).attr("x",g).attr("y",z).attr("dy",f),V.text((function(t){return t})).style("fill",w.title_color).style("font-size",f+"px").style("font-weight",w.title_weight).transition().duration(i).attr("x",g).attr("y",z).attr("dy",f),m=E,"bottom"==k?N:null}}(),S=(M=t.chart.select("g.fl-top-axis"),T=M.select("g.fl-axis-line"),A=M.select("g.fl-axis-ticks"),N=M.select("g.fl-axis-title"),function(){var b=w.axis_position,m={pos:b},M=!t.xHide()&&-1!==["top","float-above"].indexOf(b),C=M?t.xTicks():[],S=t.y_top;void 0===k&&(k=S);var E=S-Ny(w.title_padding);"top"===b&&(E-=c+C.max_box_height,m.extended_gridline=S-(c+C.max_box_height));var z="float-above"===b?(x||r)(w.y_axis_position):k,D="float-above"===b?r(w.y_axis_position):S,F=T.selectAll("line").data(M&&w.line_visible?[n.domain()]:[]);F.exit().style("stroke",a).style("stroke-width",o).transition().duration(i).attr("x1",d).attr("x2",p).attr("y1",D).attr("y2",D).style("opacity",0).remove();var O=F.enter().append("line").style("shape-rendering","crispEdges").style("stroke-linecap","square").style("stroke-width",o).attr("x1",_).attr("x2",_).attr("y1",z).attr("y2",z).style("opacity",0);F.merge(O).style("stroke",a).style("stroke-width",o).transition().duration(i).attr("x1",d).attr("x2",p).attr("y1",D).attr("y2",D).style("opacity",1);var j=[];M&&(j="numeric"===C.type?C.slice().sort(ox):C);var U=function(t){var e="default"==w.tick_label_position?-w.tick_label_angle:-90,n=Dy(e,0,0);if("default"!==w.tick_label_position){var r="left"===w.tick_label_position?-.3:1;return zy(0,-c)+" "+n+" "+zy(0,s*r)}return 0===e?zy(-t.text_width/2,-(c+.33*s)):-90===e?zy(0,-c)+" "+n+" "+zy(0,.33*s-t.multiline_offset):zy(0,-c)+" "+n+zy(0,-t.multiline_offset)},H=A.selectAll("g").data(j,(function(t){return t.type+"-"+t.value})),L=H.exit();L.transition().duration(i).attr("transform",(function(t){return zy(v(t.value),D)})).style("opacity",0).remove(),L.each((function(){var t=y_(this);t.select("line").style("stroke",a).style("stroke-width",o).transition().duration(i).attr("y2",-u),t.select("text").style("fill",l).style("font-size",s+"px").style("font-weight",w.tick_label_weight).attr("transform",U).transition().duration(i)}));var q=H.enter().append("g").style("opacity",0);q.attr("transform",(function(t){return zy(y(t.value),z)})),q.each((function(){var t=y_(this);t.append("line").attr("y2",-u),t.append("text").attr("text-anchor","middle").attr("transform",U).call(lx)}));var P=H.merge(q);P.transition().duration(i).style("opacity",1).attr("transform",(function(t){return zy(n(t.value),D)}));var Y,$,R=(Y=[],$=D+c,function(t){var r=n(t.value);if("float-above"===b){var i=n.range();if(e.y.axis_visible&&r-t.box_width_left<i[0])return 0;if(e.y2.axis_visible&&r+t.box_width_right>i[1])return 0}for(var a=[r,$],o=[a,[r-t.box_width_left,$-t.box_height_left]],l=[a,[r+t.box_width_right,$-t.box_height_right]],u=0;u<Y.length;u++){var s=Y[u];if(r<=s.x_anchor){if(Uy(l,s.p))return 0}else if(Uy(o,s.q))return 0}return Y.push({x_anchor:r,p:o,q:l}),1});const B=ux();P.each((function(){var t=y_(this);t.select("line").style("stroke",a).style("stroke-width",o).transition().duration(i).attr("y2",-u),t.select("text").each((function(){var t=y_(this).selectAll("tspan").data((function(t){return t.lines}));t.merge(t.enter().append("tspan")).attr("x",0).attr("dy",(function(t,e){return e?w.tick_label_line_height+"em":0})).text((function(t){return"number"==typeof t&&isNaN(t)?"":t})),t.exit().remove()})).attr("text-anchor","rtl"===B?"end":"start").style("fill",l).style("font-size",s+"px").style("font-weight",w.tick_label_weight).transition().duration(i).style("opacity",R).attr("transform",U)}));var I=N.selectAll("text").data(M&&h?[h]:[]);return I.exit().remove(),I.enter().append("text").attr("text-anchor","middle").style("font-size",f+"px").style("fill",w.title_color).style("font-weight",w.title_weight).call(lx).transition().duration(0).delay(i).text((function(t){return t})).attr("x",g).attr("y",E).attr("dy",-.33*f),I.text((function(t){return t})).style("fill",w.title_color).style("font-size",f+"px").style("font-weight",w.title_weight).transition().duration(i).attr("x",g).attr("y",E).attr("dy",-.33*f),k=S,"top"==b?m:null});return function(){!function(){n=Ly(t.xScale()),r=Ly(t.yScale()),i=m?t.animationDuration():0,d=t.x_left,p=t.x_right,g=(d+p)/2,void 0===_&&(_=d),m||(m=n),y=m.type===n.type&&"ordinal"!==n.type?m:n,v=m.type===n.type&&"ordinal"!==m.type?n:m,a=w.line_and_tick_color,o=Ny(w.line_and_tick_width,!0),l=w.tick_label_color;var e="default"===w.tick_label_position,b=t.xTicks(),x=b.max_box_height,k=b.length?Ny(w.tick_padding):0;"top"!=w.axis_position&&"bottom"!=w.axis_position||(x+=k);var M="out"===w.tick_side;u=e?Ny(w.tick_length)*(M?1:-1):x,s=Ny(w.tick_label_size),c=(M&&e?u:0)+k,f=Ny(w.title_size),h=t.xTitle()}();var e=C(),k=S();return m=n,x=r,_=d,b=p,e||k}}function cx(t,e){var n=sx(t,e),r=function(t,e){var n,r,i,a,o,l=t.chart.select("g.fl-left-axis"),u=l.select("g.fl-axis-line"),s=l.select("g.fl-axis-ticks"),c=l.select("g.fl-axis-title"),f=e.y;return function(){var l={},h=f.axis_visible&&!t.yHide(),d=Ly(t.xScale()),g=Ly(t.yScale()),p=h?t.yTicks():[],_=n?t.animationDuration():0;n||(n=d),r||(r=g);var b=r.type===g.type&&"ordinal"!==g.type?r:g,m=r.type===g.type&&"ordinal"!==r.type?g:r,y=t.y_bottom,v=t.y_top;void 0===i&&(i=y),void 0===a&&(a=v);var x=t.x_left;void 0===o&&(o=x);var w=f.line_and_tick_color,k=Ny(f.line_and_tick_width,!0),M=f.tick_label_color,T="default"===f.tick_label_position,A="out"===f.tick_side,N=Ny(f.tick_padding),C=t.yTicks().max_box_width+N,S=T?Ny(f.tick_length)*(A?1:-1):C,E=Ny(f.tick_label_size),z=(A&&T?S:0)+N,D=t.yTitle(),F=Ny(f.title_size),O=z+p.max_box_width+Ny(f.title_padding)+.33*F;l.extended_gridline=x-(z+p.max_box_width);var j=(v+y)/2,U=u.selectAll("line").data(h&&f.line_visible?[g.domain()]:[]);U.exit().style("stroke",w).style("stroke-width",k).transition().duration(_).attr("x1",x).attr("x2",x).attr("y1",y).attr("y2",v).style("opacity",0).remove();var H=U.enter().append("line").style("shape-rendering","crispEdges").style("stroke-linecap","square").style("stroke-width",k).attr("x1",o).attr("x2",o).attr("y1",i).attr("y2",a).style("opacity",0);U.merge(H).style("stroke",w).style("stroke-width",k).transition().duration(_).attr("x1",x).attr("x2",x).attr("y1",y).attr("y2",v).style("opacity",1);var L=h?p:[];function q(t){if("default"!==f.tick_label_position)return zy(-z-(p.max_box_width-t.box_width),("above"===f.tick_label_position?-.3:1)*E);var e=-f.tick_label_angle;if(0===e)return zy(-z,.33*E-t.multiline_offset);var n=zy(-z,0)+" "+Dy(e);return-90===e&&(n+=" "+zy(t.text_width/2,0)),n}"numeric"===p.type&&"custom"!==f.tick_mode&&(L=p.slice().sort(ox));var P=s.selectAll("g").data(L,(function(t){return t.type+"-"+t.value})),Y=P.exit();Y.transition().duration(_).attr("transform",(function(t){return zy(x,m(t.value))})).style("opacity",0).remove(),Y.each((function(){var t=y_(this);t.select("line").style("stroke",w).style("stroke-width",k).transition().duration(_).attr("x2",-S),t.select("text").style("fill",M).style("font-size",E+"px").style("font-weight",f.tick_label_weight).attr("transform",q).transition().duration(_)}));var $=P.enter().append("g").style("opacity",0);$.attr("transform",(function(t){return zy(o,b(t.value))}));const R="rtl"===ux()?"start":"end";$.each((function(){var t=y_(this);t.append("line").attr("x2",-S),t.append("text").attr("text-anchor",R).attr("transform",q).call(lx)}));var B=P.merge($);B.transition().duration(_).style("opacity",1).attr("transform",(function(t){return zy(x,g(t.value))}));var I,W,V=(I=[],W=x-z,function(t){for(var e=g(t.value),n=[W,e],r=[n,[W-t.box_width_above,e-t.box_height_above]],i=[n,[W-t.box_width_below,e+t.box_height_below]],a=0;a<I.length;a++){var o=I[a];if(e>=o.y_anchor){if(Uy(r,o.q))return 0}else if(Uy(o.p,i))return 0}return I.push({y_anchor:e,p:r,q:i}),1});B.each((function(){var t=y_(this);t.select("line").style("stroke",w).style("stroke-width",k).transition().duration(_).attr("x2",-S),t.select("text").each((function(){var t=y_(this).selectAll("tspan").data((function(t){return t.lines}));t.merge(t.enter().append("tspan")).attr("x",0).attr("dy",(function(t,e){return e?f.tick_label_line_height+"em":0})).text((function(t){return"number"==typeof t&&isNaN(t)?"":t})),t.exit().remove()})).style("fill",M).style("font-size",E+"px").style("font-weight",f.tick_label_weight).attr("text-anchor",R).transition().duration(_).style("opacity",V).attr("transform",q)}));var X=c.selectAll("text").data(h&&D?[D]:[]);X.exit().remove();var Z=function(){if("side"===f.title_position)return zy(x,j)+" "+Dy(-90)+" "+zy(0,-O);const n=x-t.margins._calculated().left,r=["top","float-above"].includes(e.x.axis_position),i=Ny(f.title_padding);let a;if(r){const t=p[0].box_height_below,e=Ny(.66*f.title_size);a=y+(t+i+e)}else{const t=p[p.length-1]?p[p.length-1].box_height_above:0;a=v-(t+i)}return zy(n,a)};return X.enter().append("text").attr("text-anchor","side"===f.title_position?"middle":"start").style("font-size",F+"px").style("fill",f.title_color).style("font-weight",f.title_weight).call(lx).transition().duration(0).delay(_).text((function(t){return t})).attr("transform",Z),X.text((function(t){return t})).attr("text-anchor","side"===f.title_position?"middle":"start").style("fill",f.title_color).style("font-size",F+"px").style("font-weight",f.title_weight).transition().duration(_).attr("transform",Z),n=d,r=g,i=y,a=v,o=x,l}}(t,e),i=function(t,e){var n,r,i,a,o,l=t.chart.select("g.fl-right-axis"),u=l.select("g.fl-axis-line"),s=l.select("g.fl-axis-ticks"),c=l.select("g.fl-axis-title"),f=e.y2;return function(){var l={},h=f.axis_visible&&!t.y2Hide(),d=Ly(t.xScale()),g=Ly(t.y2Scale()),p=h?t.y2Ticks():[],_=n?t.animationDuration():0;n||(n=d),r||(r=g);var b=r.type===g.type&&"ordinal"!==g.type?r:g,m=r.type===g.type&&"ordinal"!==r.type?g:r,y=t.y_bottom,v=t.y_top;void 0===i&&(i=y),void 0===a&&(a=v);var x=t.x_right;void 0===o&&(o=x);var w=f.line_and_tick_color,k=Ny(f.line_and_tick_width,!0),M=f.tick_label_color,T="default"===f.tick_label_position,A="out"===f.tick_side,N=Ny(f.tick_padding),C=t.y2Ticks().max_box_width+N,S=T?Ny(f.tick_length)*(A?1:-1):C,E=Ny(f.tick_label_size),z=(A&&T?S:0)+N,D=t.y2Title(),F=Ny(f.title_size),O=z+p.max_box_width+Ny(f.title_padding)+.85*F;l.extended_gridline=x+z+p.max_box_width;var j=(y+v)/2,U=u.selectAll("line").data(h&&f.line_visible?[g.domain()]:[]);U.exit().style("stroke",w).style("stroke-width",k).transition().duration(_).attr("x1",x).attr("x2",x).attr("y1",y).attr("y2",v).style("opacity",0).remove();var H=U.enter().append("line").style("shape-rendering","crispEdges").style("stroke-linecap","square").style("stroke-width",k).attr("x1",o).attr("x2",o).attr("y1",i).attr("y2",a).style("opacity",0);U.merge(H).style("stroke",w).style("stroke-width",k).transition().duration(_).attr("x1",x).attr("x2",x).attr("y1",y).attr("y2",v).style("opacity",1);var L="numeric"===p.type?p.slice().sort(ox):p;function q(t){if("default"!==f.tick_label_position)return zy(z+(p.max_box_width-t.box_width),("above"===f.tick_label_position?-.3:1)*E);var e=-f.tick_label_angle;if(0===e)return zy(z,.33*E-t.multiline_offset);var n=zy(z,0)+" "+Dy(e);return-90===e&&(n+=" "+zy(t.text_width/2,0)),n}var P=s.selectAll("g").data(L,(function(t){return t.type+"-"+t.value})),Y=P.exit();Y.transition().duration(_).attr("transform",(function(t){return zy(x,m(t.value))})).style("opacity",0).remove(),Y.each((function(){var t=y_(this);t.select("line").style("stroke",w).style("stroke-width",k).transition().duration(_).attr("x2",-S),t.select("text").style("fill",M).style("font-size",E+"px").style("font-weight",f.tick_label_weight).attr("transform",q).transition().duration(_)}));var $=P.enter().append("g").style("opacity",0);$.attr("transform",(function(t){return zy(o,b(t.value))}));const R=ux();$.each((function(){var t=y_(this);t.append("line").attr("x2",S),t.append("text").attr("transform",q).call(lx)}));var B=P.merge($);B.transition().duration(_).style("opacity",1).attr("transform",(function(t){return zy(x,g(t.value))})).attr("text-anchor","rtl"===R?"end":"start");var I,W,V=(I=[],W=x+z,function(t){for(var e=g(t.value),n=[W,e],r=[n,[W-t.box_width_above,e-t.box_height_above]],i=[n,[W-t.box_width_below,e+t.box_height_below]],a=0;a<I.length;a++){var o=I[a];if(e>=o.y_anchor){if(Uy(r,o.q))return 0}else if(Uy(o.p,i))return 0}return I.push({y_anchor:e,p:r,q:i}),1});B.each((function(){var t=y_(this);t.select("line").style("stroke",w).style("stroke-width",k).transition().duration(_).attr("x2",S),t.select("text").each((function(){var t=y_(this).selectAll("tspan").data((function(t){return t.lines}));t.merge(t.enter().append("tspan")).attr("x",0).attr("dy",(function(t,e){return e?f.tick_label_line_height+"em":0})).text((function(t){return"number"==typeof t&&isNaN(t)?"":t})),t.exit().remove()})).style("fill",M).style("font-size",E+"px").style("font-weight",f.tick_label_weight).transition().duration(_).style("opacity",V).attr("transform",q)}));var X=c.selectAll("text").data(h&&D?[D]:[]);X.exit().remove();var Z=function(){if("side"===f.title_position)return zy(x,j)+" "+Dy(-90)+" "+zy(0,O);const n=x+t.margins._calculated().right,r=["top","float-above"].includes(e.x.axis_position),i=Ny(f.title_padding);let a;if(r){const t=p[0].box_height_below,e=Ny(.66*f.title_size);a=y+(t+i+e)}else{const t=p[p.length-1]?p[p.length-1].box_height_above:0;a=v-(t+i)}return zy(n,a)};return X.enter().append("text").attr("text-anchor","side"===f.title_position?"middle":"end").style("font-size",F+"px").style("fill",f.title_color).style("font-weight",f.title_weight).call(lx).transition().duration(0).delay(_).text((function(t){return t})).attr("transform",Z),X.text((function(t){return t})).attr("text-anchor","side"===f.title_position?"middle":"end").style("fill",f.title_color).style("font-size",F+"px").style("font-weight",f.title_weight).transition().duration(_).attr("transform",Z),n=d,r=g,i=y,a=v,o=x,l}}(t,e);return function(){return{x:n(),y:r(),y2:i()}}}var fx={solid:null,dash:[4,1],dot:[1,1],dot_dash:[4,1,1,1]};function hx(t){if("solid"===t)return null;var e=Ny(1)/4;return fx[t].map((function(t){return t*e})).join(" ")}function dx(t,e){var n=function(t){let e=t.chart.select("rect.fl-chart-debug-rectangle");return function(){e.attr("width",t.width()).attr("height",t.height()).style("stroke",t.debugColor()).style("display",t.debug()?null:"none")}}(t),r=ax(t,e),i=function(t,e){var n=t.chart.select("clipPath.fl-data-clip-path"),r=n.select("rect"),i=t.chart.select("clipPath.fl-grid-clip-path"),a=i.select("rect"),o=t.chart.select(".fl-data-background"),l=t.chart.select(".fl-data-foreground"),u=t.chart.select(".fl-gridlines");return function(){var s=t.identifier()+"-clip-path",c="url(#"+s+")";n.attr("id",s);var f=t.identifier()+"-grid-clip-path",h="url(#"+f+")";i.attr("id",f),o.attr("clip-path",c),l.attr("clip-path",c),u.attr("clip-path",h);var d=t.x_left,g=t.x_right,p=t.y_top,_=t.y_bottom,b=t.clip(),m=b.left?d:0,y=b.top?p:0,v=Math.max((b.right?g:t.width())-m,1),x=Math.max((b.bottom?_:t.height())-y,1);r.attr("x",m).attr("y",y).attr("width",v).attr("height",x);var w=Ny(e.x.gridline_width,!0),k=Ny(e.y.gridline_width,!0);a.transition().duration(t.animationDuration()).attr("x",d-w).attr("y",p-k).attr("width",g-d+2*w).attr("height",_-p+2*k)}}(t,e),a=function(t,e){var n=e.background,r=t.chart.select("rect.fl-chart-fill"),i=t.chart.select("image.fl-chart-image"),a=t.chart.select("rect.fl-chart-interaction");return function(){var e=t.x_left,o=t.y_top,l=Math.max(t.plot_width,1),u=Math.max(t.plot_height,1);r.attr("x",e).attr("y",o).attr("width",l).attr("height",u).attr("fill",n.background_color_enabled?n.background_color:"none"),i.attr("x",e).attr("y",o).attr("width",l).attr("height",u).attr("xlink:href",n.background_image_enabled?n.background_image_src:null).attr("preserveAspectRatio",(function(){return"stretch"==n.background_image_size?"none":n.background_image_position+" "+n.background_image_size})),a.attr("x",e).attr("y",o).attr("width",l).attr("height",u)}}(t,e),o=cx(t,e),l=function(t,e){var n,r,i,a,o,l,u,s=e.x,c=e.y,f=e.y2,h=t.chart.select("g.fl-gridlines-vertical"),d=t.chart.select("g.fl-gridlines-horizontal");return function(g){var p=Ly(t.xScale()),_=Ly(t.yScale()),b=Ly(t.y2Scale()),m=t.x_left,y=t.x_right;void 0===a&&(a=m),void 0===o&&(o=y);var v=t.y_bottom,x=t.y_top;void 0===l&&(l=v),void 0===u&&(u=x),r=r||_,i=i||b;var w=(n=n||p).type===p.type&&"ordinal"!==p.type?n:p,k=n.type===p.type&&"ordinal"!==n.type?p:n,M=r.type===_.type&&"ordinal"!==_.type?r:_,T=r.type===_.type&&"ordinal"!==r.type?_:r,A=i.type===b.type&&"ordinal"!==i.type?i:b,N=i.type===b.type&&"ordinal"!==i.type?b:i,C=n?t.animationDuration():0,S=function(n){if("x"===n&&"off"===e.x.axis_position)return[];if("x"!==n&&!e[n].axis_visible)return[];if(!e[n].gridlines_visible)return[];var r=t[n+"Hide"]();return r&&!r.keep_gridlines?[]:t[n+"Ticks"]()},E=S("x"),z=S("y"),D=S("y2"),F=E.map((function(t){return{type:t.type,value:t.value,dasharray:hx(s.gridline_style),stroke:s.gridline_color,width:Ny(s.gridline_width,!0),x_enter:w(t.value),x:p(t.value)}}));if(s.gridline_category_dividers&&p.step){var O=p.step();F.pop(),F.forEach((function(t){if(t.x_enter+=O/2,t.x+=O/2,s.gridline_category_dividers_extend){var e=g.x&&"top"==g.x.pos,n=g.x&&"bottom"==g.x.pos;e?t.y2=g.x.extended_gridline:n&&(t.y1=g.x.extended_gridline)}}))}var j=z.map((function(t){return{axis:"y",type:t.type,value:t.value,dasharray:hx(c.gridline_style),stroke:c.gridline_color,width:Ny(c.gridline_width,!0),y_enter:M(t.value),y:_(t.value)}}));if(c.gridline_category_dividers&&_.step){var U=_.step();j.pop(),j.forEach((function(t){t.y_enter-=U/2,t.y-=U/2,c.gridline_category_dividers_extend&&(t.x1=g.y.extended_gridline)}))}var H=D.map((function(t){return{axis:"y2",type:t.type,value:t.value,dasharray:hx(f.gridline_style),stroke:f.gridline_color,width:Ny(f.gridline_width),y_enter:A(t.value),y:b(t.value)}}));if(f.gridline_category_dividers&&b.step){var L=b.step();H.pop(),H.forEach((function(t){t.y_enter-=L/2,t.y-=L/2,f.gridline_category_dividers_extend&&(t.x2=g.y2.extended_gridline)}))}var q=j.concat(H),P=h.selectAll("line").data(F,(function(t){return t.type+"-"+t.value}));P.exit().attr("stroke-dasharray",(function(t){return t.dasharray})).style("stroke",(function(t){return t.stroke})).style("stroke-width",(function(t){return t.width})).transition().duration(C).attr("x1",(function(t){return k(t.value)})).attr("x2",(function(t){return k(t.value)})).attr("y1",v).attr("y2",x).style("opacity",0).remove();var Y=P.enter().append("line").style("shape-rendering","crispEdges").attr("x1",(function(t){return t.x_enter})).attr("x2",(function(t){return t.x_enter})).attr("y1",l).attr("y2",u).style("opacity",0);P.merge(Y).attr("stroke-dasharray",(function(t){return t.dasharray})).style("stroke",(function(t){return t.stroke})).style("stroke-width",(function(t){return t.width})).transition().duration(C).attr("x1",(function(t){return t.x})).attr("x2",(function(t){return t.x})).attr("y1",v).attr("y2",x).style("opacity",1);var $=d.selectAll("line").data(q,(function(t){return t.axis+"-"+t.type+"-"+t.value}));$.exit().attr("stroke-dasharray",(function(t){return t.dasharray})).style("stroke",(function(t){return t.stroke})).style("stroke-width",(function(t){return t.width})).transition().duration(C).attr("x1",m).attr("x2",y).attr("y1",(function(t){return"y"===t.axis?T(t.value):N(t.value)})).attr("y2",(function(t){return"y"===t.axis?T(t.value):N(t.value)})).style("opacity",0).remove();var R=$.enter().append("line").style("shape-rendering","crispEdges").attr("x1",a).attr("x2",o).attr("y1",(function(t){return t.y_enter})).attr("y2",(function(t){return t.y_enter})).style("opacity",0);$.merge(R).attr("stroke-dasharray",(function(t){return t.dasharray})).style("stroke",(function(t){return t.stroke})).style("stroke-width",(function(t){return t.width})).transition().duration(C).attr("x1",m).attr("x2",y).attr("y1",(function(t){return t.y})).attr("y2",(function(t){return t.y})).style("opacity",1),n=p,r=_,i=b,a=m,o=y}}(t,e);return function(e){var u,s,c,f;if(e=e||{},u=parseFloat(getComputedStyle(document.documentElement).fontSize),s=window.devicePixelRatio,Ny=function(t,e){return t?e?Math.max(Math.round(t*u*s),1)/s:t*u:0},c=null,(t.offsetLeft()||t.offsetTop())&&(c="translate("+t.offsetLeft()+","+t.offsetTop()+")"),t.chart.attr("transform",c),n(),r(),f=e.margins,t.margins._update(f),function(e){t.inner_margins._update(e)}(e.inner_margins),e.skip_rendering)return t;i(),a();var h=o();return l(h),t}}function gx(t,e){var n=t[0],r=e[0],i=t[1],a=e[1],o=t[2]-n,l=e[2]-r,u=t[3]-i,s=e[3]-a;return n<r+l&&n+o>r&&i<a+s&&i+u>a}function px(t,e){t.left+=e,t.right+=e,t.x_offset+=e}function _x(t,e){t.top+=e,t.bottom+=e,t.y_offset+=e}function bx(t,e,n){for(var r=t.sort((function(t,e){return ea(t.y,e.y)})),i=[],a=0;a<r.length;a++){var o=r[a],l=r[a-1]||null,u=l?o.top-(l.bottom+n):o.top-e[0];0==a||u>0?i.push([o]):i[i.length-1].push(o)}for(a=0;a<i.length;a++)for(var s=i[a],c=0;c<s.length;c++){o=s[c];l=s[c-1]||null,(u=l?o.top-(l.bottom+n):o.top-e[0])<0&&_x(o,-u)}for(a=i.length-1;a>=0;a--){s=i[a];var f=i[a+1]?i[a+1][0].top:e[1];(d=f-s[s.length-1].bottom-n)<0&&s.forEach((function(t){_x(t,d)}))}for(a=0;a<i.length;a++){s=i[a];var h=i[a-1]?i[a-1][i[a-1].length-1].bottom+n:e[0],d=(u=s[0].top-h,(f=e[1])-s[s.length-1].bottom);u<0&&d>0&&s.forEach((function(t){_x(t,Math.min(-u,d))}))}for(a=0;a<i.length;a++){s=i[a],h=i[a-1]?i[a-1][i[a-1].length-1].bottom+n:e[0],u=s[0].top-h,d=(f=i[a+1]?i[a+1][0].top:e[1])-s[s.length-1].bottom;var g=0;s.forEach((function(t){g+=t.y_offset}));var p=-(g/s.length),_=p<0?Math.max(p,-u):Math.min(p,d),b=0,m=0;s.forEach((function(t){_x(t,_),t.y_offset<0&&(t.positive_index=b++),t.y_offset>0&&(t.negative_index=m++)})),s.forEach((function(t){t.y_offset<0?(t.step_line_x_index=t.positive_index,t.step_line_x_count=b):t.y_offset>0&&(t.step_line_x_index=m-t.negative_index-1,t.step_line_x_count=m)}))}t.any_offsets=t}function mx(t,e,n){for(var r=t.sort((function(t,e){return ea(t.x,e.x)})),i=[],a=0;a<r.length;a++){var o=r[a],l=r[a-1]||null,u=l?o.left-(l.right+n):o.left-e[0];0==a||u>0?i.push([o]):i[i.length-1].push(o)}for(a=0;a<i.length;a++)for(var s=i[a],c=0;c<s.length;c++){o=s[c];l=s[c-1]||null,(u=l?o.left-(l.right+n):o.left-e[0])<0&&px(o,-u)}for(a=i.length-1;a>=0;a--){s=i[a];var f=i[a+1]?i[a+1][0].left:e[1];(d=f-s[s.length-1].right-n)<0&&s.forEach((function(t){px(t,d)}))}for(a=0;a<i.length;a++){s=i[a];var h=i[a-1]?i[a-1][i[a-1].length-1].right+n:e[0],d=(u=s[0].left-h,(f=e[1])-s[s.length-1].right);u<0&&d>0&&s.forEach((function(t){px(t,Math.min(-u,d))}))}for(a=0;a<i.length;a++){s=i[a],h=i[a-1]?i[a-1][i[a-1].length-1].right+n:e[0],u=s[0].left-h,d=(f=i[a+1]?i[a+1][0].left:e[1])-s[s.length-1].right;var g=0;s.forEach((function(t){g+=t.x_offset}));var p=-(g/s.length),_=p<0?Math.max(p,-u):Math.min(p,d),b=0,m=0;s.forEach((function(t){px(t,_),t.x_offset<0&&(t.positive_index=b++),t.x_offset>0&&(t.negative_index=m++)})),s.forEach((function(t){t.x_offset<0?(t.step_line_y_index=t.positive_index,t.step_line_y_count=b):t.x_offset>0&&(t.step_line_y_index=m-t.negative_index-1,t.step_line_y_count=m)}))}t.any_offsets=t}const yx={max_width:8,overlap_mode:"spread",text_color:null,text_size:1,text_bg_size:25,text_bg_color:null,text_weight:700,text_line_height:.9,text_max_lines:3,spreading_margin:.5,show_only_labels:"",data_point_margin:.5,lines:"auto",line_padding:.25,line_color:"#aaaaaa",line_width:.075,line_style:"step"};function vx(t,e){for(var n in yx)n in t||(t[n]=yx[n]);return this._data=[],this._container=void 0!==e?e:null,this._state=t,this._duration=1e3,this._delay=1e3,this._x_bounds=[-1/0,1/0],this._y_bounds=[-1/0,1/0],this._group=null,this._background_color=null,this._foreground_color="black",this._aria_hidden=!1,this._orientation="vertical",this._read_direction=null,this}vx.prototype.container=function(t){return void 0!==t?(this._container=t,this):this._container},vx.prototype.data=function(t){return void 0!==t?(this._data=t,this):this._data},vx.prototype.group=function(t){return void 0!==t?(this._group=t,this):this._group},vx.prototype.backgroundColor=function(t){return void 0!==t?(this._background_color=t,this):this._background_color},vx.prototype.foregroundColor=function(t){return void 0!==t?(this._foreground_color=t,this):this._foreground_color},vx.prototype.duration=function(t){return void 0!==t?(this._duration=t,this):this._duration},vx.prototype.delay=function(t){return void 0!==t?(this._delay=t,this):this._delay},vx.prototype.xBounds=function(t){return void 0!==t?(this._x_bounds=t,this):this._x_bounds},vx.prototype.yBounds=function(t){return void 0!==t?(this._y_bounds=t,this):this._y_bounds},vx.prototype.orientation=function(t){return void 0!==t?(this._orientation=t,this):this._orientation},vx.prototype.readDirection=function(t){return["ltr","rtl"].includes(t)?this._read_direction=t:console.warn('Read direction must be one of "ltr" or "rtl"'),this},vx.prototype.ariaHidden=function(t){return void 0!==t?(this._aria_hidden=t,this):this._aria_hidden},vx.prototype.getDimensions=function(){return this.update(!0)},vx.prototype.on=function(t,e){return this._container?(e?pt(this._container).on(t,(function(){var n=it.target;if("mouseleave"!=t&&"mouseout"!=t){for(var r=!1,i=0;i<5&&!(r=n.classList.contains("fl-label"));i++)n=n.parentNode;if(r){var a=pt(n).datum();e.call(n,it,a)}}else e.call(n,it)})):pt(this._container).on(t,null),this):this},vx.prototype.update=function(t){if(null!=this._container){var e=this._state,n=this._duration,r=this._delay,i=this._container,a=this._data,o=this._y_bounds,l=this._x_bounds,u=this._orientation,s=this._read_direction||window.getComputedStyle(document.body).direction||"ltr",c=this._screenreadable,f=this._background_color,h=this._foreground_color,d=Ex(e.text_size),g=function(t,e,n){var r=n.text_weight+" ",i=e+"px ",a=getComputedStyle(t).fontFamily;return r+i+a}(i,d,e),p=d*e.text_line_height,_=Ex(e.spreading_margin),b=Ex(e.data_point_margin),m=Math.min(b/2,Ex(e.line_padding)),y=b-m,v=function(t,e,n,r,i,a,o,l,u){var s=0,c=0,f=e.map((function(e){var u="vertical"==t._orientation?a:e.available_width,f=gc(e.text,n,i,u);e.available_width=void 0===e.available_width?1/0:e.available_width,e.available_height=void 0===e.available_height?1/0:e.available_height;var h={};h.x=e.x,h.y=e.y,h.text_x=void 0===e.text_x?e.x:e.text_x,h.text_y=void 0===e.text_y?e.y:e.text_y,h.text_width=f.widest_line,h.text_height=o*f.length,h.id=e.id,h.filter_name=e.filter_name,h.text=e.text,h.color=e.color,h.opacity=isNaN(e.opacity)?1:e.opacity,h.datum=e.datum||{},h.alignment=["left","right"].includes(e.alignment)?e.alignment:"right",h.adjusted_alignment="rtl"===r?"right"==h.alignment?"left":"right":h.alignment,h.lines=f,s=Math.max(s,f.widest_line),c=Math.max(c,h.text_height);var d=t._group&&"undefined"!==e[t._group];return h.group=d?e[t._group]:"",h.text_width>e.available_width&&"horizontal"===t._orientation&&"hide"===l&&(h.hidden=!0),h.text_height>e.available_height&&"vertical"===t._orientation&&"hide"===l&&(h.hidden=!0),h}));return f=function(t,e){var n=e.split(/\s*\n\s*/).filter((function(t){return t.trim()}));if(n.length)for(let e=0;e<t.length;e++){const r=t[e],i=r.filter_name?r.filter_name:r.text;-1===n.indexOf(i)&&(r.hidden=!0)}return t}(f,u),f.widest_label=s,f.tallest_label=c,f}(this,a,g,s,e.text_max_lines,Ex(e.max_width),p,e.overlap_mode,e.show_only_labels);if(t)return{width:v.widest_label+b,height:v.tallest_label+b};(v=v.filter((function(t){return!t.hidden}))).forEach((function(t){return"vertical"==u?function(t){var e=.33*d-p*(t.lines.length-1)/2;t.dy=e;var n=0,r=p-t.dy,i=t.y-r-o[0];i<0&&(n=-i);var a=p*(t.lines.length-1)- -t.dy,l=o[1]-t.y-a;l<0&&(n-=-l);t.y_offset=n,t.text_height=p*t.lines.length,t.top=t.y+t.y_offset-t.text_height/2,t.bottom=t.top+t.text_height}(t):function(t){var e=p*(t.lines.length-1)/2;t.dy=-e,t.y_offset=t.dy,t.x_offset=0,t.left=t.x-t.text_width/2,t.right=t.left+t.text_width}(t)}));var x={};this._group?v.forEach((function(t){var e=t.group;e in x||(x[e]=[]),x[e].push(t)})):x=[v];var w=!1;if("vertical"==u&&"spread"==e.overlap_mode)for(var k in x){bx(M=x[k],o,_),M.any_offsets&&(w=!0)}if("horizontal"==u&&"spread"==e.overlap_mode)for(var k in x){var M;mx(M=x[k],l,_),M.any_offsets&&(w=!0)}if("hide"==e.overlap_mode){var T=u.horizontal?l:o;for(var k in x)Sx(x[k],T,u)}var A=!0;("off"==e.lines||"auto"==e.lines&&!w)&&(A=!1),v=v.filter((function(t){return!t.hidden}));var N=pt(this._container).selectAll(".fl-label").data(v,(function(t){return null==t.id?t.text:t.id})),C=N.enter().append("g").attr("class","fl-label").attr("transform",(function(t){return"translate("+t.text_x+","+t.text_y+")"})).attr("font-size",d).attr("font-weight",e.text_weight).attr("opacity",0);C.append("path").attr("fill","none").attr("d",(function(t){return O(t,u)})).attr("stroke-width",e.line_width+"rem").attr("stroke",e.line_color||h),C.append("text").attr("class","bg").attr("transform",D),C.append("text").attr("class","fg").attr("transform",D);var S=N.merge(C);S.attr("aria-hidden",!c).attr("id",(function(t){return t.id})).transition().duration(n).delay(r).attr("transform",(function(t){return"translate("+t.text_x+","+t.text_y+")"})).attr("font-size",d).attr("font-weight",e.text_weight).attr("opacity",(function(t){return t.opacity})),S.select("path").transition().duration(n).delay(r).attr("d",(function(t){return O(t,u)})).attr("stroke-width",e.line_width+"rem").attr("stroke",e.line_color||h),S.select("text.bg").attr("text-anchor",F).transition().duration(n).delay(r).attr("transform",D),S.select("text.fg").attr("text-anchor",F).transition().duration(n).delay(r).attr("transform",D),N.exit().remove();var E=S.select("text.bg").selectAll("tspan").data((function(t){return t.lines}));E.merge(E.enter().append("tspan")).text((function(t){return t})).transition().duration(n).delay(r).attr("x",0).attr("fill","none").attr("stroke",e.text_bg_color||f).attr("stroke-width",d*e.text_bg_size/100).attr("dy",(function(t,e){return e?p+"px":0})),E.exit().remove();var z=S.select("text.fg").selectAll("tspan").data((function(t){return t.lines}));return z.merge(z.enter().append("tspan")).text((function(t){return t})).transition().duration(n).delay(r).attr("x",0).attr("fill",(function(){return e.text_color||this.parentNode.__data__.color||"black"})).attr("dy",(function(t,e){return e?p+"px":0})),z.exit().remove(),n||r||Ht(),this}function D(t){var e,n;return"vertical"==u?(e="right"==t.alignment?b:-Math.abs(b),n=t.y_offset+t.dy):(e=t.x_offset,n=t.y_offset+t.dy-b),"translate("+e+","+n+")"}function F(t){return"right"===t.adjusted_alignment?"start":"end"}function O(t,n){if(!A)return"";if(!t.text.length)return"";var r=t.step_line_x_index||0,i=(t.step_line_x_count||0)+1,a=y/i,o=a+a*r,l=[],u="right"==t.alignment?o:-Math.abs(o),s="right"==t.alignment?y-o:-Math.abs(y-o);"vertical"===n&&(l.push([t.x-t.text_x,t.y-t.text_y]),"step"==e.line_style&&(l.push([u,0]),l.push([u,t.y_offset])),l.push([u+s,t.y_offset])),"horizontal"===n&&(l.push([t.x-t.text_x,t.y-t.text_y]),"step"==e.line_style&&(l.push([0,-u]),l.push([t.y_offset,-u])),l.push([0,-s-u]));var c=l.map((function(t,e){return(e?"L":"M")+t.join(",")})).join(" ");return c}console.error("@flourish/labels: you must set a container for your labels using the .container() method. This should be an SVG group.")};var xx,wx,kx,Mx,Tx,Ax,Nx=[0,0,0,0],Cx=[0,0,0,0];function Sx(t,e,n){var r="horizontal"===n?"x":"y",i=t.sort((function(t,e){return ea(t[r],e[r])}));Nx=[-1/0,-1/0,-1/0,-1/0];for(var a=0;a<i.length;a++){var o=i[a];Cx[0]=o.text_x,Cx[1]=o.text_y,Cx[2]=o.text_x+o.text_width,Cx[3]=o.text_y+o.text_height;var l=gx(Cx,Nx),u="horizontal"===n?o.left<e[0]&&o.right>e[1]:o.top<e[0]&&o.bottom>e[1];l||u?o.hidden=!0:(Nx[0]=Cx[0],Nx[1]=Cx[1],Nx[2]=Cx[2],Nx[3]=Cx[3])}}function Ex(t){var e,n;return window.innerWidth!==e&&(e=window.innerWidth,n=parseFloat(getComputedStyle(document.documentElement).fontSize)),t*n}var zx,Dx=function(t){for(var e in Ng=t,Ag)void 0===Ng[e]&&(Ng[e]=Ag[e]);return(pc=document.createElement("style")).id="flourish-page-styles",pc.type="text/css",document.head.appendChild(pc),zg.wrapper=function(){var t=document.createElement("div");t.id="fl-layout-wrapper-outer",t.style.display="flex";var e=document.createElement("main");e.id="fl-layout-wrapper",e.style.display="flex",e.style.flexGrow="1",e.style.flexDirection="column",e.style.boxSizing="border-box",e.style.overflow="hidden";var n=document.createElement("aside");return n.id="fl-layout-sidebar",n.style.position="relative",zg.sidebar=n,t.appendChild(e),t.appendChild(n),document.body.appendChild(t),e}(),Eg.forEach((function(t,e){zg[t]=Og(t,e)})),Hg("header").appendChild(function(){(wc=document.createElement("header")).className="flourish-header";var t=document.createElement("hgroup");return kc=document.createElement("h2"),Mc=document.createElement("h3"),Tc=document.createElement("p"),(Ac=document.createElement("div")).className="clearfix",(Nc=document.createElement("div")).className="flourish-header-logo-container",wc.appendChild(Nc),wc.appendChild(t),t.appendChild(kc),t.appendChild(Mc),wc.appendChild(Tc),wc.appendChild(Ac),wc}()),Hg("footer").appendChild(bg()),zg.primary.outer.style.overflow="hidden",function(){var t=zg.primary.outer;t.style.position="relative",(Sg=document.createElement("div")).id="fl-layout-overlay";var e=Sg.style;e.position="absolute",e.display="none",e.width="100%",e.height="100%",e.top=0,e.left=0,e.backgroundColor="rgb(200,200,200)",e.zIndex=999999,e.pointerEvents="none";var n=document.createElement("p");n.className="fl-layout-overlay-message",(e=n.style).color="#333333",e.fontSize="1.5rem",e.paddingLeft="15%",e.paddingRight="15%",e.width="100%",e.boxSizing="border-box",e.position="absolute",e.top="50%",e.transform="translate(0, -50%)",e.margin="0",e.textAlign="center",Sg.appendChild(n),t.appendChild(Sg)}(),{update:kg,getWrapper:jg,getSidebar:Ug,getSection:Hg,getOuterWidth:Lg,getInnerWidth:qg,getOuterHeight:Pg,getInnerHeight:Yg,getPrimaryHeight:$g,getPrimaryWidth:Rg,getDefaultPrimaryHeight:Wg,getPrimaryScreenReadability:Bg,setHeight:Zg,showOverlay:Gg,remToPx:zc,getOverlay:Qg,awaitFonts:Cg,prepareScreenshotSVG:Kg,clearScreenshotSVG:tp}}(o.layout),Fx=function(t){return new vx(t)}(o.labels),Ox=pt(Dx.getSection("primary")).append("svg").on("click",(function(){if(it.target&&(it.target.getAttribute("class"),"check-rect"==it.target.getAttribute("class")))return;o.selected_horse=null,HM()})),jx={y:o.y,x:o.x,background:o.chart_bg},Ux=function(t,e){e=lp(e);var n={},r=function(t){var e,n=(e=t&&t.select&&t.selectAll?y_(t.node()):y_(t)).node();if(!n)throw new Error("Chart layout instance must have a target");var r=v_(n);return{container:e,getSvg:function(){if(r)return e;for(var t=n.parentNode;t&&!v_(t);)t=t.parentNode;if(!v_(t))throw new Error("target must be an SVG or a descendant of an SVG");return y_(t)}}}(t);Object.defineProperty(n,"svg",{get:r.getSvg}),n.container=r.container,n.chart=function(t){var e=t.container.append("g").attr("class","fl-chart");return function(t){t.append("rect").attr("class","fl-chart-debug-rectangle").attr("x",0).attr("y",0).style("stroke-width","1px").style("fill","none").style("display","none")}(e),e.append("clipPath").attr("class","fl-data-clip-path").append("rect"),e.append("clipPath").attr("class","fl-grid-clip-path").append("rect"),function(t){var e=t.append("g").attr("class","fl-chart-background");e.append("rect").attr("class","fl-chart-fill"),e.append("image").attr("class","fl-chart-image"),e.append("rect").attr("class","fl-chart-interaction").style("opacity",0)}(e),e.append("g").attr("class","fl-data-background"),function(t){var e=t.append("g").attr("class","fl-gridlines").style("pointer-events","none");e.append("g").attr("class","fl-gridlines-vertical"),e.append("g").attr("class","fl-gridlines-horizontal")}(e),function(t){var e=t.append("g").attr("class","fl-axes").attr("aria-hidden",!0),n=e.append("g").attr("class","fl-x-axes"),r=e.append("g").attr("class","fl-y-axes"),i=n.append("g").attr("class","fl-axis fl-x-axis fl-bottom-axis");i.append("g").attr("class","fl-axis-line"),i.append("g").attr("class","fl-axis-ticks"),i.append("g").attr("class","fl-axis-title");var a=n.append("g").attr("class","fl-axis fl-x-axis fl-top-axis");a.append("g").attr("class","fl-axis-line"),a.append("g").attr("class","fl-axis-ticks"),a.append("g").attr("class","fl-axis-title");var o=r.append("g").attr("class","fl-axis fl-y-axis fl-left-axis");o.append("g").attr("class","fl-axis-line"),o.append("g").attr("class","fl-axis-ticks"),o.append("g").attr("class","fl-axis-title");var l=r.append("g").attr("class","fl-axis fl-y-axis fl-right-axis");l.append("g").attr("class","fl-axis-line"),l.append("g").attr("class","fl-axis-ticks"),l.append("g").attr("class","fl-axis-title")}(e),e.append("g").attr("class","fl-data-foreground"),e}(n),n.data_background=n.chart.select("g.fl-data-background"),n.data_foreground=n.chart.select("g.fl-data-foreground"),n.identifier=function(t){var e="fl-chart-layout-"+x_++;return function(n){return void 0===n?e:(e=n,t)}}(n),n.debug=function(t){let e=!1;return function(n){return void 0===n?e:(e=!!n,t)}}(n),n.debugColor=function(t){let e="red";return function(n){return void 0===n?e:(e=n,t)}}(n),n.clip=function(t){var e=w_;return function(n){return void 0===n?e:(e=n?"object"!=typeof n?w_:Object.freeze({left:!!n.left,top:!!n.top,right:!!n.right,bottom:!!n.bottom}):k_,t)}}(n),n.animationDuration=function(t){var e=0;return function(n){return void 0===n?e:(e=n,t)}}(n);var i=function(t){var e={},n=null,r=null,i=null;return e.width=function(e){return void 0===e?null!==n?n:t.svg.node().getBoundingClientRect().width:(n=e,t)},e.height=function(n){return void 0===n?null!==r?r:null!==i?e.plotHeight()+t.margins.top+t.margins.bottom:t.svg.node().getBoundingClientRect().height:(r=n,i=null,t)},e.plotAspect=function(n){return void 0===n?null!==i?i:e.plotWidth()/e.plotHeight():(r=null,i=n,t)},e.plotWidth=function(){return t.width()-(t.margins.right+t.margins.left)},e.plotHeight=function(){return null===i?e.height()-(t.margins.top+t.margins.bottom):e.plotWidth()/i},e.innerWidth=function(){const{inner_margins:n}=t;return Math.max(0,e.plotWidth()-(n.right+n.left))},e.innerHeight=function(){const{inner_margins:n}=t;return Math.max(0,e.plotHeight()-(n.top+n.bottom))},e.xLeft=function(){return t.margins.left},e.xRight=function(){return t.width()-t.margins.right},e.yBottom=function(){return t.height()-t.margins.bottom},e.yTop=function(){return t.margins.top},e}(n);return n.width=i.width,n.height=i.height,n.plotAspect=i.plotAspect,Object.defineProperty(n,"plot_width",{get:i.plotWidth}),Object.defineProperty(n,"plot_height",{get:i.plotHeight}),Object.defineProperty(n,"inner_width",{get:i.innerWidth}),Object.defineProperty(n,"inner_height",{get:i.innerHeight}),Object.defineProperty(n,"x_left",{get:i.xLeft}),Object.defineProperty(n,"x_right",{get:i.xRight}),Object.defineProperty(n,"y_bottom",{get:i.yBottom}),Object.defineProperty(n,"y_top",{get:i.yTop}),n.offsetLeft=function(t){var e=0;return function(n){return void 0===n?e:(e=n,t)}}(n),n.offsetTop=function(t){var e=0;return function(n){return void 0===n?e:(e=n,t)}}(n),n.margins=ev(n,e),n.inner_margins=function(){var t,e,n,r;t=e=n=r=0;var i=function(){return{top:t,right:e,bottom:n,left:r}};return i._update=function(i){t=(i=i||{}).top||0,e=i.right||0,n=i.bottom||0,r=i.left||0},Object.defineProperty(i,"top",{get:function(){return t}}),Object.defineProperty(i,"right",{get:function(){return e}}),Object.defineProperty(i,"bottom",{get:function(){return n}}),Object.defineProperty(i,"left",{get:function(){return r}}),i}(),n.xData=Ry(n),n.yData=Ry(n),n.y2Data=Ry(n),n.xFormat=Eb(n),n.yFormat=Eb(n),n.y2Format=Eb(n),n.xNumberParse=ey(n),n.yNumberParse=ey(n),n.y2NumberParse=ey(n),n.xDatetimeParse=ny(n),n.yDatetimeParse=ny(n),n.y2DatetimeParse=ny(n),n.xTitle=function(t,e){return t.xAutoTitle=Qy(t),t.xAutoTitle("X"),function(){return("auto"===e.x.title_mode?t.xAutoTitle():e.x.title).trim()}}(n,e),n.yTitle=function(t,e){return t.yAutoTitle=Qy(t),t.yAutoTitle("Y"),function(){return("auto"===e.y.title_mode?t.yAutoTitle():e.y.title).trim()}}(n,e),n.y2Title=function(t,e){return t.y2AutoTitle=Qy(t),t.y2AutoTitle("Y2"),function(){return("auto"===e.y2.title_mode?t.y2AutoTitle():e.y2.title).trim()}}(n,e),n.xTicks=function(t,e){var n=e.x,r=Object.freeze([]),i=t.chart.select(".fl-x-axes"),a=function(){return r};return a._update=function(e){var a,o=t.xData().string_array?"string":"numeric",l=Ey(y_(".fl-x-axes"),n.tick_label_size,n.tick_label_weight),u="default"===n.tick_label_position?+n.tick_label_angle:90,s=0,c=t.xFormat(),f=Ny(n.tick_label_size);i.append("text").style("opacity",0).style("font",l).each((function(){var t=y_(this).text(By).node().getBoundingClientRect();a=t.height})).remove(),"object"==typeof e[0]&&(e=Wy(e,c));var h=Ny(n.tick_label_space);"auto"===n.tick_label_space_mode&&(h=t.xTicks.autoLabelSpace().px);var d=Vy({text_height:a,max_space:h,font:l,angle:90-u,max_lines:n.tick_label_max_lines});return r=e.map((function(t,e){var r,i,l,h,g,p,_=d(c(t)),b=_.lines,m=_.text_width,y=0,v=a*b.length+(b.length-1)*n.tick_label_line_height;if(0===u||90===u)l=h=(r=0===u?m+Ny(.5):v)/2,g=i=0===u?v:m,p=i,90===u&&(y=b.length<2?0:(b.length-1)/2*(f*n.tick_label_line_height));else{var x=Iy(u),w=Math.sin(x),k=Math.cos(x);r=(l=m*k)+(h=v*w),i=(g=m*w)+(p=v*k)}if("top"===n.axis_position||"float-above"===n.axis_position){var M=l;l=h,h=M,M=g,g=p,p=M,0!==u&&90!==u&&(y=b.length<2?0:(b.length-1)*(f*n.tick_label_line_height))}s=Math.max(s,i);var T="numeric"===o?jy(t):null,A="numeric"===o?Oy(t):null;return Object.freeze({index:e,value:t,lines:b,significant_digits:T,exponent:A,text_width:m,text_height:a,box_width:r,box_height:i,box_width_left:l,box_width_right:h,box_height_left:g,box_height_right:p,multiline_offset:y})})),r.type=o,r.max_box_height="fixed"===n.tick_label_space_mode?Ny(n.tick_label_space):s,Object.freeze(r),t},a.autoLabelSpace=Xy(t,"height",120),a}(n,e),n.yTicks=function(t,e){return Zy(t,e,"y")}(n,e),n.y2Ticks=function(t,e){return Zy(t,e,"y2")}(n,e),n.xAutoTicks=function(t){const e=Gy(t,"x");return t=>e(t)}(n),n.yAutoTicks=function(t){const e=Gy(t,"y");return t=>e(t)}(n),n.y2AutoTicks=function(t){const e=Gy(t,"y2");return t=>e(t)}(n),n.xScale=Jv(n,e),n.yScale=Kv(n,e),n.y2Scale=tx(n,e),n.xPadding=function(t){const e=["px","steps"];let n=0,r=0,i="px";return function(a){if(void 0===a)return{left:n,right:r,unit:i};const o=a.unit;if(o&&!e.includes(o))throw new Error(`Unit "${o}" not recognised`);return({left:n=n,right:r=r,unit:i=i}=a),t}}(n),n.yPadding=function(t){const e=["px","steps"];let n=0,r=0,i="px";return function(a){if(void 0===a)return{bottom:n,top:r,unit:i};const o=a.unit;if(o&&!e.includes(o))throw new Error(`Unit "${o}" not recognised`);return({bottom:n=n,top:r=r,unit:i=i}=a),t}}(n),n.y2Padding=function(t){const e=["px","steps"];let n=0,r=0,i="px";return function(a){if(void 0===a)return{bottom:n,top:r,unit:i};const o=a.unit;if(o&&!e.includes(o))throw new Error(`Unit "${o}" not recognised`);return({bottom:n=n,top:r=r,unit:i=i}=a),t}}(n),n.xMinStep=function(t){return function(){return Qv(t.xData(),t.xScale())}}(n),n.yMinStep=function(t){return function(){return Qv(t.yData(),t.yScale())}}(n),n.y2MinStep=function(t){return function(){return Qv(t.y2Data(),t.y2Scale())}}(n),n.xFlipAxis=nx(n),n.yFlipAxis=nx(n),n.y2FlipAxis=nx(n),n.xZeroAxis=ex(n),n.yZeroAxis=ex(n),n.y2ZeroAxis=ex(n),n.xHide=rx(n),n.yHide=rx(n),n.y2Hide=rx(n),n.y2Hide(!0),n.update=dx(n,e),n}(Ox,jx);function Hx(){Ax=pt(Dx.getSection("controls")).append("div").attr("id","viz-ui"),Ux.clip(!1),xx=Ux.data_foreground,Ux.data_background,xx.append("clipPath").attr("id","clip").append("rect").attr("width",0),xx.append("clipPath").attr("id","circleClip").append("circle"),Tx=xx.append("g").attr("class","g-checks"),wx=xx.append("g").attr("class","g-lines").attr("clip-path","url(#clip)"),Mx=xx.append("g").attr("class","g-start-circles"),kx=xx.append("g").attr("class","g-labels").style("direction","ltr"),Fx.container(kx.node()).duration(0).delay(0);var t=pt(Dx.getSection("primary")).append("div").attr("id","caption");t.append("div").attr("id","text"),t.append("div").attr("id","image").append("img"),Kk=Ax.append("div").attr("id","horse-controls"),tM=Kk.append("div").attr("class","fl-controls-container").attr("id","replay-container").append("div").attr("class","fl-control fl-control-buttons").append("div").attr("class","button").attr("role","button").attr("aria-label",o.label_replay).attr("tabindex",0).attr("id","replay").text(o.label_replay).on("click",Vk).on("keydown",(function(){"Enter"==it.key&&Vk()})),fM.appendTo(Kk.node()).on("change",(function(t){o.value_type=t===o.label_scores?"scores":"ranks",HM()})),Gk=Ax.append("div").attr("id","filter-control").node(),cM.appendTo(Gk).on("change",(function(t){o.filter_value=t,HM()}))}var Lx=Object.freeze({categorical_type:"palette",categorical_palette:["#135ae1","#2197ff","#9852d9","#f54e8b","#fa6502","#f2b90f","#058896","#09aa64","#de2c35","#a7abaf","#808080"],categorical_extend:!0,categorical_custom_palette:"",numeric_type:"sequential",sequential_palette:"FlourishBlues",sequential_custom_min:"#F5F7FF",sequential_custom_max:"#002196",sequential_color_space:"rgb",sequential_reverse:!1,sequential_custom_domain:!1,sequential_domain_min:0,sequential_domain_max:1,diverging_palette:"RdBu",diverging_custom_min:"#1AA7EE",diverging_custom_mid:"#F7F7F7",diverging_custom_max:"#FF6283",diverging_color_space:"rgb",diverging_reverse:!1,diverging_custom_domain:!1,diverging_domain_min:0,diverging_domain_mid:.5,diverging_domain_max:1,binning:!1,bin_count:4,bin_mode:"fixed",bin_thresholds:""}),qx=360/((1+Math.sqrt(5))/2),Px="#FF0000";function Yx(t,e,n){return function(r,i){Array.isArray(r)||(r=r?[r]:[Px]),i=void 0!==i?i:qx;var a=r.map((function(e){return t(e)})).filter((function(t){return!isNaN(t[e])&&!isNaN(t[n])}));a.length||(a=[t(Px)]);var o,l=a.length,u=a.reduce((function(t,n){return t+n[e]}),0)/l,s=a.reduce((function(t,e){return t+e[n]}),0)/l,c=l;do{o=a[--c].h}while(isNaN(o)&&c>0);var f=0;return function(){var e=++f*i;return Cs(t((o+e)%360,u,s)).hex()}}}var $x={hcl:Yx(ac,"c","l"),hsl:Yx(Ps,"s","l")};function Rx(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function Bx(t,e){switch(arguments.length){case 0:break;case 1:this.interpolator(t);break;default:this.interpolator(e).domain(t)}return this}var Ix=Array.prototype,Wx=Ix.map,Vx=Ix.slice;function Xx(t){return+t}var Zx=[0,1];function Gx(t){return t}function Qx(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:function(t){return function(){return t}}(isNaN(e)?NaN:.5)}function Jx(t){var e,n=t[0],r=t[t.length-1];return n>r&&(e=n,n=r,r=e),function(t){return Math.max(n,Math.min(r,t))}}function Kx(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=Qx(i,r),a=n(o,a)):(r=Qx(r,i),a=n(a,o)),function(t){return a(r(t))}}function tw(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=Qx(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(e){var n=aa(t,e,1,r)-1;return a[n](i[n](e))}}function ew(t,e){return function(){var t,e,n,r,i,a,o=Zx,l=Zx,u=bn,s=Gx;function c(){return r=Math.min(o.length,l.length)>2?tw:Kx,i=a=null,f}function f(e){return isNaN(e=+e)?n:(i||(i=r(o.map(t),l,u)))(t(s(e)))}return f.invert=function(n){return s(e((a||(a=r(l,o.map(t),hn)))(n)))},f.domain=function(t){return arguments.length?(o=Wx.call(t,Xx),s===Gx||(s=Jx(o)),c()):o.slice()},f.range=function(t){return arguments.length?(l=Vx.call(t),c()):l.slice()},f.rangeRound=function(t){return l=Vx.call(t),u=mn,c()},f.clamp=function(t){return arguments.length?(s=t?Jx(o):Gx,f):s!==Gx},f.interpolate=function(t){return arguments.length?(u=t,c()):u},f.unknown=function(t){return arguments.length?(n=t,f):n},function(n,r){return t=n,e=r,c()}}()(t,e)}function nw(t){var e=t.domain;return t.ticks=function(t){var n=e();return ha(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return function(t,e,n,r){var i,a=ga(t,e,n);switch((r=ql(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=Ql(a,o))||(r.precision=i),Wl(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=Jl(a,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=Gl(a))||(r.precision=i-2*("%"===r.type))}return Il(r)}(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i=e(),a=0,o=i.length-1,l=i[a],u=i[o];return u<l&&(r=l,l=u,u=r,r=a,a=o,o=r),(r=da(l,u,n))>0?r=da(l=Math.floor(l/r)*r,u=Math.ceil(u/r)*r,n):r<0&&(r=da(l=Math.ceil(l*r)/r,u=Math.floor(u*r)/r,n)),r>0?(i[a]=Math.floor(l/r)*r,i[o]=Math.ceil(u/r)*r,e(i)):r<0&&(i[a]=Math.ceil(l*r)/r,i[o]=Math.floor(u*r)/r,e(i)),t},t}function rw(){var t=ew(Gx,Gx);return t.copy=function(){return e=t,rw().domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown());var e},Rx.apply(t,arguments),nw(t)}function iw(){var t,e=[],n=[],r=[];function i(){var t=0,i=Math.max(1,n.length);for(r=new Array(i-1);++t<i;)r[t-1]=pa(e,t/i);return a}function a(e){return isNaN(e=+e)?t:n[aa(r,e)]}return a.invertExtent=function(t){var i=n.indexOf(t);return i<0?[NaN,NaN]:[i>0?r[i-1]:e[0],i<r.length?r[i]:e[e.length-1]]},a.domain=function(t){if(!arguments.length)return e.slice();e=[];for(var n,r=0,a=t.length;r<a;++r)null==(n=t[r])||isNaN(n=+n)||e.push(n);return e.sort(ea),i()},a.range=function(t){return arguments.length?(n=Vx.call(t),i()):n.slice()},a.unknown=function(e){return arguments.length?(t=e,a):t},a.quantiles=function(){return r.slice()},a.copy=function(){return iw().domain(e).range(n).unknown(t)},Rx.apply(a,arguments)}function aw(){var t,e=0,n=1,r=1,i=[.5],a=[0,1];function o(e){return e<=e?a[aa(i,e,0,r)]:t}function l(){var t=-1;for(i=new Array(r);++t<r;)i[t]=((t+1)*n-(t-r)*e)/(r+1);return o}return o.domain=function(t){return arguments.length?(e=+t[0],n=+t[1],l()):[e,n]},o.range=function(t){return arguments.length?(r=(a=Vx.call(t)).length-1,l()):a.slice()},o.invertExtent=function(t){var o=a.indexOf(t);return o<0?[NaN,NaN]:o<1?[e,i[0]]:o>=r?[i[r-1],n]:[i[o-1],i[o]]},o.unknown=function(e){return arguments.length?(t=e,o):o},o.thresholds=function(){return i.slice()},o.copy=function(){return aw().domain([e,n]).range(a).unknown(t)},Rx.apply(nw(o),arguments)}function ow(){var t,e=[.5],n=[0,1],r=1;function i(i){return i<=i?n[aa(e,i,0,r)]:t}return i.domain=function(t){return arguments.length?(e=Vx.call(t),r=Math.min(e.length,n.length-1),i):e.slice()},i.range=function(t){return arguments.length?(n=Vx.call(t),r=Math.min(e.length,n.length-1),i):n.slice()},i.invertExtent=function(t){var r=n.indexOf(t);return[e[r-1],e[r]]},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return ow().domain(e).range(n).unknown(t)},Rx.apply(i,arguments)}function lw(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function uw(){var t=nw(function(){var t,e,n,r,i,a=0,o=1,l=Gx,u=!1;function s(e){return isNaN(e=+e)?i:l(0===n?.5:(e=(r(e)-t)*n,u?Math.max(0,Math.min(1,e)):e))}return s.domain=function(i){return arguments.length?(t=r(a=+i[0]),e=r(o=+i[1]),n=t===e?0:1/(e-t),s):[a,o]},s.clamp=function(t){return arguments.length?(u=!!t,s):u},s.interpolator=function(t){return arguments.length?(l=t,s):l},s.unknown=function(t){return arguments.length?(i=t,s):i},function(i){return r=i,t=i(a),e=i(o),n=t===e?0:1/(e-t),s}}()(Gx));return t.copy=function(){return lw(t,uw())},Bx.apply(t,arguments)}function sw(){var t=nw(function(){var t,e,n,r,i,a,o,l=0,u=.5,s=1,c=Gx,f=!1;function h(t){return isNaN(t=+t)?o:(t=.5+((t=+a(t))-e)*(t<e?r:i),c(f?Math.max(0,Math.min(1,t)):t))}return h.domain=function(o){return arguments.length?(t=a(l=+o[0]),e=a(u=+o[1]),n=a(s=+o[2]),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),h):[l,u,s]},h.clamp=function(t){return arguments.length?(f=!!t,h):f},h.interpolator=function(t){return arguments.length?(c=t,h):c},h.unknown=function(t){return arguments.length?(o=t,h):o},function(o){return a=o,t=o(l),e=o(u),n=o(s),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),h}}()(Gx));return t.copy=function(){return lw(t,sw())},Bx.apply(t,arguments)}function cw(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n}function fw(t){return un(t[t.length-1])}var hw=fw(new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(cw)),dw=fw(new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(cw)),gw=fw(new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(cw)),pw=fw(new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(cw)),_w=fw(new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(cw)),bw=fw(new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(cw)),mw=fw(new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(cw)),yw=fw(new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(cw)),vw=fw(new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(cw)),xw=fw(new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(cw)),ww=fw(new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(cw)),kw=fw(new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(cw)),Mw=fw(new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(cw)),Tw=fw(new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(cw)),Aw=fw(new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(cw)),Nw=fw(new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(cw)),Cw=fw(new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(cw)),Sw=fw(new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(cw)),Ew=fw(new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(cw)),zw=fw(new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(cw)),Dw=fw(new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(cw)),Fw=Fn(Je(300,.5,0),Je(-240,.5,1)),Ow=Fn(Je(-100,.75,.35),Je(80,1.5,.8)),jw=Fn(Je(260,.75,.35),Je(80,1.5,.8));function Uw(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}Je();var Hw=Uw(cw("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),Lw=Uw(cw("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),qw=Uw(cw("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Pw=Uw(cw("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Yw(t,e){return t-e}function $w(t,e){var n=e[0],r=e[e.length-1],i=aw().domain([n,r]),a=Math.floor(t.bin_count);return i.range(ua(a)),i.thresholds()}function Rw(t,e,n){var r;return r="fixed"==t.bin_mode?$w(t,e):"quantile"==t.bin_mode?function(t,e,n){var r=iw().domain(n),i=Math.floor(t.bin_count);return r.range(ua(i)),r.quantiles()}(t,0,n):function(t){return t.bin_thresholds.split(";").map(parseFloat).filter((function(t){return!isNaN(t)&&null!==t})).sort(Yw)}(t),r}function Bw(t,e,n,r,i){for(var a=1+e;a<=t+e;a++)i.push(r(n(a)))}function Iw(t,e,n){var r=e.length,i=rw(),a=[];if(1===r)a.push(n(.5));else if(2===t.length)i.domain([1,r]).range([0,1]),Bw(r,0,i,n,a);else if(2===r)a.push(n(0)),a.push(n(1));else{var o,l,u=t[1],s=function(t,e){var n;return t.forEach((function(t,r){Math.abs(t-e)<.001&&(n=r)})),n}(e,u);s?(o=s,l=r-s-1,i.domain([1,o+1]).range([0,.5]),Bw(o,0,i,n,a),a.push(n(.5)),i.domain([1,l+1]).range([.5,1]),Bw(l,1,i,n,a)):(o=function(t,e){var n=0;return t.forEach((function(t){t<e&&n++})),n}(e,u),l=r-o,i.domain([1,o+1]).range([0,.5]),Bw(o,0,i,n,a),i.domain([1,l+1]).range([.5,1]),Bw(l,1,i,n,a))}return a}function Ww(t,e,n,r){var i,a=Rw(t,e,n),o=function(t,e,n){var r=[];if(0===e.length)return[.5*(t+n)];r.push(.5*(t+e[0]));for(var i=0;i<e.length-1;i++)r.push(.5*(e[i]+e[i+1]));return r.push(.5*(n+e[e.length-1])),r}(e[0],a,e[e.length-1]),l=Iw(e,o,r);(i="quantile"==t.bin_mode?iw().domain(n):ow().domain(a)).range(l);var u=function(t){return isNaN(t)||null===t?null:i(t)};return u.domain=Object.freeze(e),u.thresholds=Object.freeze(a),u.centers=Object.freeze(o),u}function Vw(t){return Array.isArray(t)?la(t):[0,1]}const Xw=Object.freeze(["#efeca4","#e9e28f","#dccf64","#e3b23c","#e49547","#e37746","#dc5b36","#cb4144","#bb2244","#972545","#6a2c4f"]),Zw=Object.freeze(["rgb(245, 247, 255)","rgb(242, 245, 254)","rgb(239, 243, 254)","rgb(237, 242, 254)","rgb(234, 240, 254)","rgb(231, 239, 254)","rgb(228, 237, 254)","rgb(225, 236, 254)","rgb(222, 234, 254)","rgb(219, 233, 254)","rgb(216, 231, 254)","rgb(213, 230, 254)","rgb(210, 228, 254)","rgb(207, 227, 254)","rgb(204, 225, 254)","rgb(200, 224, 253)","rgb(198, 222, 253)","rgb(195, 221, 253)","rgb(192, 219, 253)","rgb(189, 217, 253)","rgb(186, 216, 253)","rgb(183, 214, 253)","rgb(180, 212, 253)","rgb(177, 211, 253)","rgb(174, 209, 253)","rgb(171, 207, 253)","rgb(168, 206, 253)","rgb(165, 204, 253)","rgb(162, 202, 253)","rgb(159, 201, 253)","rgb(156, 199, 253)","rgb(152, 197, 253)","rgb(149, 195, 253)","rgb(146, 193, 253)","rgb(143, 192, 253)","rgb(140, 190, 253)","rgb(137, 188, 253)","rgb(134, 186, 253)","rgb(130, 184, 253)","rgb(127, 183, 253)","rgb(124, 181, 253)","rgb(121, 179, 253)","rgb(117, 177, 253)","rgb(114, 175, 253)","rgb(111, 173, 253)","rgb(107, 171, 253)","rgb(104, 169, 253)","rgb(100, 167, 253)","rgb(97, 165, 253)","rgb(93, 163, 253)","rgb(90, 161, 252)","rgb(87, 159, 251)","rgb(84, 157, 250)","rgb(81, 155, 248)","rgb(78, 153, 247)","rgb(75, 151, 245)","rgb(72, 149, 244)","rgb(68, 147, 243)","rgb(65, 145, 241)","rgb(61, 143, 240)","rgb(58, 141, 239)","rgb(55, 139, 237)","rgb(51, 136, 236)","rgb(48, 134, 235)","rgb(44, 132, 234)","rgb(41, 130, 233)","rgb(37, 127, 231)","rgb(32, 125, 230)","rgb(28, 123, 229)","rgb(24, 120, 228)","rgb(23, 117, 228)","rgb(21, 114, 227)","rgb(20, 111, 227)","rgb(19, 108, 226)","rgb(18, 105, 226)","rgb(17, 102, 225)","rgb(17, 99, 225)","rgb(17, 96, 225)","rgb(17, 93, 223)","rgb(16, 90, 220)","rgb(16, 88, 217)","rgb(15, 85, 214)","rgb(14, 82, 211)","rgb(13, 80, 208)","rgb(12, 77, 205)","rgb(12, 74, 202)","rgb(10, 71, 198)","rgb(9, 69, 195)","rgb(7, 66, 191)","rgb(6, 63, 187)","rgb(5, 61, 184)","rgb(4, 58, 180)","rgb(3, 55, 176)","rgb(2, 52, 172)","rgb(1, 49, 168)","rgb(1, 46, 164)","rgb(0, 43, 160)","rgb(0, 40, 157)","rgb(0, 36, 153)","rgb(0, 33, 150)"]),Gw=Object.freeze(["rgb(224, 255, 236)","rgb(220, 253, 233)","rgb(216, 252, 230)","rgb(213, 251, 227)","rgb(209, 250, 225)","rgb(206, 249, 222)","rgb(202, 247, 219)","rgb(198, 246, 216)","rgb(195, 245, 213)","rgb(191, 244, 210)","rgb(187, 242, 207)","rgb(184, 241, 204)","rgb(180, 240, 201)","rgb(176, 238, 198)","rgb(173, 237, 195)","rgb(169, 236, 192)","rgb(165, 234, 188)","rgb(161, 233, 186)","rgb(157, 232, 183)","rgb(153, 230, 180)","rgb(149, 229, 178)","rgb(145, 228, 175)","rgb(141, 226, 172)","rgb(137, 225, 169)","rgb(132, 223, 167)","rgb(128, 222, 164)","rgb(123, 221, 161)","rgb(119, 219, 158)","rgb(114, 218, 156)","rgb(111, 216, 153)","rgb(107, 214, 151)","rgb(104, 212, 148)","rgb(101, 210, 146)","rgb(97, 209, 143)","rgb(94, 207, 141)","rgb(90, 205, 138)","rgb(87, 203, 136)","rgb(83, 201, 133)","rgb(79, 199, 131)","rgb(76, 198, 128)","rgb(73, 196, 126)","rgb(70, 194, 124)","rgb(66, 191, 122)","rgb(63, 189, 120)","rgb(59, 187, 118)","rgb(56, 185, 116)","rgb(52, 183, 114)","rgb(48, 181, 111)","rgb(43, 179, 109)","rgb(39, 177, 107)","rgb(37, 175, 105)","rgb(34, 172, 103)","rgb(32, 170, 100)","rgb(30, 168, 98)","rgb(27, 166, 96)","rgb(24, 163, 94)","rgb(21, 161, 92)","rgb(18, 159, 89)","rgb(14, 156, 87)","rgb(11, 154, 85)","rgb(11, 151, 82)","rgb(11, 149, 79)","rgb(11, 146, 77)","rgb(11, 144, 74)","rgb(11, 141, 72)","rgb(11, 139, 69)","rgb(11, 136, 66)","rgb(11, 134, 64)","rgb(11, 131, 61)","rgb(11, 128, 59)","rgb(10, 126, 56)","rgb(10, 123, 54)","rgb(10, 120, 51)","rgb(10, 118, 49)","rgb(9, 115, 46)","rgb(9, 112, 44)","rgb(8, 109, 41)","rgb(8, 107, 39)","rgb(7, 104, 36)","rgb(7, 101, 34)","rgb(6, 98, 31)","rgb(6, 95, 28)","rgb(5, 93, 25)","rgb(5, 90, 23)","rgb(5, 87, 21)","rgb(6, 84, 20)","rgb(6, 80, 18)","rgb(6, 77, 17)","rgb(6, 74, 15)","rgb(6, 71, 14)","rgb(5, 68, 12)","rgb(5, 65, 10)","rgb(4, 61, 8)","rgb(4, 58, 7)","rgb(3, 55, 5)","rgb(2, 52, 4)","rgb(1, 48, 2)","rgb(1, 45, 1)","rgb(0, 41, 0)","rgb(0, 38, 0)"]),Qw=Object.freeze(["rgb(248, 247, 248)","rgb(245, 245, 246)","rgb(243, 243, 244)","rgb(241, 241, 242)","rgb(239, 239, 240)","rgb(237, 237, 238)","rgb(234, 235, 236)","rgb(232, 232, 234)","rgb(230, 230, 232)","rgb(228, 228, 231)","rgb(226, 226, 229)","rgb(223, 224, 227)","rgb(221, 222, 225)","rgb(219, 220, 223)","rgb(217, 218, 221)","rgb(214, 216, 219)","rgb(212, 214, 217)","rgb(210, 212, 215)","rgb(208, 210, 213)","rgb(206, 208, 211)","rgb(203, 206, 209)","rgb(201, 204, 207)","rgb(199, 202, 205)","rgb(197, 199, 202)","rgb(195, 197, 200)","rgb(192, 195, 198)","rgb(190, 193, 196)","rgb(188, 191, 194)","rgb(186, 189, 192)","rgb(184, 187, 190)","rgb(181, 184, 188)","rgb(179, 182, 186)","rgb(177, 180, 184)","rgb(175, 178, 182)","rgb(172, 175, 179)","rgb(170, 173, 177)","rgb(168, 171, 175)","rgb(166, 169, 172)","rgb(164, 166, 170)","rgb(162, 164, 168)","rgb(160, 162, 165)","rgb(157, 160, 163)","rgb(155, 157, 160)","rgb(153, 155, 158)","rgb(151, 153, 155)","rgb(149, 150, 153)","rgb(146, 148, 151)","rgb(144, 146, 148)","rgb(142, 143, 146)","rgb(140, 141, 143)","rgb(137, 138, 141)","rgb(135, 136, 138)","rgb(133, 134, 135)","rgb(131, 131, 133)","rgb(129, 129, 130)","rgb(127, 126, 127)","rgb(125, 124, 125)","rgb(122, 121, 122)","rgb(120, 119, 120)","rgb(117, 116, 117)","rgb(115, 114, 115)","rgb(112, 111, 112)","rgb(110, 109, 110)","rgb(107, 106, 107)","rgb(105, 104, 105)","rgb(102, 101, 102)","rgb(99, 98, 99)","rgb(97, 96, 97)","rgb(94, 93, 94)","rgb(92, 91, 92)","rgb(89, 88, 89)","rgb(86, 85, 86)","rgb(84, 83, 83)","rgb(81, 80, 80)","rgb(78, 77, 77)","rgb(75, 74, 74)","rgb(73, 72, 72)","rgb(70, 69, 69)","rgb(67, 66, 66)","rgb(64, 63, 63)","rgb(61, 60, 60)","rgb(58, 57, 57)","rgb(55, 54, 54)","rgb(52, 51, 51)","rgb(49, 48, 48)","rgb(45, 45, 45)","rgb(42, 42, 42)","rgb(38, 38, 38)","rgb(35, 35, 35)","rgb(32, 32, 32)","rgb(28, 28, 28)","rgb(25, 25, 25)","rgb(21, 21, 21)","rgb(17, 17, 17)","rgb(13, 13, 13)","rgb(9, 9, 9)","rgb(5, 5, 5)","rgb(2, 2, 2)","rgb(1, 1, 1)","rgb(0, 0, 0)"]),Jw=Object.freeze(["rgb(254, 235, 222)","rgb(253, 232, 218)","rgb(253, 230, 215)","rgb(253, 228, 211)","rgb(253, 226, 208)","rgb(253, 224, 204)","rgb(253, 222, 201)","rgb(253, 220, 197)","rgb(253, 218, 194)","rgb(253, 216, 190)","rgb(253, 214, 187)","rgb(252, 211, 183)","rgb(252, 209, 180)","rgb(252, 207, 177)","rgb(252, 205, 173)","rgb(252, 203, 170)","rgb(252, 201, 167)","rgb(251, 198, 163)","rgb(251, 196, 160)","rgb(251, 194, 156)","rgb(251, 191, 153)","rgb(251, 189, 149)","rgb(251, 187, 146)","rgb(251, 184, 141)","rgb(252, 181, 136)","rgb(252, 179, 132)","rgb(253, 176, 127)","rgb(253, 173, 122)","rgb(253, 170, 117)","rgb(254, 168, 112)","rgb(254, 165, 107)","rgb(254, 162, 103)","rgb(254, 159, 98)","rgb(254, 156, 93)","rgb(255, 153, 88)","rgb(255, 151, 84)","rgb(255, 148, 79)","rgb(255, 144, 73)","rgb(255, 141, 68)","rgb(255, 138, 63)","rgb(255, 135, 57)","rgb(255, 132, 52)","rgb(255, 129, 46)","rgb(254, 125, 40)","rgb(253, 123, 38)","rgb(252, 121, 36)","rgb(251, 118, 34)","rgb(249, 116, 32)","rgb(248, 113, 30)","rgb(247, 111, 27)","rgb(245, 108, 25)","rgb(244, 105, 23)","rgb(242, 103, 20)","rgb(241, 100, 18)","rgb(239, 98, 15)","rgb(238, 95, 13)","rgb(236, 93, 10)","rgb(235, 90, 7)","rgb(233, 87, 4)","rgb(231, 85, 2)","rgb(230, 82, 0)","rgb(227, 80, 0)","rgb(225, 78, 0)","rgb(223, 76, 0)","rgb(220, 74, 0)","rgb(218, 72, 0)","rgb(215, 70, 0)","rgb(213, 68, 0)","rgb(210, 66, 0)","rgb(208, 65, 0)","rgb(205, 63, 0)","rgb(203, 61, 0)","rgb(200, 59, 0)","rgb(197, 58, 0)","rgb(195, 56, 0)","rgb(192, 54, 0)","rgb(189, 52, 0)","rgb(186, 50, 0)","rgb(183, 49, 0)","rgb(180, 47, 0)","rgb(177, 46, 0)","rgb(174, 45, 0)","rgb(171, 44, 0)","rgb(168, 42, 0)","rgb(164, 41, 0)","rgb(161, 40, 1)","rgb(158, 39, 1)","rgb(154, 38, 2)","rgb(151, 37, 3)","rgb(147, 36, 3)","rgb(144, 34, 4)","rgb(140, 33, 4)","rgb(137, 32, 4)","rgb(133, 31, 4)","rgb(130, 30, 5)","rgb(126, 28, 6)","rgb(123, 27, 6)","rgb(119, 26, 7)","rgb(115, 25, 7)","rgb(112, 24, 8)"]),Kw=Object.freeze(["rgb(255, 245, 250)","rgb(254, 242, 249)","rgb(254, 239, 248)","rgb(254, 237, 247)","rgb(254, 234, 246)","rgb(253, 232, 245)","rgb(253, 229, 244)","rgb(253, 226, 243)","rgb(253, 224, 241)","rgb(253, 221, 240)","rgb(253, 218, 239)","rgb(253, 216, 238)","rgb(253, 213, 236)","rgb(254, 210, 235)","rgb(254, 207, 233)","rgb(254, 204, 232)","rgb(254, 201, 230)","rgb(254, 198, 229)","rgb(254, 195, 227)","rgb(254, 192, 225)","rgb(254, 189, 224)","rgb(254, 186, 222)","rgb(254, 183, 220)","rgb(254, 180, 218)","rgb(255, 177, 216)","rgb(255, 174, 214)","rgb(255, 171, 211)","rgb(254, 168, 209)","rgb(254, 165, 207)","rgb(254, 162, 204)","rgb(254, 158, 202)","rgb(254, 155, 199)","rgb(254, 152, 196)","rgb(254, 149, 194)","rgb(254, 146, 191)","rgb(253, 142, 188)","rgb(253, 139, 186)","rgb(253, 135, 183)","rgb(253, 131, 180)","rgb(253, 128, 178)","rgb(253, 124, 175)","rgb(252, 120, 172)","rgb(252, 117, 169)","rgb(252, 113, 166)","rgb(251, 109, 163)","rgb(250, 106, 160)","rgb(249, 102, 157)","rgb(248, 98, 155)","rgb(248, 94, 152)","rgb(247, 91, 149)","rgb(246, 87, 146)","rgb(244, 83, 143)","rgb(243, 79, 140)","rgb(242, 75, 137)","rgb(239, 72, 135)","rgb(237, 70, 134)","rgb(235, 67, 132)","rgb(232, 65, 130)","rgb(230, 62, 129)","rgb(227, 59, 127)","rgb(224, 56, 125)","rgb(222, 53, 124)","rgb(219, 50, 122)","rgb(217, 48, 119)","rgb(214, 46, 116)","rgb(211, 43, 113)","rgb(208, 41, 110)","rgb(205, 39, 107)","rgb(202, 36, 104)","rgb(199, 34, 101)","rgb(197, 31, 98)","rgb(194, 29, 95)","rgb(190, 26, 91)","rgb(187, 24, 88)","rgb(184, 21, 85)","rgb(181, 18, 82)","rgb(178, 15, 78)","rgb(174, 12, 75)","rgb(171, 8, 72)","rgb(168, 4, 69)","rgb(164, 2, 65)","rgb(160, 2, 62)","rgb(156, 2, 58)","rgb(152, 2, 55)","rgb(148, 1, 51)","rgb(144, 1, 48)","rgb(140, 1, 45)","rgb(136, 1, 42)","rgb(132, 1, 39)","rgb(128, 1, 36)","rgb(123, 1, 33)","rgb(119, 0, 31)","rgb(114, 0, 28)","rgb(110, 0, 26)","rgb(105, 0, 23)","rgb(101, 0, 21)","rgb(96, 0, 18)","rgb(91, 0, 16)","rgb(86, 0, 14)","rgb(82, 0, 12)"]),tk=Object.freeze(["rgb(253, 245, 254)","rgb(251, 242, 253)","rgb(250, 240, 253)","rgb(249, 238, 253)","rgb(248, 236, 253)","rgb(246, 234, 253)","rgb(245, 231, 253)","rgb(244, 229, 253)","rgb(242, 227, 253)","rgb(241, 225, 252)","rgb(240, 223, 252)","rgb(239, 220, 252)","rgb(237, 218, 252)","rgb(236, 216, 252)","rgb(235, 213, 252)","rgb(234, 211, 251)","rgb(233, 209, 251)","rgb(231, 206, 251)","rgb(230, 204, 251)","rgb(229, 202, 251)","rgb(228, 199, 250)","rgb(227, 197, 250)","rgb(225, 195, 250)","rgb(224, 192, 250)","rgb(223, 190, 250)","rgb(222, 187, 250)","rgb(221, 185, 249)","rgb(219, 182, 249)","rgb(218, 180, 249)","rgb(217, 177, 249)","rgb(216, 175, 249)","rgb(214, 172, 249)","rgb(213, 170, 249)","rgb(212, 167, 249)","rgb(211, 164, 249)","rgb(209, 162, 249)","rgb(208, 159, 249)","rgb(207, 156, 249)","rgb(206, 154, 249)","rgb(204, 151, 249)","rgb(203, 148, 249)","rgb(202, 145, 249)","rgb(200, 142, 249)","rgb(199, 140, 248)","rgb(197, 138, 247)","rgb(195, 136, 246)","rgb(193, 133, 245)","rgb(191, 131, 244)","rgb(189, 129, 242)","rgb(187, 126, 241)","rgb(185, 124, 240)","rgb(183, 122, 238)","rgb(182, 119, 237)","rgb(180, 117, 235)","rgb(178, 114, 234)","rgb(176, 112, 233)","rgb(174, 109, 231)","rgb(172, 107, 230)","rgb(170, 104, 229)","rgb(168, 102, 227)","rgb(166, 99, 226)","rgb(164, 97, 224)","rgb(162, 94, 223)","rgb(160, 91, 221)","rgb(158, 89, 220)","rgb(156, 86, 219)","rgb(154, 83, 217)","rgb(152, 81, 216)","rgb(149, 79, 213)","rgb(146, 77, 210)","rgb(143, 75, 208)","rgb(141, 73, 205)","rgb(138, 71, 202)","rgb(135, 69, 199)","rgb(132, 67, 197)","rgb(130, 65, 194)","rgb(127, 63, 191)","rgb(124, 61, 188)","rgb(122, 58, 185)","rgb(119, 56, 183)","rgb(117, 53, 180)","rgb(114, 50, 178)","rgb(112, 47, 175)","rgb(109, 44, 173)","rgb(107, 41, 170)","rgb(104, 38, 167)","rgb(102, 35, 164)","rgb(99, 32, 161)","rgb(96, 29, 157)","rgb(93, 26, 153)","rgb(90, 24, 149)","rgb(88, 22, 144)","rgb(85, 20, 139)","rgb(81, 17, 134)","rgb(78, 14, 129)","rgb(75, 12, 125)","rgb(72, 8, 120)","rgb(69, 5, 115)","rgb(66, 2, 110)","rgb(63, 0, 106)"]),ek=Object.freeze(["rgb(219, 252, 255)","rgb(215, 250, 253)","rgb(211, 249, 252)","rgb(208, 248, 251)","rgb(204, 246, 250)","rgb(200, 245, 249)","rgb(196, 244, 248)","rgb(193, 243, 247)","rgb(189, 241, 246)","rgb(185, 240, 245)","rgb(181, 239, 244)","rgb(177, 237, 243)","rgb(173, 236, 242)","rgb(169, 235, 241)","rgb(164, 234, 240)","rgb(160, 232, 239)","rgb(156, 231, 238)","rgb(152, 229, 237)","rgb(149, 228, 236)","rgb(145, 226, 234)","rgb(142, 225, 233)","rgb(138, 223, 232)","rgb(135, 221, 231)","rgb(131, 220, 230)","rgb(128, 218, 229)","rgb(124, 216, 228)","rgb(120, 215, 227)","rgb(116, 213, 226)","rgb(112, 211, 224)","rgb(110, 210, 223)","rgb(108, 208, 221)","rgb(106, 206, 219)","rgb(104, 204, 217)","rgb(102, 202, 216)","rgb(100, 200, 214)","rgb(98, 198, 212)","rgb(96, 196, 210)","rgb(93, 194, 208)","rgb(91, 192, 207)","rgb(89, 190, 205)","rgb(87, 188, 203)","rgb(85, 186, 201)","rgb(82, 184, 199)","rgb(80, 182, 197)","rgb(78, 180, 195)","rgb(75, 178, 193)","rgb(73, 176, 191)","rgb(71, 174, 189)","rgb(68, 172, 187)","rgb(66, 170, 185)","rgb(63, 168, 183)","rgb(60, 166, 180)","rgb(58, 163, 178)","rgb(55, 161, 176)","rgb(52, 159, 174)","rgb(49, 157, 172)","rgb(45, 155, 169)","rgb(42, 153, 167)","rgb(38, 151, 165)","rgb(35, 149, 163)","rgb(33, 147, 161)","rgb(30, 144, 158)","rgb(28, 142, 156)","rgb(26, 140, 154)","rgb(23, 137, 151)","rgb(20, 135, 149)","rgb(17, 133, 147)","rgb(14, 130, 144)","rgb(10, 128, 142)","rgb(8, 126, 140)","rgb(7, 123, 137)","rgb(6, 121, 135)","rgb(6, 118, 132)","rgb(5, 116, 130)","rgb(4, 113, 127)","rgb(3, 111, 125)","rgb(2, 108, 122)","rgb(2, 105, 119)","rgb(2, 103, 117)","rgb(2, 100, 114)","rgb(2, 97, 112)","rgb(2, 95, 109)","rgb(2, 92, 106)","rgb(2, 89, 103)","rgb(2, 87, 101)","rgb(2, 84, 98)","rgb(1, 81, 95)","rgb(1, 78, 92)","rgb(1, 75, 90)","rgb(0, 73, 87)","rgb(0, 70, 84)","rgb(0, 67, 81)","rgb(0, 64, 77)","rgb(0, 61, 73)","rgb(0, 58, 70)","rgb(0, 55, 66)","rgb(0, 52, 62)","rgb(0, 49, 59)","rgb(0, 46, 55)","rgb(0, 43, 51)"]),nk=Object.freeze(["rgb(255, 247, 246)","rgb(254, 244, 243)","rgb(255, 242, 240)","rgb(255, 239, 238)","rgb(255, 237, 235)","rgb(255, 235, 232)","rgb(255, 232, 229)","rgb(255, 230, 227)","rgb(255, 227, 224)","rgb(255, 225, 221)","rgb(255, 222, 218)","rgb(255, 220, 215)","rgb(255, 217, 213)","rgb(255, 215, 210)","rgb(255, 212, 207)","rgb(255, 210, 203)","rgb(255, 207, 200)","rgb(255, 204, 197)","rgb(255, 202, 194)","rgb(255, 199, 191)","rgb(255, 197, 188)","rgb(255, 194, 185)","rgb(255, 191, 182)","rgb(255, 189, 179)","rgb(255, 186, 175)","rgb(255, 183, 172)","rgb(255, 180, 169)","rgb(255, 177, 166)","rgb(255, 174, 162)","rgb(255, 171, 159)","rgb(255, 168, 156)","rgb(255, 165, 153)","rgb(255, 162, 149)","rgb(255, 159, 146)","rgb(255, 156, 143)","rgb(255, 153, 140)","rgb(255, 149, 136)","rgb(255, 146, 133)","rgb(255, 142, 130)","rgb(255, 139, 127)","rgb(255, 135, 124)","rgb(255, 132, 120)","rgb(255, 128, 117)","rgb(255, 125, 114)","rgb(254, 121, 111)","rgb(254, 117, 108)","rgb(253, 114, 105)","rgb(252, 110, 102)","rgb(252, 107, 99)","rgb(251, 103, 96)","rgb(250, 99, 93)","rgb(249, 95, 91)","rgb(248, 92, 88)","rgb(247, 88, 85)","rgb(246, 85, 82)","rgb(244, 81, 80)","rgb(242, 78, 77)","rgb(240, 75, 75)","rgb(239, 72, 72)","rgb(237, 68, 70)","rgb(235, 65, 67)","rgb(233, 61, 65)","rgb(231, 57, 62)","rgb(229, 55, 60)","rgb(226, 52, 58)","rgb(223, 49, 56)","rgb(221, 46, 53)","rgb(218, 44, 51)","rgb(215, 41, 49)","rgb(213, 38, 47)","rgb(210, 35, 45)","rgb(207, 31, 43)","rgb(204, 28, 40)","rgb(201, 26, 38)","rgb(198, 23, 36)","rgb(195, 20, 34)","rgb(191, 17, 32)","rgb(188, 14, 30)","rgb(185, 10, 27)","rgb(181, 6, 25)","rgb(178, 2, 23)","rgb(174, 1, 21)","rgb(170, 1, 18)","rgb(166, 1, 16)","rgb(162, 1, 13)","rgb(158, 1, 11)","rgb(154, 0, 8)","rgb(150, 0, 6)","rgb(146, 0, 4)","rgb(142, 0, 3)","rgb(138, 0, 2)","rgb(133, 0, 2)","rgb(129, 0, 1)","rgb(125, 0, 1)","rgb(120, 0, 0)","rgb(116, 0, 0)","rgb(111, 0, 0)","rgb(107, 0, 0)","rgb(102, 0, 0)","rgb(98, 0, 0)"]),rk=Object.freeze(["rgb(255, 249, 224)","rgb(254, 247, 218)","rgb(253, 245, 212)","rgb(252, 243, 206)","rgb(251, 241, 200)","rgb(251, 239, 194)","rgb(250, 237, 188)","rgb(250, 235, 182)","rgb(250, 233, 176)","rgb(249, 231, 170)","rgb(249, 229, 163)","rgb(249, 227, 157)","rgb(249, 225, 151)","rgb(248, 222, 145)","rgb(248, 220, 139)","rgb(247, 218, 132)","rgb(247, 216, 126)","rgb(247, 214, 120)","rgb(246, 211, 113)","rgb(246, 209, 107)","rgb(245, 207, 100)","rgb(245, 204, 93)","rgb(245, 202, 87)","rgb(244, 200, 80)","rgb(244, 197, 73)","rgb(243, 195, 68)","rgb(241, 193, 64)","rgb(240, 191, 59)","rgb(239, 189, 55)","rgb(237, 187, 50)","rgb(236, 184, 46)","rgb(234, 182, 40)","rgb(233, 180, 35)","rgb(231, 178, 29)","rgb(230, 176, 22)","rgb(229, 174, 13)","rgb(226, 172, 12)","rgb(224, 170, 12)","rgb(222, 168, 11)","rgb(219, 166, 11)","rgb(217, 164, 10)","rgb(215, 163, 9)","rgb(212, 161, 9)","rgb(210, 159, 8)","rgb(208, 157, 8)","rgb(205, 155, 7)","rgb(203, 153, 6)","rgb(200, 151, 6)","rgb(198, 150, 6)","rgb(195, 148, 6)","rgb(193, 146, 6)","rgb(190, 144, 6)","rgb(187, 142, 6)","rgb(185, 141, 5)","rgb(182, 139, 5)","rgb(180, 137, 5)","rgb(177, 135, 5)","rgb(175, 133, 5)","rgb(172, 131, 5)","rgb(170, 129, 5)","rgb(168, 127, 5)","rgb(165, 125, 5)","rgb(163, 123, 6)","rgb(160, 121, 6)","rgb(158, 119, 6)","rgb(156, 116, 6)","rgb(153, 114, 6)","rgb(150, 112, 6)","rgb(148, 110, 6)","rgb(145, 108, 6)","rgb(143, 106, 6)","rgb(140, 104, 6)","rgb(137, 102, 6)","rgb(135, 100, 6)","rgb(132, 98, 6)","rgb(129, 96, 5)","rgb(126, 94, 5)","rgb(123, 92, 4)","rgb(120, 90, 4)","rgb(117, 88, 3)","rgb(114, 86, 3)","rgb(111, 84, 2)","rgb(108, 81, 2)","rgb(105, 79, 1)","rgb(102, 77, 1)","rgb(99, 75, 1)","rgb(96, 73, 1)","rgb(93, 70, 0)","rgb(90, 68, 0)","rgb(87, 66, 0)","rgb(84, 63, 0)","rgb(81, 61, 0)","rgb(78, 58, 0)","rgb(75, 56, 0)","rgb(72, 53, 0)","rgb(69, 51, 0)","rgb(66, 48, 0)","rgb(62, 46, 0)","rgb(59, 43, 0)","rgb(56, 41, 0)"]);var ik=Object.freeze({BuGn:xw,BuPu:ww,Carrots:un(Xw),Cool:jw,CubehelixDefault:Fw,FlourishBlues:un(Zw),FlourishGreens:un(Gw),FlourishGreys:un(Qw),FlourishOranges:un(Jw),FlourishPinks:un(Kw),FlourishPurples:un(tk),FlourishReds:un(nk),FlourishTeals:un(ek),FlourishYellows:un(rk),GnBu:kw,Inferno:qw,Magma:Lw,OrRd:Mw,Plasma:Pw,PuBu:Aw,PuBuGn:Tw,PuRd:Nw,RdPu:Cw,Viridis:Hw,Warm:Ow,YlGn:Ew,YlGnBu:Sw,YlOrBr:zw,YlOrRd:Dw}),ak={hcl:zn,hsl:Sn,lab:En,rgb:on};function ok(t,e){var n=t.sequential_custom_domain?[t.sequential_domain_min,t.sequential_domain_max]:Vw(e),r=function(e){var n=ik[t.sequential_palette]||function(t){var e=t.sequential_color_space,n=t.sequential_custom_min,r=t.sequential_custom_max;return ak[e](n,r)}(t);return t.sequential_reverse?n(1-e):n(e)};if(t.binning)return Ww(t,n,e,r);var i=uw(r).domain(n),a=function(t){return isNaN(t)||null===t?null:i(t)};return a.domain=Object.freeze(n),a}var lk=Object.freeze({BrBG:hw,PiYG:gw,PRGn:dw,PuOr:pw,RdBu:_w,RdGy:bw,RdYlBu:mw,RdYlGn:yw,Spectral:vw}),uk={hcl:zn,hsl:Sn,lab:En,rgb:on};function sk(t){var e=t.diverging_color_space,n=t.diverging_custom_min,r=t.diverging_custom_mid,i=t.diverging_custom_max;return function(t,e){for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return a[e](t-e)}}(uk[e],[n,r,i])}var ck,fk=function(t){var e=null;for(var n in Lx)void 0===t[n]&&(t[n]=Lx[n]);var r=null,i=function(t){return e&&e(t)||r};return{getColor:i,updateColorScale:function(n){return"number"!=typeof n[0]?e=function(t,e){var n={},r=ka(e).values(),i=t.categorical_palette,a=i.length;if(t.categorical_extend){var o=Lx.rotation_angle,l=$x.hcl(i,o);r.forEach((function(t,e){n[t]=e<a?i[e]:l()}))}else r.forEach((function(t,e){n[t]=i[e%a]}));t.categorical_custom_palette.split("\n").filter(Boolean).forEach((function(t){var e=t.lastIndexOf(":");if(-1!==e){var r=t.slice(0,e).trim(),i=t.slice(e+1).trim();r&&i&&(n[r]=i)}}));var u=function(t){return n[t]};return u.domain=r.slice(),u.colors=r.map((function(t){return n[t]})),u.items=r.map((function(t){return{label:t,color:n[t]}})),u}(t,n):"sequential"===t.numeric_type?e=ok(t,n):"diverging"===t.numeric_type&&(e=function(t,e){var n=Vw(e),r=n[0]<0&&n[1]>0?0:(n[0]+n[1])/2,i=[n[0],r,n[1]];t.diverging_custom_domain&&(i=[t.diverging_domain_min,t.diverging_domain_mid,t.diverging_domain_max]);var a=function(e){var n=lk[t.diverging_palette]||sk(t);return t.diverging_reverse?n(1-e):n(e)};if(t.binning)return Ww(t,i,e,a);var o=sw(a).domain(i),l=function(t){return isNaN(t)||null===t?null:o(t)};return l.domain=Object.freeze(i),l.midpoint=t.diverging_custom_domain?t.diverging_domain_mid:r,l}(t,n)),i.thresholds=e.thresholds,i.centers=e.centers,i.midpoint=e.midpoint,i.domain=e.domain,i.colors=e.colors,i.items=e.items,this},fallback:function(t){return void 0===t?r:(r="default"===t?null:t,this)}}}(o.color);function hk(){fk.updateColorScale(gk()),ck={},o.color_single_overrides.split("\n").filter((function(t){return t.trim()})).forEach((function(t){var e=t.lastIndexOf(":");if(-1!==e){var n=t.slice(0,e).trim(),r=t.slice(e+1).trim();n&&r&&void 0===ck[n]&&(ck[n]=r)}}))}function dk(t){var e="category"==o.color_mode?"category":"name",n="string"==typeof t?t:t[e];return"single"==o.color_mode?ck[n]||o.color_single:fk.getColor(n)}function gk(){var t=[];return"single"!=o.color_mode&&(t=a.horserace.map((function(t){return"line"==o.color_mode?t.name:t.category}))),t}var pk,_k,bk,mk,yk,vk,xk,wk,kk,Mk,Tk,Ak,Nk,Ck,Sk,Ek=function(t){for(let e in Kd)void 0===t[e]&&(t[e]=Kd[e]);return function(e){return tg(t,e)}}(o.formatting);function zk(t,e){var n=!sM||"zoom"==o.play_mode;function r(t){var e=Fk(t).x,r=-bk-mk/2-4;return n&&(r=bk+mk/2+4),e+r}function i(r){var i=o.rank_outside_picture?Ok(r,t,e):"",a=r.name,l=o.rank_outside_picture?o.label_divider:"";return n?a+l+i:i+l+a}return uM.map((function(t){return{text:i(t),x:r(t),y:Fk(t).y,color:dk(t),opacity:zM(t,"label"),datum:t,filter_name:t.name,id:t.unfiltered_index,alignment:n?"right":"left"}}))}function Dk(t){var e=Wk<t.start_circle.i?0:1,n=Math.floor(Wk),r=t.line[n].value,i=t.line[n+1]?t.line[n+1].value:null,a=Wk-Math.floor(Wk),o=Math.floor(Wk),l=r;if(null==r||n<t.stages.length&&null==i&&a>0){var u=TM(t);o=u,l=t.line[u].value}else o=Wk,l=r+(i-r)*a;let s=Ak(l);return isFinite(s)||(s=0),`translate(${Tk(o)}, ${s}) scale(${e})`}function Fk(t){var e=Math.floor(Wk),n=t.line[e].value,r=t.line[e+1]?t.line[e+1].value:null,i=Wk-Math.floor(Wk),a=Math.floor(Wk),o=n;if(null==n||e<t.stages.length&&null==r&&i>0){var l=TM(t);a=l,o=t.line[l].value}else a=Wk,o=n+(r-n)*i;let u=Ak(o);return isFinite(u)||(u=0),{x:Tk(a),y:u}}function Ok(t,e,n){const r=t.line[Math.floor(Wk)],i=t.line[Math.floor(Wk+1)];let a=null===r.value?t.line[TM(t)]:r,l=null;var u,s,c="scores"===o.value_type&&o.animate_scores;"ahead"==e?c?l=null===i.value?null:i:a=i:"behind"==e&&(c&&(l=r),a=i),l&&(u=(l.value-a.value)*n,s=a.value+u);var f=(l?s:a.value)||t.line[TM(t)].value;return""===f?"":("ranks"===o.value_type?f:pk(f))+" "}function jk(t,e){!function(t){var e=a.horserace.column_names.stages.length,n="zoom"!=o.play_mode?0:Math.max(0,t-o.zoom_steps_to_show),r=Math.min(e,o.zoom_steps_to_show),i=e-1;"reveal"==o.play_mode?i=Math.max(n+r,Math.min(t,e-1)):"zoom"==o.play_mode&&(i=Math.max(t+r,2*r));Ck=[n,i]}(t),function(t){var e,n;if("ranks"==o.value_type)Sk=[1,uM.max_rank];else{if("all"!=o.play_mode&&o.zoom_y_axis){var r=Math.floor(t),i=Math.ceil(t),l=uM.timeslices[r],u=uM.timeslices[i],s=l?l.min_score:null,c=l?l.max_score:null;e=s+((u?u.min_score:null)-s)*(t-r);var f=(n=c+((u?u.max_score:null)-c)*(t-r))-e,h=0;e-=f*h,n+=f*h}else o.zoom_y_axis?(e=ba(a.horserace,(function(t){return Qk!=o.filter_all_label&&Qk!=t.filter?null:ba(t.stages)})),n=_a(a.horserace,(function(t){return Qk!=o.filter_all_label&&Qk!=t.filter?null:_a(t.stages)}))):(e=ba(a.horserace,(function(t){return ba(t.stages)})),n=_a(a.horserace,(function(t){return _a(t.stages)})));Sk=[e,n]}}(t);for(var n=[],r=Math.max(o.y.linear_max||0,uM.max_rank),i=0;i<r;i++)n.push(i+1);var l=bk+mk;Ux.xData(Ck).yData(Sk).animationDuration(e).xAutoTicks(a.horserace.column_names.stages.map(((t,e)=>e))).xFormat((t=>a.horserace.column_names.stages[t])).xPadding({right:sM||"zoom"==o.play_mode?l:l+Dx.remToPx(o.padding_right),left:sM&&"zoom"!=o.play_mode?Dx.remToPx(o.padding_left):0}).yFlipAxis("ranks"==o.value_type).yAutoTicks("scores"==o.value_type?null:n).yFormat("scores"==o.value_type?pk:null).yZeroAxis("scores"==o.value_type).yPadding({top:.5*kk+Dx.remToPx(o.padding_top),bottom:.5*kk+Dx.remToPx(o.padding_bottom)}).update(),Tk=Ux.xScale(),Ak=Ux.yScale()}var Uk="A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",Hk="fl-spanner",Lk=Hk+"-";function qk(t){("string"==typeof t||t instanceof HTMLElement)&&(t=pt(t));var e={data:[],element:null,ignore_case:!0,text:function(t){return t},class:Hk},n=function(t,n){var r=e.text(t,n);if(!r||"string"!=typeof r)return null;var i=r.trim();return i?{original:r,trimmed:i,length:i.length,d:t,i:n}:null},r=function(){var r=t.node(),i=t.text(),a=e.element;return a||(a=r instanceof SVGElement||"svg"===r.nodeName.toLowerCase()?"tspan":"span"),e.data.map(n).filter((function(t){return t})).sort((function(t,e){return e.length-t.length||t.i-e.i})).forEach((function(t){var n=function(t,n){var r=n.trimmed.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),i="<"+t+".*?<\\/"+t+">|(?:(^|[^"+Uk+"])("+r+")($|[^"+Uk+"]))",a=e.ignore_case?"gi":"g";return new RegExp(i,a)}(a,t);i=i.replace(n,(function(e,n,r,i){return r?n+function(t,e,n){return"<"+t+" class='"+Lk+n+"'>"+e+"</"+t+">"}(a,r,t.i)+i:e}))})),t.html(i),t.selectAll(a).each((function(){var t=e.data[this.getAttribute("class").slice(Lk.length)];pt(this).datum(t).attr("class",e.class)}))};return r.data=function(t){return void 0===t?e.data:(e.data=Array.isArray(t)?t:[t],r)},r.element=function(t){return void 0===t?e.element:(e.element=t,r)},r.ignoreCase=function(t){return void 0===t?e.ignore_case:(e.ignore_case=!!t,r)},r.text=function(t){return void 0===t?e.text:(e.text=t,r)},r.class=function(t){return void 0===t?e.class:(e.class=t,r)},r}var Pk,Yk=450,$k=null,Rk=null;function Bk(){var t=Math.floor(Wk);if(t!==$k){Pk=Pk||pt("#caption");var e=a.horserace.column_names.stages[t],n=uM.captions[e];n!=Rk&&(n?Pk.style("opacity",1).html(n):Pk.style("opacity",0),Ik(),"text_legend"==o.caption_mode&&function(){var t=gk();qk(Pk.select("#text")).data(t)().style("color",(function(t){dk(t)}))}(),Rk=n),$k=t}}function Ik(){Pk=Pk||pt("#caption");var t=o.caption_position.split("-")[0],e=o.caption_position.split("-")[1],n=Dx.getPrimaryWidth()<Yk,r=0==o.caption_image_position.indexOf("column")||n,i=o.caption_background_color||o.layout.background_color;Pk.select("#text").style("max-width",o.caption_text_width+"rem").style("text-align",o.caption_text_align_h).style("align-self",o.caption_text_align_v).style("font-weight",o.caption_text_weight),Pk.select("#image").style("max-height",r?o.caption_image_width+"%":null).style("width",o.caption_image_width+"rem"),Pk.style("flex-direction",(function(){return n?"column":o.caption_image_position})).style("gap",(function(){return this.querySelector("img")?o.caption_space_between+"rem":0})).style("font-size",o.caption_font_size+"rem").style("padding",o.caption_padding+"rem").style("border-radius",o.caption_border_radius+"rem").style("align-items",0==o.caption_image_position.indexOf("column")?o.caption_text_align:null).style("background",(function(){var t=i.replace("#","");return"rgba("+parseInt(t.substring(0,t.length/3),16)+","+parseInt(t.substring(t.length/3,2*t.length/3),16)+","+parseInt(t.substring(2*t.length/3,3*t.length/3),16)+","+o.caption_opacity+")"})).style("color",o.caption_text_color||o.layout.font_color).style("border","1px solid "+o.caption_border_color).style("top",(function(){return"top"===t?"5%":"bottom"===t?null:"50%"})).style("left",(function(){return"left"===e?"5%":"right"===e?null:"50%"})).style("right",(function(){return"right"===e?"5%":null})).style("bottom",(function(){return"bottom"===t?"5%":null})).style("transform",(function(){return"translate("+("center"==e?"-50%":0)+", "+("center"==t?"-50%":0)+")"}))}var Wk=0;function Vk(){o.target_position=0,Wk=0,o.target_position=a.horserace.column_names.stages.length,oM()}var Xk,Zk,Gk,Qk,Jk,Kk,tM,eM,nM,rM,iM=null;function aM(t){var e,n=jM();if(!Xk)return Xk=t,iM=requestAnimationFrame(aM),void(Zk=Wk<n);(e=Zk?(Wk+=(t-Xk)/o.stage_duration)>n:(Wk-=(t-Xk)/o.stage_duration)<n)&&(Wk=n),"all"!=o.play_mode&&jk(Wk,0);var r=Wk-Math.floor(Wk),i=e?null:Zk?"ahead":"behind";MM(0);var a=zk(i,r);Fx.data(a).duration(0).update(),_k.interrupt().attr("transform",Dk).select("text").text((function(t){return o.rank_outside_picture||"hover"!==o.show_labels&&"always"!==o.show_labels?"":Ok(t)})),Bk(),"all"!=o.play_mode&&(AM(),wM(0),kM(0)),e?iM=null:(iM=requestAnimationFrame(aM),Xk=t)}function oM(){Xk=null,iM&&cancelAnimationFrame(iM),iM=requestAnimationFrame(aM)}var lM,uM,sM,cM=ts(o.filter_control),fM=ts(o.toggle_control);function hM(){(Jk=function(){if(void 0===a.horserace.column_names.filter)return null;var t=ka(a.horserace,(function(t){return t.filter})),e=[];t.each((function(t){e.push(t)})),e.length>1&&o.filter_include_all&&e.push(o.filter_all_label);return e}())?(dM(),cM.options(Jk).value(Qk||"").update()):(dM(),cM.options([]).update())}function dM(){Qk=Jk?o.filter_value?o.filter_value:o.filter_include_all?o.filter_all_label:Jk[0]:null}function gM(){fM.options(o.show_buttons?[o.label_scores,o.label_ranks]:[]).value("scores"===o.value_type?o.label_scores:o.label_ranks).update(),tM.text(o.label_replay),pt("#replay-container").style("display",o.show_replay?null:"none"),hM(),eM.update(),nM.update(),rM.update(),Ax.style("display",o.show_buttons||o.show_replay||Jk?null:"none")}function pM(t){var e=void 0,n=0,r=0;t.forEach((function(t){null==t.score?t.rank=null:t.score==e?(t.rank=n,r++):(t.rank=n+r+1,n=t.rank,r=0),e=t.score,lM=Math.max(lM,t.rank)}))}function _M(t){var e=void 0,n=0;t.forEach((function(t){null==t.score?t.rank=null:t.score==e?t.rank=n:t.rank=++n,e=t.score,lM=Math.max(lM,t.rank)}))}function bM(){var t=[];lM=0,a.horserace.forEach((function(t,e){t.unfiltered_index=e}));var e,n={};e=Qk&&Qk!==o.filter_all_label?a.horserace.filter((function(t){return t.filter===Qk})):a.horserace;var r=1/0,i=-1/0;a.horserace.column_names.stages.forEach((function(a,l){var u=[];n[a]=null,e.forEach((function(t,e){if(void 0!==t.stages[l]){var n=t.stages[l];t.index=e,u.push({name:t.name,index:e,score:n})}})),u.sort((function(t,e){return o.higher_scores_win?function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}(t.score,e.score):ea(t.score,e.score)})),("dense"===o.ties_mode?_M:pM)(u);var s={};u.forEach((function(t){s[t.index]=t})),t.push(s);var c=la(u.map((function(t){return t.score})));t[l].min_score=Math.min(r,c[0]),t[l].max_score=Math.max(i,c[1])}));var l=e.map((function(e,n){var r=null;return e.ranks=e.stages.map((function(e,r){return t[r][n].rank})),e.line=e.stages.map((function(e,r){const i=t[r][n],a="log"===o.y.numeric_scale_type;let l=i.score;0===l&&a&&(l=null);return{i:r,value:"ranks"==o.value_type?i.rank:l}})),e.missing_line=e.line.map((function(t,n){return null!==t.value||0===n?null!==t.value&&r?(r=null,t):{i:t.i,value:null}:r?void 0:(r=!0,{i:t.i-1,value:e.line[n-1].value})})).filter((function(t){return void 0!==t})),e.start_circle=e.line.find((function(t){return null!=t.value})),e})).filter((function(t){return t.start_circle}));l.max_rank=lM,l.timeslices=t;for(var u=a.captions||[],s=0;s<u.length;s++){var c=u[s],f=!1;for(var h in n)if(h==c.from&&(f=!0),f&&(n[h]="<div id='text'>"+c.text+"</div><div id='image' style='display: "+(c.image?"inline-block":"none")+";'><img src='"+c.image+"' /></div>",h==c.to))break}return l.captions=n,a.horserace.processed?l.new_data=!1:(l.new_data=!0,a.horserace.processed=!0),l}eM=function(t,e,n){return new is(t,e,n)}(o.controls_style,".fl-control",o.layout),nM=function(t,e,n){return new ls(t,e,n)}(o.button_style,".fl-control-buttons",o.layout),rM=function(t,e,n){return new ss(t,e,n)}(o.dropdown_style,".fl-control-dropdown",o.layout);var mM,yM=null,vM=[],xM=Fr().x((function(t){return Tk(t.i)})).y((function(t){return Ak(t.value)})).defined((function(t){return null!=t.value}));function wM(t){var e=wx.selectAll(".line-group").data(uM,(function(t,e){return t.name||"horse-"+e})),n=e.enter().append("g").attr("class","horse line-group").on("mouseenter",DM).on("mouseleave",FM).on("click",OM).on("focus",DM).on("blur",FM).on("keydown",(function(t,e){"Enter"!=t.code&&"Space"!=t.code||OM(t,e),"Escape"==t.code&&(o.selected_horse=null,HM())})).attr("tabindex",0).attr("clip-path","url(#clip)").attr("stroke-linejoin","round").attr("stroke-linecap","round").attr("fill","none");n.append("path").attr("class","missing"),n.append("path").attr("class","line"),n.append("path").attr("class","shade"),(mM=e.merge(n)).attr("opacity",zM).attr("stroke",dk),mM.select(".line").transition().duration(t).attr("d",(function(t){return xM(t.line)})).attr("opacity",o.line_opacity).attr("stroke-width",vk),mM.select(".shade").transition().duration(t).attr("d",(function(t){return xM(t.line)})).attr("display",o.shade?"block":"none").attr("opacity",o.shade_opacity).attr("stroke-width",xk),mM.select(".missing").transition().duration(t).attr("d",(function(t){return xM(t.missing_line)})).attr("opacity",o.missing?o.missing_opacity:0).attr("stroke-dasharray",Dx.remToPx(o.missing_stroke_dash)+","+Dx.remToPx(o.missing_stroke_dash)).attr("stroke-width",wk),e.exit().remove()}function kM(t){var e=Mx.selectAll(".start-circle").data(uM,(function(t,e){return t.name||"horse-"+e})),n=e.enter().append("circle").attr("class","horse start-circle").attr("cy",(function(t){return Ak(t.start_circle.value)})).attr("cx",(function(t){return Tk(t.start_circle.i)})).attr("clip-path","url(#clip)");e.merge(n).attr("opacity",zM).transition().duration(t).attr("cy",(function(t){return Ak(t.start_circle.value)})).attr("cx",(function(t){return Tk(t.start_circle.i)})).attr("r",yk).attr("fill",dk),e.exit().remove()}function MM(t){var e="all"!=o.play_mode?0:Math.max(yk,xk);pt("#clip rect").attr("x",Ux.margins().left-e).transition().duration(t).attr("width",Tk(Wk)-Ux.margins().left+e)}function TM(t){for(var e=0,n=Math.floor(Wk);n>0;n--)if(null!=t.line[n].value){e=n;break}return e}function AM(){var t=Tk(1)/2;"zoom"==o.play_mode&&(t=Tk(Math.max(Wk-o.zoom_steps_to_show+1,1)));var e=Ux.margins().top,n=Ux.plot_height,r=e;"bottom"==o.x.axis_position?r=e+n:"float-below"!=o.x.axis_position&&"float-above"!=o.x.axis_position||(r=Ak(o.x.y_axis_position)||0);var i=Tx.selectAll(".check").data(a.horserace.column_names.stages),l=i.enter().append("g").attr("class","check");l.append("rect").attr("class","check-rect"),l.append("line"),l.append("circle");var u=i.merge(l);u.on("mouseenter",(function(t,e){CM(this,e)})).on("mouseleave",(function(){SM(this)})).on("click",(function(t,e){NM(e)})).on("focus",(function(t,e){CM(this,e)})).on("blur",(function(){SM(this)})).on("keydown",(function(t,e){"Enter"!=t.code&&"Space"!=t.code||NM(e)})).attr("tabindex",0),u.attr("transform",(function(e,n){return"translate("+(Tk(n)-t/2)+", 0)"})),u.select("rect").attr("x",0).attr("y",0).attr("height",n).attr("fill","none").style("pointer-events","all").attr("width",t),u.select("line").attr("x1",t/2).attr("x2",t/2).attr("y1",e).attr("y2",n+e).attr("stroke",o.x.line_and_tick_color).attr("stroke-width",Dx.remToPx(o.x.gridline_width)).attr("opacity",(function(t,e){return"check-"+e===yM?1:0})).style("pointer-events","none"),u.select("circle").attr("r",4).attr("cx",t/2).attr("cy",r).attr("fill",o.x.line_and_tick_color).attr("opacity",(function(t,e){return"check-"+e===yM?1:0})).style("pointer-events","none"),i.exit().remove()}function NM(t){var e=a.horserace.column_names.stages.indexOf(t);o.target_position=e+1,HM()}function CM(t,e){yM="check-"+a.horserace.column_names.stages.indexOf(e),pt(t).select("line").attr("opacity","1"),pt(t).select("circle").attr("opacity","1")}function SM(t){yM=null,pt(t).select("line").attr("opacity","0"),pt(t).select("circle").attr("opacity","0")}function EM(t){Ox.style("fill","currentColor").attr("font-family",o.layout.body_font.name),wM(t),kM(t),function(t){var e=zk();Fx.data(e).on("mouseover",(function(t,e){DM(t,e.datum)})).on("click",(function(t,e){OM(t,e.datum)})).on("mouseleave",FM).backgroundColor(o.layout.background_color).update();var n=kx.selectAll(".end-circle-container").data(uM,(function(t){return t.name})),r=n.enter().append("g").attr("class","end-circle-container");if(r.append("circle").attr("class","circle bg"),r.append("circle").attr("class","end circle"),r.append("image").attr("clip-path","url(#circleClip)").attr("preserveAspectRatio","xMidYMid slice").style("display","inherit"),r.attr("transform",Dk),r.append("text"),(_k=n.merge(r)).on("mouseenter",DM).on("mouseleave",FM).on("click",OM).each((function(t){var e=!1;vM.length>0&&vM.indexOf(String(t.unfiltered_index))>-1&&(e=!0),0==vM.length&&null!=o.mouseover_horse&&t.unfiltered_index==o.mouseover_horse&&(e=!0),e&&this.parentNode.appendChild(this)})).transition().duration(t).attr("transform",Dk),_k.select(".end.circle").attr("r",bk).attr("fill",dk).attr("opacity",zM).attr("stroke-width",mk).attr("stroke",(function(t){return o.end_circle_stroke_bg&&o.layout.background_color_enabled?o.layout.background_color:dk(t)})),_k.select(".bg.circle").attr("r",bk).attr("fill",o.layout.background_color_enabled?o.layout.background_color:"#ffffff"),o.horse_images){var i=2*bk-mk;_k.select("image").attr("xlink:href",(function(t){if(t.pic&&t.pic.match(/^https:\/\//))return t.pic})).attr("opacity",zM).attr("height",i).attr("width",i).attr("x",-i/2).attr("y",-i/2).style("display","block"),xx.select("#circleClip circle").attr("r",bk-mk/2)}else n.select("image").style("display","none");_k.select("text").attr("class","end-circle-inside-text").text((function(t){return o.rank_outside_picture||"hover"!==o.show_labels&&"always"!==o.show_labels?"":Ok(t)})).style("text-anchor","middle").style("dominant-baseline","middle").style("font-size",o.labels.text_size+"rem").style("font-weight",o.labels.text_weight).style("fill",(function(t){return o.rank_inside_color?o.rank_inside_color:dk(t)})).style("opacity",(()=>"always"===o.show_labels?1:null)),n.exit().remove()}(t),AM()}function zM(t,e){if("label"==e){if(!("hover"===o.show_labels)){const e=Wk<t.start_circle.i;return"always"!==o.show_labels||e?0:1}if(!(t.unfiltered_index==o.mouseover_horse))return 0}return vM.length>0?vM.indexOf(String(t.unfiltered_index))>-1?1:.1:null!=o.mouseover_horse?t.unfiltered_index==o.mouseover_horse?1:.1:1}function DM(t,e){e.unfiltered_index!==o.mouseover_horse&&(o.mouseover_horse=e.unfiltered_index,0==vM.length&&(_k.select(".end.circle").attr("opacity",zM),_k.select("image").attr("opacity",zM),Fx.data(zk()).update(),_k.each((function(t,n){e.unfiltered_index===n?(this.parentNode.appendChild(this),this.classList.add("end-circle-container--hover")):this.classList.remove("end-circle-container--hover")})),mM.attr("opacity",zM),bt(".start-circle").attr("opacity",zM)))}function FM(){o.mouseover_horse=null,0==vM.length&&(_k.select(".end.circle").attr("opacity",zM),_k.select("image").attr("opacity",zM),Fx.data(zk()).update(),_k.each((function(){this.classList.remove("end-circle-container--hover")})),mM.attr("opacity",zM),bt(".start-circle").attr("opacity",zM))}function OM(t,e){(o.mouseover_horse=null,t.stopPropagation(),null==o.selected_horse)?vM=[String(e.unfiltered_index)]:vM.indexOf(String(e.unfiltered_index))>-1?vM.length>1?vM.splice(vM.indexOf(String(e.unfiltered_index)),1):vM=[]:vM.push(String(e.unfiltered_index));o.selected_horse=vM.join(","),HM()}function jM(){var t=a.horserace.column_names.stages.length;return null==o.target_position?t-1:Math.max(0,Math.min(t-1,o.target_position-1))}function UM(t){var e,n,r;sM=window.innerWidth<=420,e=parseFloat(getComputedStyle(document.documentElement).fontSize)||16,zx=function(t){return t*e},pk=a.horserace.metadata.stages.length?Ek(a.horserace.metadata.stages[0].output_format_id):function(t){return t},pt("#viz-ui").style("margin-top",o.show_buttons||o.show_replay?null:0),bt(".axis").style("font-family",o.layout.body_font.name),gM(),Dx.update(),uM=bM(),vM=o.selected_horse?o.selected_horse.split(","):[],n=uM.new_data,r=a.horserace.column_names.stages.length,Wk>r-1&&(Wk=r-1),n&&(Wk=0===o.stage_duration?r-1:0),function(t,e,n){Nk=Nk||document.getElementById("viz-ui"),yk=zx(o.start_circle_r),bk=zx(o.end_circle_r),mk=zx(o.end_circle_stroke),xk=zx(o.shade_width),vk=zx(o.line_width),wk=zx(o.missing_width),kk=Math.max(2*bk+mk,2*yk,vk,xk);var r="ranks"==o.value_type&&null!=o.y.linear_max&&""!=o.y.linear_max?o.y.linear_max:a.horserace.length,i=r*kk+zx(o.circle_space_between)*r;!Flourish.fixed_height&&("flexible"==o.height_mode||"auto"==o.height_mode&&i>Dx.getDefaultPrimaryHeight())?Dx.setHeight(i):Dx.setHeight(null);var l=Dx.getPrimaryHeight(),u=Dx.getPrimaryWidth();Ox.attr("width",u).attr("height",l),Math.max(0,Ux.width()),Mk=Math.max(0,Ux.height()),jk(t,n),pt("#clip rect").attr("height",Mk),MM(n)}(Wk,uM.max_rank,t),xM.curve(ta[o.curve]),hk(),EM(t),Ik(),Wk!=jM()&&oM()}function HM(){UM(o.update_duration)}return t.data=a,t.draw=function(){var t;window.onresize=function(){UM(0)},t=function(){UM(0)},document.fonts&&(t=t||function(){window.template.update()},document.fonts.ready.then((function(e){t(e),document.fonts.addEventListener("loadingdone",(function(){t(e)}))})).catch((function(t){console.log("Error loading fonts",t)}))),Hx(),HM()},t.state=o,t.update=HM,t}({});
//# sourceMappingURL=template.js.map
</script><script src="https://public.flourish.studio/resources/v3/embedded.js"></script><script>
			function _Flourish_unflattenInto(dest, src) {
				dest = dest || {};
				for (var k in src) {
					var t = dest;
					for (var i = k.indexOf("."), p = 0; i >= 0; i = k.indexOf(".", p = i+1)) {
						var s = k.substring(p, i);
						if (!(s in t)) t[s] = {};
						t = t[s];
					}
					t[k.substring(p)] = src[k];
				}
				return dest;
			}
			var _Flourish_settings = {"button_style.background_selected":"#135ae1","color.categorical_palette":["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],"color_mode":"line","end_circle_r":0.7,"filter_control.slider_font_color":null,"layout.source_name":"FTR Intel","layout.source_url":"","play_mode":"all","stage_duration":400};
			_Flourish_unflattenInto(window.template.state, _Flourish_settings);

			var _Flourish_data_column_names = {"captions":{"from":"From","image":"Image","text":"Caption","to":"To"},"horserace":{"name":"Date","stages":["Jan 8","Jan 16","Jan 23","Jan 30","Feb 6","Feb 13","Feb 20","Feb 27","Mar 6","Mar 13","Mar 20","Mar 27","Apr 3","Apr 10","Apr 17","Apr 24","May 1","May 8","May 15","May 22","May 29","Jun 4","Jun 12","Jun 19","Jun 26","Jul 3","Jul 10","Jul 17","July 25","August 1"]}},
				_Flourish_data_metadata = {"captions":{"from":{"type":"string","type_id":"string$arbitrary_string","output_format_id":"string$arbitrary_string"},"image":{"type":"string","type_id":"string$arbitrary_string","output_format_id":"string$arbitrary_string"},"text":{"type":"string","type_id":"string$arbitrary_string","output_format_id":"string$arbitrary_string"},"to":{"type":"string","type_id":"string$arbitrary_string","output_format_id":"string$arbitrary_string"}},"horserace":{"name":{"type":"string","type_id":"string$arbitrary_string","output_format_id":"string$arbitrary_string"},"stages":[{"type":"number","type_id":"number$comma_point","output_format_id":"number$comma_point"},{"type":"number","type_id":"number$comma_point","output_format_id":"number$comma_point"},{"type":"number","type_id":"number$comma_point","output_format_id":"number$comma_point"},{"type":"number","type_id":"number$comma_point","output_format_id":"number$comma_point"},{"type":"number","type_id":"number$comma_point","output_format_id":"number$comma_point"},{"type":"number","type_id":"number$comma_point","output_format_id":"number$comma_point"},{"type":"number","type_id":"number$comma_point","output_format_id":"number$comma_point"},{"type":"number","type_id":"number$comma_point","output_format_id":"number$comma_point"},{"type":"number","type_id":"number$comma_point","output_format_id":"number$comma_point"},{"type":"number","type_id":"number$comma_point","output_format_id":"number$comma_point"},{"type":"number","type_id":"number$comma_point","output_format_id":"number$comma_point"},{"type":"number","type_id":"number$comma_point","output_format_id":"number$comma_point"},{"type":"number","type_id":"number$comma_point","output_format_id":"number$comma_point"},{"type":"number","type_id":"number$comma_point","output_format_id":"number$comma_point"},{"type":"number","type_id":"number$comma_point","output_format_id":"number$comma_point"},{"type":"number","type_id":"number$comma_point","output_format_id":"number$comma_point"},{"type":"number","type_id":"number$comma_point","output_format_id":"number$comma_point"},{"type":"number","type_id":"number$comma_point","output_format_id":"number$comma_point"},{"type":"number","type_id":"number$comma_point","output_format_id":"number$comma_point"},{"type":"number","type_id":"number$comma_point","output_format_id":"number$comma_point"},{"type":"number","type_id":"number$comma_point","output_format_id":"number$comma_point"},{"type":"number","type_id":"number$comma_point","output_format_id":"number$comma_point"},{"type":"number","type_id":"number$comma_point","output_format_id":"number$comma_point"},{"type":"number","type_id":"number$comma_point","output_format_id":"number$comma_point"},{"type":"number","type_id":"number$comma_point","output_format_id":"number$comma_point"},{"type":"number","type_id":"number$comma_point","output_format_id":"number$comma_point"},{"type":"number","type_id":"number$comma_point","output_format_id":"number$comma_point"},{"type":"number","type_id":"number$comma_point","output_format_id":"number$comma_point"},{"type":"number","type_id":"number$comma_point","output_format_id":"number$comma_point"},{"type":"number","type_id":"number$comma_point","output_format_id":"number$comma_point"}]}},
				_Flourish_data_timestamps = {"captions":{"last_updated":new Date(1752691201750)},"horserace":{"last_updated":new Date(1753206328722)}},
				_Flourish_data = {"captions":[],"horserace":[{"name":"Dry Van Rate","stages":[2.14,2.16,2.09,2.06,1.97,1.92,1.87,1.9,1.89,1.88,1.82,1.81,1.84,1.89,1.82,1.8,1.79,1.8,1.76,1.88,1.95,1.94,1.89,1.87,1.86,1.91,2.12,1.95,1.91,null]},{"name":"Reefer Rate","stages":[2.7,2.72,2.57,2.46,2.36,2.23,2.16,2.19,2.13,2.12,2.1,2.08,2.1,2.18,2.11,2.18,2.16,2.25,2.18,2.45,2.44,2.31,2.26,2.31,2.28,2.43,2.63,2.4,2.36,null]},{"name":"Flatbed Rate","stages":[2.19,2.21,2.24,2.24,2.28,2.27,2.29,2.3,2.33,2.35,2.42,2.45,2.5,2.53,2.55,2.6,2.58,2.56,2.49,2.46,2.46,2.49,2.49,2.46,2.45,2.45,2.46,2.4,2.36,null]}]},
				_Flourish_visualisation_id = 24271372,
				_Flourish_visualisation_version_number = 195,
				_Flourish_template_id = 91599;
			for (var _Flourish_dataset in _Flourish_data) {
					window.template.data[_Flourish_dataset] = _Flourish_data[_Flourish_dataset];
					window.template.data[_Flourish_dataset].column_names = _Flourish_data_column_names[_Flourish_dataset];
					window.template.data[_Flourish_dataset].metadata = _Flourish_data_metadata[_Flourish_dataset];
					window.template.data[_Flourish_dataset].timestamps = _Flourish_data_timestamps[_Flourish_dataset];
			}

			
			window.template.draw();
		</script></body></html>